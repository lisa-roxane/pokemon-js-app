"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5877],{97949:function(e,t,n){n.d(t,{hI:function(){return _},nD:function(){return A},G_:function(){return R}});var r=n(97131),o=n(92809),i=n(79056),a=n(30266),s=n(809),c=n.n(s),u=n(91674),l=n(78120),d=n(28519),f=n(62126),p=n(34790),h=n(47421),g=n(73599),v=n(41678),m=n(20881);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e){if(Array.isArray(e)){var t,n="",r=w(e);try{for(r.s();!(t=r.n()).done;){n+=E(t.value)+"\n\n"}}catch(o){r.e(o)}finally{r.f()}return n}return"string"===typeof e?e:e.value}function k(e,t){var n,r=[],o=w(e);try{for(o.s();!(n=o.n()).done;){var i=n.value,a=(0,v.R)(t,i.range.start),s=(0,v.R)(t,i.range.end);if("number"===typeof a&&"number"===typeof s&&a!==s){var c="info";if(void 0!==i.severity)switch(i.severity){case u.H_.Error:c="error";break;case u.H_.Warning:c="warning";break;case u.H_.Hint:case u.H_.Information:c="info"}r.push({from:a,to:s,severity:c,message:i.message,source:i.source})}}}catch(l){o.e(l)}finally{o.f()}return r}function O(e){var t=e.lspClient,n=e.path;return h.lg.define((function(e){var r=t.onDiagnostics((function(t){if(t.path===n){var r=k(t.diagnostics,e.state.doc);e.dispatch((0,d.p0)(e.state,r))}}));return{destroy:function(){r()}}}))}function S(e){var t=e.hover,n=e.doc,r=e.offset,o=e.setHoverTooltipParams;if((Array.isArray(t.contents)||"string"===typeof t.contents)&&0===t.contents.length)return o(null),null;var i=t.range,a=r,s=null;return i&&(a=(0,v.R)(n,i.start),s=(0,v.R)(n,i.end)),null===a?(o(null),null):{pos:a,end:null===s?a+1:s,create:function(){var e=document.createElement("div");e.classList.add("hover-tooltip"),e.style.padding="0",e.style.border="2px solid var(--background-highest)";var n=E(t.contents);return setTimeout((function(){o({dom:e,content:n})})),{dom:e}},above:!0}}function j(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(/[^\w\s]/g,"\\$&"),"]")}function Z(e,t){var n,r,o=e.state,i=e.pos,a=e.explicit,s=o.doc.lineAt(i),c=f.Ij.Invoked,u=null===t||void 0===t||null===(n=t.completionProvider)||void 0===n?void 0:n.triggerCharacters;return!a&&null!==u&&void 0!==u&&u.includes(s.text[i-s.from-1])&&(c=f.Ij.TriggerCharacter,r=s.text[e.pos-s.from-1]),c!==f.Ij.Invoked||e.matchBefore(/\w+$/)?{triggerKind:c,triggerCharacter:r}:null}function C(){return(C=(0,a.Z)(c().mark((function e(t,n){var r,o,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.request.resolveCompletionItem(t);case 2:if(r=e.sent,o=document.createElement("div"),"result"in r){e.next=6;break}return e.abrupt("return",o);case 6:if(r.result){e.next=8;break}return e.abrupt("return",o);case 8:if(i=r.result.detail){e.next=11;break}return e.abrupt("return",o);case 11:return o.textContent=i,o.className="cm-completionDetail",e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=Object.entries(u.cm).reduce((function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1];return y((0,o.Z)({},a,r.toLowerCase()),e)}),{});function D(e,t,n){var r=t.map((function(e){var t,r=e.detail,o=e.label,i=e.kind,a=e.textEdit,s=e.documentation,c=e.filterText,u=e.sortText,l={label:o,detail:r,apply:a?(t=a,function(e){var n=t.newText,r=(0,v.R)(e.state.doc,t.range.start),o=(0,v.R)(e.state.doc,t.range.end);null!==r&&null!==o&&e.dispatch({changes:{from:r,to:o,insert:n},selection:{anchor:r+n.length}})}):o,type:i&&P[i],filterText:(null!==c&&void 0!==c?c:o).toLowerCase(),sortText:u||o};return s?l.info=E(s):r?l.info=r:n&&(l.info=function(){return function(e,t){return C.apply(this,arguments)}(e,n)}),l})),o=function(e){var t,n=Object.create(null),r=Object.create(null),o=w(e);try{for(o.s();!(t=o.n()).done;){var i=t.value.label;n[i[0]]=!0;for(var a=1;a<i.length;a++)r[i[a]]=!0}}catch(c){o.e(c)}finally{o.f()}var s=j(n)+j(r)+"*$";return[new RegExp("^"+s),new RegExp(s)]}(r),a=(0,i.Z)(o,2),s=a[0],c=a[1],u=e.matchBefore(c),l=e.pos;if(u){l=u.from;var d=u.text.toLowerCase();/^\w+$/.test(d)&&(r=r.filter((function(e){return e.filterText.startsWith(d)})).sort((function(e,t){var n=e.sortText,r=t.sortText;return n.startsWith(u.text)&&!r.startsWith(u.text)?-1:!n.startsWith(u.text)&&r.startsWith(u.text)?1:0})))}return{from:l,options:r,span:s,filter:!t.some((function(e){return Boolean(e.textEdit)}))}}function I(e,t){var n=[],r=t;return e.iterChanges((function(e,t,o,i,a){var s=a.sliceString(0),c=t-e,u=c+o;n.push({range:{start:(0,v.s)(r,o),end:(0,v.s)(r,u)},rangeLength:c,text:s}),r=r.replace(o,u,a)})),n}function T(e){var t=e.lspClient,n=e.path;return h.tk.updateListener.of((function(e){var r;if(e.docChanged){var o=null===(r=t.getServerCapabilities())||void 0===r?void 0:r.textDocumentSync;if(o!==f.ex.None)if(o!==f.ex.Full)t.notify.didChange(n,I(e.changes,e.startState.doc));else{var i=e.view.state.doc.toString();t.notify.didChange(n,[{text:i}])}}}))}var _=l.Py.define();var A=l.Py.define();function R(e){var t=e.lspClient,n=e.path,o=e.setLspTooltipProps,i=e.setRenameInputParams,s=e.setHoverTooltipParams,u=(0,m.Z)(t),d=[T({lspClient:t,path:n}),O({lspClient:t,path:n})];return u.isAutoCompleteSupported&&d.push(function(e){var t=e.lspClient,n=e.path;return(0,p.ys)({defaultKeymap:!1,override:[function(){var e=(0,a.Z)(c().mark((function e(r){var o,i,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getServerCapabilities()){e.next=3;break}return e.abrupt("return",null);case 3:if(i=Z(r,o)){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,t.request.completion(n,(0,v.s)(r.state.doc,r.pos),i);case 8:if(!("error"in(a=e.sent))){e.next=11;break}throw new Error("Something went wrong fetching autocompletion results: ".concat(a.error.message));case 11:if(s=a.result,!r.aborted){e.next=14;break}return e.abrupt("return",null);case 14:if(s){e.next=16;break}return e.abrupt("return",null);case 16:return u=Array.isArray(s)?s:s.items,e.abrupt("return",D(r,u,t));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()]})}({lspClient:t,path:n})),u.isHoverSupported&&d.push(function(e){var t=e.lspClient,n=e.path,r=e.setHoverTooltipParams;return(0,g.bF)(function(){var e=(0,a.Z)(c().mark((function e(o,i){var a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,v.s)(o.state.doc,i),e.next=3,t.request.hover(n,a);case 3:if(!("error"in(s=e.sent))){e.next=7;break}throw r(null),new Error("Something went wrong fetching hover results: ".concat(s.error.message));case 7:if(null!==(u=s.result)){e.next=11;break}return r(null),e.abrupt("return",null);case 11:return e.abrupt("return",S({hover:u,offset:i,doc:o.state.doc,setHoverTooltipParams:r}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}({setHoverTooltipParams:s,lspClient:t,path:n})),(u.isFindDefinitionSupported||u.isFindReferencesSupported)&&d.push(function(e){var t=e.setLspTooltipProps,n=e.lspClient,o=e.path,i=l.Py.define(),s=l.Py.define();return[h.tk.updateListener.of(function(){var e=(0,a.Z)(c().mark((function e(t){var a,u,l,d,f,p,h,g,b,y,x,E,k,O,S,j,Z,C,P,D,I,T;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g=function(){t.view.dispatch({effects:s.of(null)})},a=null,u=w(t.transactions);try{for(u.s();!(l=u.n()).done;){d=l.value,f=w(d.effects);try{for(f.s();!(p=f.n()).done;)(h=p.value).is(_)&&(a=h.value)}catch(c){f.e(c)}finally{f.f()}}}catch(c){u.e(c)}finally{u.f()}if(a){e.next=6;break}return e.abrupt("return");case 6:if(b=(0,m.Z)(n),y=t.state.doc,x=(0,v.s)(y,a),!b.isFindReferencesSupported){e.next=15;break}return e.next=12,n.request.findReferences(o,x,{includeDeclaration:!1});case 12:e.t0=e.sent,e.next=16;break;case 15:e.t0={result:null};case 16:if(E=e.t0,!b.isFindDefinitionSupported){e.next=23;break}return e.next=20,n.request.findDefinitions(o,x);case 20:e.t1=e.sent,e.next=24;break;case 23:e.t1={result:null};case 24:if(k=e.t1,!("error"in E)){e.next=27;break}throw new Error("Something went wrong fetching references: ".concat(E.error.message));case 27:if(!("error"in k)){e.next=29;break}throw new Error("Something went wrong fetching definition: ".concat(k.error.message));case 29:if(O=E.result,S=k.result,j=O&&O.length>0,Z=S&&S.length>0,j||Z){e.next=36;break}return g(),e.abrupt("return");case 36:C=[],P=[],O&&O.length>0&&C.push.apply(C,(0,r.Z)(O)),S&&S.length>0&&P.push.apply(P,(0,r.Z)(S)),D=[].concat(C,P).map((function(e){return n.documentUriToPath(e.uri)})).filter((function(e){return e!==o})),I=(0,r.Z)(new Set(D)),T=y.toJSON().join("\n"),t.view.dispatch({effects:i.of({references:C,definitions:P,currentFile:o,currentFileContents:T,files:I})});case 44:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l.QQ.define({create:function(){return null},update:function(e,t){var n,r=e,o=w(t.effects);try{for(o.s();!(n=o.n()).done;){var a=n.value;a.is(i)&&(r=a.value),a.is(s)&&(r=null)}}catch(c){o.e(c)}finally{o.f()}return r},provide:function(e){return g.hJ.compute([e],(function(n){var r=n.field(e);if(!r)return t(null),null;var o=n.selection.asSingle().main;return{pos:o.from,end:o.to,create:function(e){var n=document.createElement("div");return n.classList.add("cm-lsp-tooltip"),n.classList.add("replit-tooltip"),n.style.padding="0",t(y(y({},r),{},{onClose:function(){e.dispatch({effects:s.of(null)})},dom:n})),{dom:n}}}}))}})]}({setLspTooltipProps:o,lspClient:t,path:n})),u.isRenameSupported&&d.push(function(e){return l.QQ.define({create:function(){return null},update:function(e,t){var n,r=e,o=w(t.effects);try{for(o.s();!(n=o.n()).done;){var i=n.value;i.is(A)&&(r=i.value)}}catch(a){o.e(a)}finally{o.f()}return r},provide:function(t){return g.hJ.compute([t],(function(n){var r=n.field(t);if(null===r)return e(null),null;var o=n.wordAt(r);return o?{pos:r,create:function(){var t=document.createElement("div");t.classList.add("cm-lsp-rename-tooltip"),t.classList.add("replit-tooltip"),t.style.padding="0";var i=n.sliceDoc(o.from,o.to);return e({position:r,variable:i,dom:t}),{dom:t}}}:null}))}})}(i)),d}v.R,v.s},365:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(79056),o=n(30266),i=n(809),a=n.n(i),s=n(67294),c=n(62126),u=n(90470),l=n(20881);var d=n(45631),f=n(97949),p=n(41678),h=n(83587),g=n(24243),v=n(10257),m=n(47421),b=n(78277);function y(){return(y=(0,o.Z)(a().mark((function e(t){var n,o,i,s,c,u,d,f,g,v,m,b,y,w,x,E,k,O,S;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.event,o=t.view,i=t.client,s=t.session,c=t.filePath,u=t.requestIdRef,(0,h.jh)(n)){e.next=3;break}return e.abrupt("return");case 3:if(o){e.next=5;break}throw new Error("Expected view");case 5:if(d=n.clientX,f=n.clientY,null!==(g=o.posAtCoords({x:d,y:f}))){e.next=9;break}return e.abrupt("return");case 9:if(i){e.next=11;break}throw new Error("Expected LSP Client");case 11:if(c){e.next=13;break}throw new Error("Expected filePath");case 13:if(v=(0,l.Z)(i),v.isFindDefinitionSupported){e.next=16;break}return e.abrupt("return");case 16:return u.current&&i.notify.cancelRequest(u.current),u.current=i.generateId(),m=(0,p.s)(o.state.doc,g),e.next=21,i.request.findDefinitions(c,m,u.current);case 21:if(b=e.sent,u.current=null,!("error"in b)){e.next=25;break}throw new Error("Something went wrong fetching definition location: ".concat(b.error.message));case 25:if(y=b.result,!b.cancelled&&y&&0!==y.length){e.next=28;break}return e.abrupt("return");case 28:w=(0,r.Z)(y,1),x=w[0],E=x.uri,k=x.range,O=k.start,S=i.documentUriToPath(E),s.updateDeeplink({path:S,line:O.line+1,col:O.character});case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){var t=e.view,n=e.filePath,i=e.isLoading,h=(0,d.Z)().preferences.codeIntelligence,w=(0,v.Z)().session,x=(0,u.Z)(n),E=function(e){var t=s.useState(null),n=(0,r.Z)(t,2),o=n[0],i=n[1];return s.useEffect((function(){if(e)return i((0,l.Z)(e)),e.onServerCapabilitiesChange((function(){i((0,l.Z)(e))}))}),[e]),o}(x),k=s.useState(null),O=(0,r.Z)(k,2),S=O[0],j=O[1],Z=s.useState(null),C=(0,r.Z)(Z,2),P=C[0],D=C[1],I=s.useState(null),T=(0,r.Z)(I,2),_=T[0],A=T[1],R=function(e){var t=e.view,n=e.filePath,r=e.renameInputParams,i=s.useRef(null),c=(0,v.Z)().fs,l=(0,u.Z)(n);return{onRename:s.useCallback(function(){var e=(0,o.Z)(a().mark((function e(o){var s,u,d,h,v,m,b,y,w,x;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v=function(e,n){var r=c.watchOtFile(e,{onReady:function(e){var o=e.writeOps;if(!t)throw new Error("Expected editor");n.forEach((function(e){var n=e.range,r=n.start,i=n.end,a=t.state.doc,s=(0,p.R)(a,r)||0,c=[s,{d:((0,p.R)(a,i)||a.length)-s},e.newText];o(c)})),r()}})},t){e.next=3;break}throw new Error("Expected view");case 3:if(l){e.next=5;break}throw new Error("Expected client");case 5:if(n){e.next=7;break}throw new Error("Expected non-null file path");case 7:if(r){e.next=9;break}throw new Error("Expected rename input params");case 9:return s=(0,p.s)(t.state.doc,r.position),i.current&&l.notify.cancelRequest(i.current),u=l.generateId(),i.current=u,e.next=15,l.request.rename(n,s,o,u);case 15:if(d=e.sent,i.current=null,!("error"in d)){e.next=19;break}throw new Error("Something went wrong renaming ".concat(d.error.message));case 19:if(!d.cancelled){e.next=21;break}return e.abrupt("return");case 21:if(h=d.result){e.next=24;break}return e.abrupt("return");case 24:if(m=h.documentChanges,b=h.changes,m&&m.forEach((function(e){if("textDocument"in e){var t=e.edits,n=e.textDocument,r=l.documentUriToPath(n.uri);v(r,t)}else switch(e.kind){case"create":var o=l.documentUriToPath(e.uri);c.writeFile(o,g.Z.from("")).then((function(e){if(e.error)throw new Error("Something went wrong writing to a file")}));break;case"delete":var i=l.documentUriToPath(e.uri);c.deleteFile(i).then((function(e){if(e.error)throw new Error("Something went wrong deleting the file")}));break;case"rename":var a=l.documentUriToPath(e.oldUri),s=l.documentUriToPath(e.newUri);c.moveFile(a,s).then((function(e){if(e.error)throw new Error("Something went wrong moving the file")}))}})),b)for(y in b)w=l.documentUriToPath(y),x=b[y],v(w,x);t.dispatch({effects:[f.nD.of(null)]});case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,t,n,c,r]),closeRenameInput:function(){if(!t)throw new Error("Expected view");t.dispatch({effects:[f.nD.of(null)]})}}}({view:t,filePath:n,renameInputParams:_}),N=R.onRename,U=R.closeRenameInput,L=(0,b.Z)({view:t});return s.useEffect((function(){if(!i&&h&&t&&x&&E&&x.isSupportedFile(n)){x.notify.didOpen(n,t.state.doc.toString());var e=E.isFindDefinitionSupported,r={current:null};return t.dispatch({effects:L.reconfigure([(0,f.G_)({lspClient:x,path:n,setLspTooltipProps:j,setRenameInputParams:A,setHoverTooltipParams:D}),e?m.tk.domEventHandlers({click:function(e){return function(e){y.apply(this,arguments)}({event:e,view:t,filePath:n,client:x,session:w,requestIdRef:r}),!1}}):[]])}),function(){x.getServerState()===c.aL.INITIALIZED&&x.notify.didClose(n),t.dispatch({effects:L.reconfigure([])})}}}),[x,t,E,L,n,i,w,h,j,A,D]),{lspTooltipProps:S,hoverTooltipParams:P,renameInputParams:_,closeRenameInput:U,onRename:N}}},33272:function(e,t,n){n.d(t,{Z:function(){return X}});var r=n(47421),o=n(30266),i=n(809),a=n.n(i),s=n(67294),c=n(78120),u=n(56023),l=n(25400);function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=[];return e.iterChanges((function(e,n,r,o,i){var a=[];r>0&&a.push(r),e<n&&a.push({d:n-e}),i.length&&a.push(i.sliceString(0)),t=(0,l.qC)(t,a)})),t}function h(e){var t,n=[],r=0,o=!0,i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if("string"===typeof a){if(o)n.push({from:r,insert:a});else{var s=n[n.length-1];s.insert=s.insert?s.insert+a:a}o=!1}else if("number"===typeof a)r+=a,o=!0;else if("object"===typeof a&&"number"===typeof a.d){if(o)n.push({from:r,to:r+a.d});else{var c=n[n.length-1];c.insert&&!c.to?c.to=r+a.d:c.to&&(c.to+=a.d)}r+=a.d,o=!1}}}catch(u){i.e(u)}finally{i.f()}return n}function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=c.q6.define();function b(e){return r.tk.updateListener.of((function(t){if(t.docChanged){var n,r=[],o=g(t.transactions);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(!i.annotation(c.YW.remote)&&!i.annotation(m)){var a=p(i.changes);r=(0,l.qC)(r,a)}}}catch(s){o.e(s)}finally{o.f()}r.length&&e(r)}}))}var y=c.QQ.define({create:function(){return 0},update:function(e,t){var n=t.annotation(m);return n?n.version:e}}),w=n(7785),x=n(78277),E=n(51595);function k(e){var t=e.view,n=e.fs,r=e.filePath,i=(0,s.useState)(!0),l=i[0],d=i[1],f=(0,w.Z)(),p=(0,x.Z)({view:t}),g=(0,s.useRef)(new Set);function v(e){if(!g.current.has(r)&&t){var n=E.kg.timeStart(),o=t.state.doc.toString(),i=e===o;n("time to compare ot and cm",{contentLength:Math.floor(e.length/1e3)}),i||(g.current.add(r),E.kg.error("Mismatch between otClient and codemirror",{otcrlf:e.indexOf("\r")>-1,ot:e,cm:o,path:r}))}}var k=(0,s.useRef)("");return(0,s.useEffect)((function(){if(t&&n&&r)return n.watchOtFile(r,{onChange:function(){var e=(0,o.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.latestContent,k.current=n;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),[t,r,n]),(0,s.useEffect)((function(){if(t){var e=n.watchOtFile(r,{onReady:function(e){var n=e.initialContent,r=e.writeOps,o=e.version;t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n.toString()},annotations:[c.YW.addToHistory.of(!1),c.YW.remote.of(!0)]}),t.dispatch({effects:p.reconfigure([y.init((function(){return o})),b((function(e){r(e),v(k.current)}))])}),d(!1)},onChange:function(e){var n=e.ops,r=e.changeSource,o=e.version,i=e.latestContent;t.dispatch(function(e){var t=e.ops,n=e.version,r=e.changeSource;return{changes:h(t),annotations:[c.YW.remote.of(r===u.Fl.Container),c.YW.addToHistory.of(r===u.Fl.Local),m.of({ops:t,version:n,changeSource:r})]}}({ops:n,changeSource:r,version:o})),v(i)},onError:function(){t.dispatch({effects:p.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:p.reconfigure([])})}});return function(){e(),t.dispatch({effects:[p.reconfigure([])]}),f.current&&d(!0)}}}),[t,r,n,f,p]),{isLoading:l}}var O=n(92809),S=n(50025),j=n(79056),Z=n(73599),C=n(4466);function P(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _={"#1BC47D":"rgba(27, 196, 125, 0.2)","#EF5533":"rgba(239, 85, 51, 0.2)","#18A0FB":"rgba(24, 160, 251, 0.2)","#FFC700":"rgba(255, 199, 0, 1)","#907CFF":"rgba(144, 124, 255, 0.2)","#00B5CE":"rgba(0, 181, 206, 0.2)","#EE46D3":"rgba(238, 70, 211, 0.2)"};var A=c.Py.define(),R=c.Py.define(),N=c.Py.define();function U(e){return{pos:e.position,strictSide:!0,above:!0,create:function(t){var n=document.createElement("div");n.textContent=e.username,n.style.backgroundColor=e.color.cursor,n.style.color="white",n.classList.add("multiplayer-label");var r=document.createElement("div");r.style.backgroundColor=e.color.cursor,r.classList.add("multiplayer-cursor");var o=document.createElement("div");return o.classList.add("multiplayer-tooltip"),o.appendChild(r),o.appendChild(n),{dom:o,overlap:!0,positioned:function(){r.style.height=t.defaultLineHeight+"px"}}}}}var L=c.QQ.define({create:function(){return{}},update:function(e,t){if(!t.changes.empty){for(var n={},r=0,o=Object.values(e);r<o.length;r++){var i=o[r];n[i.id]=T(T({},i),{},{position:t.changes.mapPos(i.position),selectionStart:t.changes.mapPos(i.selectionStart),selectionEnd:t.changes.mapPos(i.selectionEnd)})}e=n}var a,s=P(t.effects);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(c.is(C.R)&&(e=T({},e)),c.is(A)&&c.value.position<=t.newDoc.length&&((e=T({},e))[c.value.id]=c.value),c.is(R)&&(e=T({},e),c.is(R)&&delete e[c.value]),c.is(N)){e=T({},e);for(var u=0,l=Object.entries(e);u<l.length;u++){var d=(0,j.Z)(l[u],2),f=d[0];d[1].username===c.value&&delete e[f]}}}}catch(p){s.e(p)}finally{s.f()}return e},provide:function(e){return[Z.hJ.computeN([e],(function(t){return Object.values(t.field(e)).map(U)})),r.tk.decorations.computeN([e],(function(t){var n=t.field(e);return Object.values(n).map((function(e){var t=e.selectionStart<e.selectionEnd?e.selectionStart:e.selectionEnd,n=e.selectionStart>e.selectionEnd?e.selectionStart:e.selectionEnd;return t===n?null:r.p.set(r.p.mark({attributes:{style:"background-color: ".concat(e.color.selection,"; display: inline-block;")},cursor:e}).range(t,n))})).filter((function(e){return null!==e}))}))]}});function F(e){return r.tk.updateListener.of((function(t){var n=t.state.selection;n!==t.startState.selection&&e(n.ranges.map((function(e){var n=t.state.doc.lineAt(e.head);return{position:e.head,line:n.number,column:e.head-n.from+1,selectionStart:e.from,selectionEnd:e.to}})),n.mainIndex)}))}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e){var t=e.view,n=e.presence,r=e.session,o=e.fs,i=e.filePath,a=(0,s.useState)(!0),c=a[0],u=a[1],l=(0,S.Z)({presence:n}),d=(0,s.useRef)({}),f=(0,w.Z)();(0,s.useEffect)((function(){var e=l.reduce((function(e,t){return t.username&&t.color?M(M({},e),{},(0,O.Z)({},t.username,t.color)):e}),{});d.current=e}),[l]);var p=(0,x.Z)({view:t});return(0,s.useEffect)((function(){if(t){var e=n.onUserLeave((function(e){t.dispatch({effects:N.of(e.username)})})),a=o.watchOtFile(i,{onReady:function(e){var n=e.updateSelections;t.dispatch({effects:p.reconfigure([L,F((function(e,t){n(e);var o=e[t];o&&r.setCursorPosition({column:o.column,lineNumber:o.line,offset:o.position})}))])}),u(!1)},onCursor:function(e){var n=function(e){var t,n=e.cursor,r=e.usernameColorsMap,o=null===(t=n.user)||void 0===t?void 0:t.name;if(o){var i,a=n.id,s=n.position,c=n.selectionStart,u=n.selectionEnd,l=r[o];if(l&&a&&"number"===typeof s&&"number"===typeof c&&"number"===typeof u)return A.of({id:a,username:o,position:s,color:{cursor:l,selection:(i=l,_[i]||"")},selectionStart:c,selectionEnd:u})}}({cursor:e,usernameColorsMap:d.current});n&&t.dispatch({effects:n})},onRemoveCursor:function(e){t.dispatch({effects:R.of(e)})},onError:function(){t.dispatch({effects:p.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:p.reconfigure([])})}});return function(){e(),a(),t.dispatch({effects:p.reconfigure([])}),f.current&&u(!0)}}}),[t,i,o,n,r,p]),{isLoading:c}}var z=n(68563),G=n(10257);function V(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e){var t=e.view,n=e.presence,o=e.session,i=e.fs,a=e.filePath,u=k({view:t,fs:i,filePath:a}).isLoading,l=H({view:t,fs:i,filePath:a,presence:n,session:o}).isLoading;!function(e){var t=e.view,n=(0,G.Z)().presence,o=(0,z.Z)(),i=(0,x.Z)({view:t});s.useEffect((function(){if(o&&t){var e=function(){n.getFollowedUser()&&n.unfollowUser()};return t.dispatch({effects:i.reconfigure(r.tk.domEventHandlers({wheel:e,keydown:e,click:e}))}),function(){t.dispatch({effects:i.reconfigure([])})}}}),[o,t,n,i]);var a=(0,x.Z)({view:t});s.useEffect((function(){if(t&&o){var e=t.state.field(L,!1);if(e){var n=Object.values(e).find((function(e){return e.username===o.username}));n&&i(n.position)}return t.dispatch({effects:a.reconfigure(r.tk.updateListener.of((function(e){var t,n,r=V(e.transactions);try{for(r.s();!(n=r.n()).done;){var a,s=V(n.value.effects);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.is(A)&&c.value.username===o.username&&(t=c.value)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){r.e(u)}finally{r.f()}t&&i(t.position)})))}),function(){t.dispatch({effects:a.reconfigure([])})}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(t){var n=c.jT.cursor(e);t.dispatch({effects:[r.tk.scrollIntoView(n,{x:"center",y:"center"})]})}}}),[t,o,a])}({view:t});var d=u||l,f=(0,x.Z)({view:t});return(0,s.useEffect)((function(){t&&t.dispatch({effects:f.reconfigure([r.tk.editable.of(!d),c.yy.readOnly.of(d)])})}),[t,d,f]),{isLoading:d}}},41678:function(e,t,n){function r(e,t){if(t.line>=e.lines)return null;var n=e.line(t.line+1).from+t.character;return n>e.length?null:n}function o(e,t){var n=e.lineAt(t);return{line:n.number-1,character:t-n.from}}n.d(t,{R:function(){return r},s:function(){return o}})},75276:function(e,t,n){var r=n(67294).createContext(null);t.Z=r},16729:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(79056),o=n(65988),i=n(67294),a=n(88834),s=n(53567),c=n(92809),u=n(97131),l=n(45187),d=n(80723),f=n(68724),p=n(94184),h=n.n(p),g=n(16264),v=n(35944);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){var t=e.onTeamSelected,n=e.teamContext,r=(0,l.Dar)(),a=r.data,s=r.loading,c=r.error,p=[];a&&a.currentUser&&(p=[{id:a.currentUser.id,username:a.currentUser.username,image:a.currentUser.image}].concat((0,u.Z)(a.currentUser.teams.filter((function(e){return!e.archived})).filter((function(e){return!e.hideTeamRepls})).map((function(e){var t=e.id,n=e.image,r=e.username,o=e.subscription;return{id:t,image:n,username:r,isSubscribed:Boolean(o)}})))));var m=(0,d.L7)({items:p,onSelectedItemChange:function(e){var n;e.selectedItem&&e.selectedItem.id!==(null===a||void 0===a||null===(n=a.currentUser)||void 0===n?void 0:n.id)?t({id:e.selectedItem.id,hasPrivateRepls:Boolean(e.selectedItem.isSubscribed)}):t(null)}}),y=m.isOpen,w=m.selectedItem,x=m.getToggleButtonProps,E=m.getMenuProps,k=m.highlightedIndex,O=m.getItemProps,S=m.getLabelProps,j=m.selectItem;return(0,i.useEffect)((function(){if(null!==a&&void 0!==a&&a.currentUser){var e=p.find((function(e){return e.username===n}));j(e||p[0])}}),[null===a||void 0===a?void 0:a.currentUser]),p&&1!==p.length?c?(0,v.BX)("div",{children:["error loading team data $",c]}):s||!w?null:(0,v.BX)("div",{className:"jsx-2768752074 select-team",children:[(0,v.tZ)("label",b(b({},S()),{},{className:"jsx-2768752074",children:"Select repl owner"})),(0,v.BX)("div",b(b({tabIndex:-1},x()),{},{className:"jsx-2768752074 "+(h()("toggle-button",{open:y})||""),children:[(0,v.BX)("div",{className:"jsx-2768752074 user-item",children:[(0,v.tZ)("div",{className:"jsx-2768752074 icon",children:(0,v.tZ)(f.Z,{url:w.image,size:"inherit"})}),(0,v.tZ)("div",{className:"jsx-2768752074 username",children:w.username})]}),(0,v.tZ)("div",{className:"jsx-2768752074 arrow-icon-wrap",children:(0,v.tZ)(g.e0,{color:"var(--foreground-default)",flipped:y})})]})),(0,v.tZ)("div",b(b({},E()),{},{className:"jsx-2768752074",children:y&&(0,v.tZ)("ul",{className:"jsx-2768752074 menu",children:p.map((function(e,t){return(0,v.BX)("li",b(b({},O({item:e,index:t})),{},{className:"jsx-2768752074 "+(h()("user-item",{focused:t===k,selected:e.id===w.id})||""),children:[(0,v.tZ)("div",{className:"jsx-2768752074 icon",children:(0,v.tZ)(f.Z,{url:e.image,size:"inherit"})}),(0,v.tZ)("div",{className:"jsx-2768752074 username",children:e.username})]}),"".concat(e.id))}))})})),(0,v.tZ)(o.default,{id:"2768752074",children:[".select-team.jsx-2768752074{background:var(--background-default);color:var(--foreground-default);width:100%;position:relative;margin-top:var(--space-16);z-index:5;}","label.jsx-2768752074{color:var(--foreground-dimmer);margin-bottom:var(--space-8);display:block;}",".toggle-button.jsx-2768752074{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;cursor:pointer;border:1px solid var(--background-higher);border-radius:var(--border-radius-4);}",".toggle-button.jsx-2768752074:focused{border:1px solid var(--accent-primary-default);}",".toggle-button.open.jsx-2768752074{border:1px solid var(--accent-primary-default);border-bottom:1px solid transparent;border-bottom-right-radius:0;border-bottom-left-radius:0;}",".arrow-icon-wrap.jsx-2768752074{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 10px;width:30px;}",".arrow-icon-wrap.jsx-2768752074>svg{display:block;width:100%;height:auto;}",".menu.jsx-2768752074{max-height:200px;overflow-y:auto;width:100%;margin:0;border:1px solid var(--accent-primary-default);border-top:0;outline:0;position:absolute;z-index:1;padding:var(--space-4);background:var(--background-default);border-bottom-right-radius:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);}",".user-item.jsx-2768752074{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:40px;width:100%;cursor:pointer;background:var(--background-default);padding-left:var(--space-8);font-size:var(--font-size-subhead-default);border-radius:var(--border-radius-4);}",".user-item.focused.jsx-2768752074{background:var(--background-highest);color:var(--foreground-default);}",".user-item.selected.jsx-2768752074{background:var(--accent-primary-default);color:var(--white);}",".user-item.jsx-2768752074>.icon.jsx-2768752074{width:24px;min-width:24px;height:24px;min-height:24px;}",".user-item.jsx-2768752074>.username.jsx-2768752074{margin-left:var(--space-16);}"]})]}):null},w=n(50133);function x(e){var t=e.onFork,n=e.hideModal,c=e.initialValue,u=e.teamContext,l=i.useState(null),d=(0,r.Z)(l,2),f=d[0],p=d[1],h=(0,w.Y)(c,(function(e){if(e)return e.length>60?{message:"Must be no longer than 60 characters"}:/[0-9a-zA-Z]/.test(e)?void 0:{message:"Title must contain at least one alphanumeric character"}}));return i.useEffect((function(){h.ref.current&&h.ref.current.focus()}),[h.ref]),(0,v.BX)("form",{onSubmit:function(e){e.preventDefault(),h.error||(t(f,h.value),n())},className:"jsx-4175201198",children:[(0,v.BX)("div",{className:"jsx-4175201198 wrap",children:[(0,v.tZ)("div",{className:"jsx-4175201198 title",children:"Fork Repl"}),(0,v.BX)("div",{className:"jsx-4175201198",children:[(0,v.tZ)("input",{ref:h.ref,placeholder:"Name your repl",onChange:function(e){return h.setValue(e.target.value)},onFocus:function(e){return e.target.select()},value:h.value,onBlur:h.handleBlur,className:"jsx-4175201198 repl-title-input"}),h.error&&(0,v.tZ)("div",{className:"jsx-4175201198 form-error",children:h.error.message})]}),(0,v.tZ)(y,{teamContext:u,onTeamSelected:function(e){p(e?e.id:null)}}),(0,v.BX)(s.Ug,{spacing:1,justify:"end",children:[(0,v.tZ)(a.Z,{onClick:n,autoFocus:!0,children:"Cancel"}),(0,v.tZ)(a.Z,{color:"primary",type:"submit",disabled:!h.value||Boolean(h.error),children:"Confirm"})]})]}),(0,v.tZ)(o.default,{id:"4175201198",children:[".wrap.jsx-4175201198{background-color:var(--background-default);border-radius:var(--border-radius-4);color:var(--foreground-default);}",".repl-title-input.jsx-4175201198{-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:var(--font-size-subhead-default);display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;width:100%;outline:0 none;background-color:transparent;border:1px solid var(--background-highest);margin:0;color:inherit;padding:var(--space-8);border-radius:var(--border-radius-4);-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}",".form-error.jsx-4175201198{padding-top:7px;color:var(--accent-negative-default);}",".wrap.jsx-4175201198{display:grid;grid-row-gap:25px;}",".title.jsx-4175201198{font-size:var(--font-size-subhead-big);}","@media screen and (min-width:600px){.wrap.jsx-4175201198{padding:75px 50px 75px;}}"]})]})}},85822:function(e,t,n){n.d(t,{t:function(){return u}});var r,o=n(52209),i=n(51889),a=n(44119),s=n.n(a),c=n(57407),u=(s()(r||(r=(0,o.Z)(["\n  mutation deleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]))),function(e){var t=(0,c.Z)({id:e.id,__typename:e.__typename||"Repl"}),n=function(e,n){return n.node.id===t};return(0,i._M)((function(){return[["data",i.Dx,"recentRepls",n],["data",t]]}))})},16482:function(e,t,n){n.d(t,{H:function(){return r},E:function(){return N}});var r,o=n(92809),i=n(30266),a=n(79056),s=n(809),c=n.n(s),u=n(39084),l=n(223),d=n(49512),f=n(82457),p=n(67294),h=n(61850),g=n(38934),v=n(32523),m=n(28955),b=n(83587),y=n(2876),w=n(45187),x=n(91682),E=n(35944);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.Video="Video",e.Editor="Editor",e.Examples="Examples",e.Run="Run",e.Output="Output",e.Sidepane="Sidepane",e.Share="Share"}(r||(r={}));var S="workspace-desktop-tour",j=[{id:r.Video,title:"Get started with the Workspace",content:A,isModal:!0},{id:r.Editor,title:"Code Editor",content:"This is where you write code. Code describes how programs work. The editor helps you write code, by coloring certain types, and giving you suggestions when you type. Click on one of the examples to see how code looks."},{id:r.Examples,title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:r.Run,title:"Running Code",content:'This button takes your code and executes, or "runs", it. You can also run your code using the '.concat(b.V5?"Cmd":"Ctrl","+Return shortcut.")},{id:r.Output,title:"Program Output",content:"This is where the results of the code appear when you run it. Results can be console output (just text), a website, game, or graphics display, depending on the programming language and setup."},{id:r.Sidepane,title:"Filetree & Sidepanes",content:"Here are all the files in this project. There's usually a starter file, but you can make more files and folders as your project grows. The sidepane also contains different features for working on your program."},{id:r.Share,title:"Invite & Collaborate",content:"Invite others to your repl to collaborate and work together at the same time."}],Z=j.filter((function(e){return e.id!==r.Video})),C={id:S,steps:j},P={id:S,steps:Z};function D(){var e=(0,v.X)(),t=e&&!e.isDone&&!e.isLoading;return(0,p.useEffect)((function(){if(t){var e=window.store,n=function(t){var n=e.getState().plugins,r=Object.entries(n).find((function(e){var n=(0,a.Z)(e,2);n[0];return n[1].type===t}));return r?r[0]:null},r=setInterval((function(){!function(){var t=e.getState(),r=t.layout,o=t.plugins,i=m.PP(r,o,"terminal2");if(i){var a=m.Il(m.Il(i)),s=m.QK(r,a);if("tabs"===s.type){var c=n("terminal2"),u=s.tabs.findIndex((function(e){return"pane"===e.type&&e.pud===c}));s.active!==u&&e.dispatch({type:"SET_ACTIVE_TAB",path:a,tabIndex:u})}}}(),function(){var t=e.getState(),r=t.layout,o=t.plugins;if(!m.PP(r,o,"filetree")){var i=n("filetree");e.dispatch({type:"OPEN_SIDE_NAV_ITEM",navItem:{pud:i}})}}()}),200);return function(){clearInterval(r)}}}),[t]),null}if(!j.find((function(e){return e.id===r.Video})))throw new Error("Expected video step");var I=!1;var T="ws-tour-youtube-video",_={name:"1pvalt1",styles:"width:560px;height:340px"};function A(){return(0,p.useEffect)((function(){var e=null,t=!1;function n(){return r.apply(this,arguments)}function r(){return(r=(0,i.Z)(c().mark((function n(){var r;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,new Promise((function(t){e=new window.YT.Player(T,{height:"360",width:"640",videoId:"TK_pvR672o0",playerVars:{origin:window.location.origin},events:{onReady:function(){return setTimeout(t,100)}}})}));case 4:if(!t){n.next=7;break}return null===(r=e)||void 0===r||r.destroy(),n.abrupt("return");case 7:if(e){n.next=9;break}throw new Error("expected player");case 9:e.cueVideoById({videoId:"TK_pvR672o0"});case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return I||(I=!0,(0,x.iM)("https://www.youtube.com/player_api")),window.YT?n():window.onYouTubePlayerAPIReady=n,function(){var n,r,o;t=!0,window.onYouTubePlayerAPIReady=null;var i=null===(n=e)||void 0===n?void 0:n.getCurrentTime(),a=null===(r=e)||void 0===r?void 0:r.getDuration();(0,g.identify)({id:window.analytics.user().id(),workspaceTourVideoWatchPercentage:a&&i?Math.floor(i/a*100):0}),null===(o=e)||void 0===o||o.destroy()}}),[]),(0,E.BX)(d.Z,{children:[(0,E.tZ)(l.x,{variant:"subheadDefault",css:f.l0.mb(8),children:"Watch this 1 minute video to learn how to build on Replit"}),(0,E.tZ)("div",{id:T,css:_})]})}function R(){var e=(0,w.PpL)({variables:{tours:S}}),t=e.data,n=e.loading,o=(0,w.oep)({variables:{name:S},optimisticResponse:{markTourAsSeen:{__typename:"TourSeen",id:S,seen:!0}}}),i=(0,a.Z)(o,1)[0],s=Boolean(!n&&t&&t.currentUser&&!t.currentUser.toursSeen[0].seen);return(0,E.tZ)(y.Z,{centered:!0,maxWidth:"fit-content",isOpen:s,onRequestClose:function(){i(),(0,g.identify)({id:window.analytics.user().id(),workspaceTourStatus:r.Video.toLowerCase()})},children:(0,E.tZ)(A,{})})}function N(e){var t=e.children,n=(0,h.Q)("flag-workspace-tour-multivariate");if("videoOnly"===n)return(0,E.BX)(E.HY,{children:[(0,E.tZ)(R,{}),t]});function r(e){(0,g.identify)({id:window.analytics.user().id(),workspaceTourStatus:e===j[j.length-1].id?"completed":e.toLowerCase()})}var o={tour:"full"===n?C:P,onStep:r,onDone:r};return n&&"off"!==n||(o.isDoneInitialOverride=!0),(0,E.BX)(u.rk,O(O({},o),{},{children:[(0,E.tZ)(D,{}),t]}))}},18177:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(70917),o=n(94573),i=n(223),a=n(82457),s=n(49512),c=n(70565),u=n(17513),l=n(95211),d=n(92809),f=(n(67294),n(96622)),p=n(35944);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){return(0,p.tZ)(f.Z,g(g({},e),{},{children:(0,p.tZ)("path",{d:"M15 18L9 12L15 6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}var m=n(82490);function b(e){var t=e.title,n=e.content,d=e.colorway,f=void 0===d?"primary":d,h=e.totalSteps,g=void 0===h?1:h,b=e.currentStepIndex,w=void 0===b?0:b,x=e.onDismiss,E=e.onCurrentStepChange;return(0,p.BX)(s.Z,{css:[a.l0.p(8),{paddingBottom:12,paddingRight:t?void 0:32,backgroundColor:o.Br[f].dimmest,border:"1px solid "+o.Br[f].dimmer,position:"relative"},a.l0.borderRadius(8),a.l0.shadow(2),a.l0.colWithGap(8),"",""],children:[(0,p.tZ)(c.Z,{alt:"Close",colorway:f,css:(0,r.iv)({position:"absolute",top:a.TV.space8,right:a.TV.space8},"",""),onClick:x,children:(0,p.tZ)(l.Z,{})}),t&&(0,p.tZ)(i.x,{variant:"subheadBig",children:t}),"function"===typeof n?(0,p.tZ)(n,{}):(0,p.tZ)(i.x,{multiline:!0,children:n}),g>1&&E&&(0,p.BX)(s.Z,{css:[a.l0.flex.row,a.l0.align.center,a.l0.justify.spaceBetween,"",""],children:[(0,p.tZ)(u.ZP,{css:(0,r.iv)({visibility:w<=0?"hidden":void 0},"",""),colorway:f,text:"Back",iconLeft:(0,p.tZ)(v,{}),onClick:function(){return E(w-1)}}),(0,p.tZ)(y,{colorway:f,total:g,current:w}),(0,p.tZ)(u.ZP,{colorway:f,text:w>=g-1?"Done":"Next",iconLeft:(0,p.tZ)(m.Z,{}),onClick:function(){return w>=g-1?x():E(w+1)}})]})]})}function y(e){var t=e.total,n=e.current,r=e.colorway;return(0,p.tZ)(s.Z,{css:a.l0.rowWithGap(8),children:new Array(t).fill(0).map((function(e,t){return(0,p.tZ)(s.Z,{css:[a.l0.borderRadius("full"),{width:a.TV.space8,height:a.TV.space8,backgroundColor:t===n?o.Br[r].stronger:o.Br[r].dimmer},""]},t)}))})}},53291:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(79056),o=n(67294),i=n(10257),a=n(95610);function s(){var e,t,n=(0,i.Z)().container,s=o.useState(null!==(e=null===(t=n.getContext())||void 0===t?void 0:t.repl)&&void 0!==e?e:null),c=(0,r.Z)(s,2),u=c[0],l=c[1];return o.useEffect((function(){return n.onConnectionStateChanged((function(e){var t,r;e===a.e.CONNECTED&&l(null!==(t=null===(r=n.getContext())||void 0===r?void 0:r.repl)&&void 0!==t?t:null)}))}),[l,n]),u}},8283:function(e,t,n){n.d(t,{Z:function(){return Re}});var r,o=n(30266),i=n(809),a=n.n(i),s=n(95610),c=n(25872);!function(e){e.USER_JOIN="USER_JOIN",e.USER_LEAVE="USER_LEAVE",e.USERS_UPDATE="USERS_UPDATE",e.USER_OPENED_FILE="USER_OPENED_FILE",e.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",e.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED"}(r||(r={}));var u=n(97131),l=n(50055),d=n(14256);function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=Object.values(d.Z.multiplayer);function g(e){var t={};return h.forEach((function(e){t[e]=0})),e.forEach((function(e){t[e.color]++})),Object.keys(t).sort((function(e,n){return t[e]-t[n]}))[0]}function v(e){var t,n=f(e.sessions.sort((function(e,t){return e.timestamp-t.timestamp})));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.activeFile)return r.activeFile}}catch(o){n.e(o)}finally{n.f()}return null}function m(e,t){var n=t.find((function(t){return t.sessions.some((function(t){return t.id===e}))}));if(!n)throw new Error("Expected user with session ID ".concat(e));return n}function b(e){var t=e.seconds,n=e.nanos;return Number(t||0)+(n||0)/1e9}var y=n(38934);var w=n(40354),x=n(84647),E=n(62991),k=n.n(E);function O(e){var t=e.container,n=(0,w.Z)();n.setMaxListeners(1/0);var i=[],s=null,c=[],d={},f=null,p=window.performance.now();function h(){return E.apply(this,arguments)}function E(){return(E=(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return",f);case 2:return e.abrupt("return",new Promise((function(e){n.once(r.USERS_UPDATE,(function(){if(!f)throw new Error("Expected presenceChannel to be set");e(f)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){k()(s,e)||(s=e,n.emit(r.FOLLOWED_USER_CHANGED,e))}function S(){return(S=(0,o.Z)(a().mark((function e(t){var n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(n=s)||void 0===n?void 0:n.username)!==t){e.next=2;break}throw new Error("Already following user with username ".concat(t));case 2:if(!s){e.next=5;break}return e.next=5,j();case 5:return e.next=7,h();case 7:if(r=e.sent,o=i.find((function(e){return e.username===t}))){e.next=11;break}return e.abrupt("return");case 11:O(o),o.sessions.forEach((function(e){r.send({followUser:{session:e.id}})})),p=window.performance.now(),(0,y.track)(y.events.LOCAL_USER_CURSOR_FOLLOWED);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return Z.apply(this,arguments)}function Z(){return(Z=(0,o.Z)(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}throw new Error("No user to unfollow");case 2:return t=s,O(null),e.next=6,h();case 6:n=e.sent,t.sessions.forEach((function(e){n.send({unfollowUser:{session:e.id}})})),r=window.performance.now()-p,(0,y.track)(y.events.LOCAL_USER_CURSOR_UNFOLLOWED,{sessionLength:r});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t.openChannel({service:"presence",name:"presencer"},(function(e){var t=e.channel;if(!e.error){if(!t)throw new Error("Expected channel");return t.onCommand((function(e){var t={cmd:e,emitter:n,activeUsers:i,userIdToFile:d,followedUser:s,setFollowedUser:O,followingUsers:c};switch(e.body){case"roster":!function(e){var t=e.cmd,n=e.emitter,o=e.activeUsers,i=e.userIdToFile,a=e.followedUser,s=e.followingUsers,c=e.setFollowedUser,l=t.roster;if(l){var d=l.user,f=l.files;if(d&&f){var p=new Set;if(o.splice(0,o.length),d.forEach((function(e){if(e.id&&e.name&&e.roles&&!p.has(e.id)){var t=f.filter((function(t){return t.userId===e.id})).map((function(e){if(!e.session||!e.timestamp)throw new Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:b(e.timestamp)}}));o.push({id:e.id,username:e.name,roles:e.roles,color:g(o),sessions:t}),p.add(e.id)}})),o.forEach((function(e){i[e.id]=v(e)})),n.emit(r.USERS_UPDATE,(0,u.Z)(o)),o.length>1&&(0,y.track)(y.events.MP2_USER_JOINED,{count:o.length}),s.filter((function(e){return!o.some((function(t){return t.id===e.id}))})).forEach((function(e){var t=s.indexOf(e);-1!==t&&(s.splice(t,1),n.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,u.Z)(s),user:e,type:"unfollow"}))})),a)if(o.some((function(e){return e.id===a.id}))){var h=i[a.id];n.emit(r.USER_OPENED_FILE,{user:a,file:h})}else c(null)}}}(t);break;case"join":!function(e){var t=e.cmd,n=e.emitter,o=e.activeUsers,i=e.userIdToFile,a=t.join;if(a.id&&a.name&&a.roles&&a.session){var s=o.find((function(e){return e.id===a.id})),c=Math.floor(Date.now()/1e3),d=b(l.google.protobuf.Timestamp.create({seconds:c}));if(s)s.sessions.push({id:a.session,activeFile:null,timestamp:d});else{var f={id:a.id,username:a.name,roles:a.roles,color:g(o),sessions:[{id:a.session,activeFile:null,timestamp:d}]};i[a.id]=null,o.push(f),n.emit(r.USER_JOIN,f),n.emit(r.USERS_UPDATE,(0,u.Z)(o)),(0,y.track)(y.events.MP2_USER_JOINED,{count:o.length})}}}(t);break;case"part":!function(e){var t=e.cmd,n=e.emitter,o=e.activeUsers,i=e.userIdToFile,a=e.followedUser,s=e.followingUsers,c=e.setFollowedUser;if(t.part&&t.part.id&&t.part.session){var l=t.part,d=l.id,f=l.session,p=o.findIndex((function(e){return e.id===d})),h=o[p];if(1===h.sessions.length){o.splice(p,1),delete i[h.id],n.emit(r.USER_LEAVE,h),n.emit(r.USERS_UPDATE,(0,u.Z)(o)),a&&c(null);var g=s.findIndex((function(e){return e.id===h.id}));-1!==g&&(s.splice(g,1),n.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,u.Z)(s),user:h,type:"unfollow"}))}else{h.sessions=h.sessions.filter((function(e){return e.id!==f}));var m=v(h);i[h.id]!==m&&(i[h.id]=m,n.emit(r.USER_OPENED_FILE,{user:h,file:m}))}}}(t);break;case"fileOpened":!function(e){var t=e.emitter,n=e.cmd,o=e.activeUsers,i=e.userIdToFile;if(n.fileOpened){var a=n.fileOpened,s=a.userId,c=a.file,u=a.timestamp,l=a.session,d=c||null;if(!s||!u)throw new Error("Expected userId and timestamp associated with file opened command");var f=o.find((function(e){return e.id===s}));if(!f)throw new Error("Expected user with ID ".concat(s));var p=f.sessions.find((function(e){return e.id===l}));if(!p)throw new Error("Expected session with ID ".concat(p));p.activeFile=d,p.timestamp=b(u),i[s]=d,t.emit(r.USER_OPENED_FILE,{user:f,file:d})}}(t);break;case"followUser":!function(e){var t=e.cmd,n=e.emitter,o=e.activeUsers,i=e.followingUsers,a=t.followUser;if(!a.session)throw new Error("Expected session associated with follow user");var s=m(a.session,o);i.some((function(e){return e.id===s.id}))||(i.push(s),n.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,u.Z)(i),user:s,type:"follow"}))}(t);break;case"unfollowUser":!function(e){var t=e.cmd,n=e.emitter,o=e.activeUsers,i=e.followingUsers,a=t.unfollowUser;if(!a.session)throw new Error("Expected session associated with follow user");var s=m(a.session,o),c=i.findIndex((function(e){return e.id===s.id}));-1!==c&&(i.splice(c,1),n.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,u.Z)(i),user:s,type:"unfollow"}))}(t);break;case"sessionTimestampUpdated":!function(e){var t=e.cmd,n=e.emitter,o=e.activeUsers,i=e.userIdToFile,a=t.sessionTimestampUpdated;if(!a.session||!a.timestamp)throw new Error("Expected session and tiemstamp associated with update");var s=a.session,c=m(s,o),u=i[c.id],l=c.sessions.find((function(e){return e.id===s}));if(!l)throw new Error("Expected user ".concat(c.id," to have a session with ID ").concat(s));l.timestamp=b(a.timestamp);var d=l.activeFile;d!==u&&(i[c.id]=d,n.emit(r.USER_OPENED_FILE,{user:c,file:d}))}(t)}})),f=t,function(){f=null}}})),{onUserLeave:function(e){return n.on(r.USER_LEAVE,e),function(){n.removeListener(r.USER_LEAVE,e)}},onUserJoin:function(e){return n.on(r.USER_JOIN,e),function(){n.removeListener(r.USER_LEAVE,e)}},onActiveUsersChange:function(e){return n.on(r.USERS_UPDATE,e),function(){n.removeListener(r.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return n.on(r.USER_OPENED_FILE,e),function(){n.removeListener(r.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return n.on(r.FOLLOWED_USER_CHANGED,e),function(){n.removeListener(r.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return n.on(r.FOLLOWING_USERS_CHANGED,e),function(){n.removeListener(r.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var t=d[e];if("undefined"===typeof t)throw new Error("Expected file for user with ID ".concat(e," to be defined"));return t},updateOpenFile:function(e){return(0,o.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:t.sent.send({openFile:{file:e}});case 4:case"end":return t.stop()}}),t)})))()},updateSessionTimestamp:function(){return(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:e.sent.send({updateSessionTimestamp:{}});case 4:case"end":return e.stop()}}),e)})))()},followUser:function(e){return S.apply(this,arguments)},unfollowUser:j,getActiveUsers:function(){return i},getFollowedUser:function(){return s},getFollowingUsers:function(){return c},getUserIdToFile:function(){return d},getPathToUserIds:function(){var e={};function t(n,r){""!==n&&(e[n]||(e[n]=[]),e[n].some((function(e){return e===r}))||(e[n].push(r),t((0,x.Il)(n),r)))}return i.forEach((function(e){var n=e.id,r=d[n];r&&t(r,n)})),e}}}var S=n(92809),j=n(63258),Z=n(74298);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D,I=n(80001);!function(e){e.MESSAGES_LOADED="MESSAGES_LOADED",e.MESSAGE_RECEIVED="MESSAGE_RECEIVED",e.MESSAGE_SENT="MESSAGE_SENT",e.USER_TYPING_UPDATED="USER_TYPING_UPDATED"}(D||(D={}));var T=n(98811),_=n(32385),A=n(25373),R=n(67294),N=n(28955);var U,L=function(){throw new Error("layout not provided")},F={has:L,set:L,setFloating:L,insert:L,insertFloating:L,remove:L,component:function(){return R.Fragment}};!function(e){e.MESSAGE_RECEIVED="MESSAGE_RECEIVED"}(U||(U={}));var B=n(37429),M=n(79056),H=n(94793),z=n(60035),G=a().mark(q);function V(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t){var n;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.length===t.length){r.next=2;break}return r.abrupt("return");case 2:n=0;case 3:if(!(n<e.length)){r.next=9;break}return r.next=6,[e[n],t[n]];case 6:n++,r.next=3;break;case 9:case"end":return r.stop()}}),G)}var J=n(48764).Buffer;function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e){var t=e.channel,n=(0,B.u)("terminated"),r=(0,B.u)([]),i=(0,B.u)([]),s=(0,B.u)(new Map),c=(0,B.u)(null),d=(0,w.Z)(),f=function(e,t){var n=new Map,r=new Map,i=new Map;function s(){return(s=(0,o.Z)(a().mark((function t(o){var s,c,u,l,d,f,p,h,g,v,m,b,y,w,x,E,k,O,S,j,Z,C,P,D,I;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=V(n.entries()),t.prev=1,s.s();case 3:if((c=s.n()).done){t.next=21;break}if(u=(0,M.Z)(c.value,2),l=u[0],d=u[1],void 0===o||o===l){t.next=7;break}return t.abrupt("continue",19);case 7:return t.next=9,e({command:"setBreakpoints",arguments:{source:{name:l,path:l},breakpoints:d.map((function(e){return{line:e.line,logMessage:e.logMessage||void 0}}))}});case 9:if((f=t.sent).success){t.next=12;break}return t.abrupt("continue",19);case 12:p=V(r);try{for(p.s();!(h=p.n()).done;){v=(0,M.Z)(h.value,2),m=v[0],b=v[1],(null===(g=b.source)||void 0===g?void 0:g.name)===l&&r.delete(m),y=V(i);try{for(y.s();!(w=y.n()).done;)x=(0,M.Z)(w.value,2),E=x[0],x[1]===m&&i.delete(E)}catch(a){y.e(a)}finally{y.f()}}}catch(a){p.e(a)}finally{p.f()}O=V((k=f).body.breakpoints);try{for(O.s();!(S=O.n()).done;)null!=(j=S.value).id&&r.set(j.id,Y({source:{name:l,path:l}},j))}catch(a){O.e(a)}finally{O.f()}Z=V(q(d,k.body.breakpoints));try{for(Z.s();!(C=Z.n()).done;)P=(0,M.Z)(C.value,2),D=P[0],I=P[1],D.breakpointId&&null!=I.id&&i.set(D.breakpointId,I.id)}catch(a){Z.e(a)}finally{Z.f()}case 19:t.next=3;break;case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(1),s.e(t.t0);case 26:return t.prev=26,s.f(),t.finish(26);case 29:case"end":return t.stop()}}),t,null,[[1,23,26,29]])})))).apply(this,arguments)}function c(){var e,t=new Map,o=new Set,a=V(n.entries());try{for(a.s();!(e=a.n()).done;){var s=(0,M.Z)(e.value,2),c=s[0],u=s[1];if(0!==u.length){var l,d=[],f=V(u);try{for(f.s();!(l=f.n()).done;){var p=l.value;if(p.breakpointId&&p.line){var h=i.get(p.breakpointId),g=void 0===h?void 0:r.get(h);g&&o.add(h),d.push({dapId:h,pid1Id:p.breakpointId,line:g&&g.line||p.line,verified:Boolean(null===g||void 0===g?void 0:g.verified),logMessage:p.logMessage||void 0})}}}catch(D){f.e(D)}finally{f.f()}t.set(c,d)}}}catch(D){a.e(D)}finally{a.f()}var v,m=V(r.entries());try{for(m.s();!(v=m.n()).done;){var b,y,w=(0,M.Z)(v.value,2),x=w[0],E=w[1];if(!o.has(x)){var k=(0,H.IT)((null===(b=E.source)||void 0===b?void 0:b.path)||(null===(y=E.source)||void 0===y?void 0:y.name)||""),O=E.line;if(k&&O){var S=t.get(k);S||(S=[],t.set(k,S));var j,Z=!1,C=V(S);try{for(C.s();!(j=C.n()).done;){var P=j.value;if(P.line===E.line){P.dapId=x,P.verified=E.verified,Z=!0;break}}}catch(D){C.e(D)}finally{C.f()}Z||S.push({dapId:x,line:O,verified:E.verified})}}}}catch(D){m.e(D)}finally{m.f()}return t}return{findPathByBreakpointId:function(e){var t,r=V(n.entries());try{for(r.s();!(t=r.n()).done;){var o=(0,M.Z)(t.value,2),i=o[0];if(o[1].some((function(t){return t.breakpointId===e})))return i}}catch(a){r.e(a)}finally{r.f()}return null},getBreakpoints:c,flush:function(e){return s.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var n=e.body,o=n.reason,i=n.breakpoint,a=i.id;if(null!==a&&void 0!==a){switch(o){case"changed":case"new":r.set(a,Y(Y({},r.get(a)),i));break;case"removed":r.delete(a);break;default:return}t(c())}},handlePID1BreakpointEvent:function(e){var r=e.absolutePath?(0,H.IT)(e.absolutePath):null;r&&(n.set(r,e.breakpoints||[]),t(c()))},handleDebugSessionEnded:function(){r.clear(),i.clear();var e,o=V(n.entries());try{for(o.s();!(e=o.n()).done;){var a=(0,M.Z)(e.value,2),s=a[0];0===a[1].length&&n.delete(s)}}catch(u){o.e(u)}finally{o.f()}t(c())}}}(y,(function(e){s.current=e})),p=(0,B.u)(!1),h=[],g=(0,z.J)((function(e){var t;if(h.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"process":n.current="running";break;case"stopped":n.current="paused",c.current=null!==(t=e.body.threadId)&&void 0!==t?t:null,d.emit("paused",e.body.reason),function(){O.apply(this,arguments)}();break;case"terminated":case"exited":b();break;case"breakpoint":f.handleDAPBreakpointEvent(e)}else if("response"===e.type){var r=e,o=v.get(r.request_seq);o&&(v.delete(r.request_seq),o(e))}})),v=new Map,m=100;function b(){n.current="terminated",r.current=[],i.current=[],c.current=null,f.handleDebugSessionEnded(),p.current=!1}function y(e){return x.apply(this,arguments)}function x(){return(x=(0,o.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=m++;v.set(r,e);var o=$($({},n),{},{type:"request",seq:r});h.push({time:Date.now(),direction:"out",data:o});var i={debugInput:{session:"main",adapterInput:ee(o)}};h.push({time:Date.now(),direction:"out",data:i}),t.send(i)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return k.apply(this,arguments)}function k(){return(k=(0,o.Z)(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.push({time:Date.now(),direction:"out",data:n}),e.next=3,t.request(n);case 3:if(r=e.sent,h.push({time:Date.now(),direction:"in",data:r}),!r.error){e.next=7;break}throw r.error;case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=(0,o.Z)(a().mark((function e(){var t,n,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.current=[],i.current=[],e.next=4,y({command:"stackTrace",arguments:{threadId:c.current}});case 4:if((t=e.sent).success){e.next=7;break}return e.abrupt("return");case 7:if(r.current=t.body.stackFrames,0!==r.current.length){e.next=10;break}return e.abrupt("return");case 10:return n=r.current[0],e.next=13,y({command:"scopes",arguments:{frameId:n.id}});case 13:if((o=e.sent).success){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,Promise.all(o.body.scopes.map((function(e){return y({command:"variables",arguments:{variablesReference:e.variablesReference}}).then((function(t){return{response:t,parentVariableReference:e.variablesReference}}))})));case 18:s=e.sent,i.current=s.filter((function(e){return e.response.success})).reduce((function(e,t){var n=t.response,r=t.parentVariableReference;return e.concat(n.body.variables.map((function(e){return $($({},e),{},{parentVariableReference:r})})))}),[]);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return j.apply(this,arguments)}function j(){return(j=(0,o.Z)(a().mark((function e(){var o,i,s,c,u,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.current="initializing",r.current=[],s={debugMain:{session:"main",readOnly:!1}},h.push({time:Date.now(),direction:"out",data:s}),e.next=6,t.request(s);case 6:if(c=e.sent,h.push({time:Date.now(),direction:"in",data:c}),!c.error){e.next=12;break}return d.emit("output",c.error),n.current="terminated",e.abrupt("return");case 12:return e.next=14,y({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}});case 14:if((u=e.sent).success){e.next=18;break}return n.current="terminated",e.abrupt("return");case 18:return p.current=Boolean(null===(o=u.body)||void 0===o?void 0:o.supportsStepBack),l=!(null!==(i=u.body)&&void 0!==i&&i.supportsConfigurationDoneRequest),e.next=22,f.flush();case 22:if(l){e.next=25;break}return e.next=25,y({command:"configurationDone"});case 25:"initializing"===n.current&&(n.current="running"),d.emit("started",l);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){return C.apply(this,arguments)}function C(){return(C=(0,o.Z)(a().mark((function e(t,r){var o,i,s,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.line,i=r.otIndex,s=r.otVersion,c=r.logMessage,u=(0,H.om)(t)||t,e.next=4,E({debugAddBreakpointRequest:{path:u,line:o,otIndex:i,otVersion:s,logMessage:c}});case 4:if("terminated"===n.current){e.next=7;break}return e.next=7,f.flush(t);case 7:d.emit("breakpoint","added");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return D.apply(this,arguments)}function D(){return(D=(0,o.Z)(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.findPathByBreakpointId(t),e.next=3,E({debugRemoveBreakpointRequest:{breakpointId:t}});case 3:if("terminated"===n.current||!r){e.next=6;break}return e.next=6,f.flush(r);case 6:d.emit("breakpoint","removed");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=(0,o.Z)(a().mark((function e(t,r){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=f.findPathByBreakpointId(t)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,E({debugUpdateBreakpointRequest:{breakpointId:t,logMessage:r.logMessage}});case 5:if("terminated"===n.current){e.next=8;break}return e.next=8,f.flush(o);case 8:d.emit("breakpoint","updated");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=(0,o.Z)(a().mark((function e(t,n){var r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=null===(r=s.current.get(t))||void 0===r||null===(o=r.find((function(e){return e.line===n.line&&void 0!==e.pid1Id})))||void 0===o?void 0:o.pid1Id)){e.next=6;break}return e.next=4,P(i);case 4:e.next=8;break;case 6:return e.next=8,Z(t,n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t.onCommand((function(e){var t;h.push({time:Date.now(),direction:"in",data:e});var r=e.debugOutput,o=e.debugState,i=e.debugBreakpointEvent,a=e.debugSessions;if(r){if("main"!==r.session)return;r.adapterOutput&&g.read(r.adapterOutput),r.output&&d.emit("output",r.output)}i&&f.handlePID1BreakpointEvent(i),o&&o.state===l.api.State.Stopped&&b(),(null===a||void 0===a||null===(t=a.sessions)||void 0===t?void 0:t.main)===l.api.State.Running&&"terminated"===n.current&&S()})),{state:n,stackFrames:r,variables:i,breakpoints:s,supportsStepBack:p,onOutput:function(e){return d.on("output",e),function(){d.removeListener("output",e)}},onStarted:function(e){return d.on("started",e),function(){d.removeListener("started",e)}},onPaused:function(e){return d.on("paused",e),function(){d.removeListener("paused",e)}},onBreakpoint:function(e){return d.on("breakpoint",e),function(){d.removeListener("breakpoint",e)}},sendInput:function(e){return(0,o.Z)(a().mark((function n(){var r,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={debugInput:{session:"main",input:e}},h.push({time:Date.now(),direction:"out",data:r}),n.next=4,t.request(r);case 4:if(o=n.sent,h.push({time:Date.now(),direction:"in",data:o}),!o.error){n.next=8;break}throw o.error;case 8:case"end":return n.stop()}}),n)})))()},fetchVariables:function(e){return(0,o.Z)(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y({command:"variables",arguments:{variablesReference:e}});case 2:if(!(n=t.sent).success){t.next=5;break}return t.abrupt("return",n.body.variables.map((function(t){return $($({},t),{},{parentVariableReference:e})})));case 5:throw new Error(n.message);case 6:case"end":return t.stop()}}),t)})))()},addBreakpoint:Z,removeBreakpoint:P,updateBreakpoint:function(e,t){return I.apply(this,arguments)},toggleBreakpoint:function(e,t){return T.apply(this,arguments)},start:S,continue:function(){return(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.current=[],n.current="running",e.next=4,y({command:"continue",arguments:{threadId:c.current}});case 4:case"end":return e.stop()}}),e)})))()},reverseContinue:function(){return(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.current=[],n.current="running",e.next=4,y({command:"reverseContinue",arguments:{threadId:c.current}});case 4:case"end":return e.stop()}}),e)})))()},back:function(){return(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.current="running",e.next=3,y({command:"stepBack",arguments:{threadId:c.current}});case 3:case"end":return e.stop()}}),e)})))()},next:function(){return(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.current="running",e.next=3,y({command:"stepIn",arguments:{threadId:c.current}});case 3:case"end":return e.stop()}}),e)})))()},stepOut:function(){return(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.current="running",e.next=3,y({command:"stepOut",arguments:{threadId:c.current}});case 3:case"end":return e.stop()}}),e)})))()},stop:function(){return(0,o.Z)(a().mark((function e(){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={debugStop:{session:"main"}},h.push({time:Date.now(),direction:"out",data:n}),e.next=4,t.request(n);case 4:if(r=e.sent,h.push({time:Date.now(),direction:"in",data:r}),!r.error){e.next=8;break}throw r.error;case 8:b();case 9:case"end":return e.stop()}}),e)})))()},getSource:function(e){return(0,o.Z)(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y({command:"source",arguments:{source:{path:e}}});case 2:if((n=t.sent).success){t.next=5;break}throw new Error(n.message);case 5:return t.abrupt("return",n.body.content);case 6:case"end":return t.stop()}}),t)})))()},getDebugLogs:function(){return Object.entries({state:n,stackFrames:r,variables:i,breakpoints:s,threadId:c}).map((function(e){var t=(0,M.Z)(e,2),n=t[0],r=t[1];return"".concat(n," = ").concat(JSON.stringify(r.current instanceof Map?(0,u.Z)(r.current):r.current,void 0,2))})).join("\n")+"\n\n"+h.map((function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")})).join("\n")}}}function ee(e){var t=JSON.stringify(e);return"Content-Length: ".concat(J.byteLength(t),"\r\n\r\n").concat(t)}var te=n(95939),ne=n(31386),re=n(24243),oe=n(36265);function ie(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e){return ce.apply(this,arguments)}function ce(){return(ce=(0,o.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=re.Z,e.next=4,ue(t);case 4:return e.t2=e.sent,e.t3=e.t1.from.call(e.t1,e.t2),e.abrupt("return",e.t0.writeFile.call(e.t0,"index.html",e.t3));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){return le.apply(this,arguments)}function le(){return(le=(0,o.Z)(a().mark((function e(t){var n,r,o,i,s,c,u,l,d,f,p,h,g,v,m,b,y,w,E,k,O,S,j,Z,C,P,D,I,T,_;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",r="",e.next=4,t.readFile("conf.json");case 4:if(!(o=e.sent).error){e.next=7;break}return e.abrupt("return","");case 7:return i=JSON.parse(o.content.toString()),(0,oe.h)(i.version,"0.1.0")?r+="kaboom.import();\n":(0,oe.h)(i.version,"0.4.0")&&(r+="kaboom.global();\n"),(0,oe.h)(i.version,"0.4.0")?r+="\ninit({\n  ...".concat(JSON.stringify(i),",\n  clearColor: ").concat(i.clearColor?function(){var e=i.clearColor;return JSON.stringify({r:e[0],g:e[1],b:e[2],a:e[3]})}():"undefined","\n});\n  "):r+="\nkaboom({\n  ...".concat(JSON.stringify(i),",\n  global: true,\n  plugins: [ peditPlugin, asepritePlugin, kbmspritePlugin ],\n});\n"),e.next=12,Promise.all(["scenes","sprites","sounds"].map(t.readDir));case 12:if(s=e.sent,c=(0,M.Z)(s,3),u=c[0],l=c[1],d=c[2],!l.error){f=ie(l.children);try{for(f.s();!(p=f.n()).done;)h=p.value,g=JSON.stringify((0,x.eb)(h.filename)),v=JSON.stringify("sprites/".concat(h.filename)),(0,oe.H)(i.version,"0.4.0")?h.filename.endsWith(".pedit")?r+="loadPedit(".concat(g,", ").concat(v,");\n"):h.filename.endsWith(".kbmsprite")?r+="loadKbmsprite(".concat(g,", ").concat(v,");\n"):r+="loadSprite(".concat(g,", ").concat(v,");\n"):r+="loadSprite(".concat(g,", ").concat(v,");\n")}catch(a){f.e(a)}finally{f.f()}}if(!d.error){m=ie(d.children);try{for(m.s();!(b=m.n()).done;)y=b.value,w=JSON.stringify((0,x.eb)(y.filename)),E=JSON.stringify("sounds/".concat(y.filename)),r+="loadSound(".concat(w,", ").concat(E,");\n")}catch(a){m.e(a)}finally{m.f()}}if(u.error){e.next=42;break}return e.next=22,Promise.all(u.children.map((function(e){var n=e.filename;return Promise.all([(0,x.eb)(n),t.readFile("scenes/".concat(n))])})));case 22:k=e.sent,O=ie(k),e.prev=24,O.s();case 26:if((S=O.n()).done){e.next=34;break}if(j=S.value,Z=(0,M.Z)(j,2),C=Z[0],!(P=Z[1]).error){e.next=31;break}return e.abrupt("continue",32);case 31:r+="scene(".concat(JSON.stringify(C),", (args = {}) => {\n").concat(P.content.toString(),"\n});\n");case 32:e.next=26;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(24),O.e(e.t0);case 39:return e.prev=39,O.f(),e.finish(39);case 42:for(r+="start(".concat(JSON.stringify(i.startScene),");\n"),D=["kaboom.js"],(0,oe.h)(i.version,"0.1.0")?(D.push("kit/physics.js"),D.push("kit/starter.js"),D.push("kit/level.js")):(0,oe.H)(i.version,"0.4.0")&&(D.push("plugins/aseprite.js"),D.push("plugins/pedit.js")),I=0,T=D;I<T.length;I++)_=T[I],n+='<script src="https://kaboomjs.com/lib/'.concat(encodeURIComponent(i.version),"/").concat(encodeURI(_),'"><\/script>\n');return(0,oe.H)(i.version,"0.4.0")&&(n+='<script src="https://kaboomjs.com/pub/legacy/kbmsprite.js"><\/script>\n'),e.abrupt("return",'\n<!DOCTYPE html>\n\n<html>\n\n<head>\n  <title>kaboom</title>\n  <meta charset="utf-8">\n  <style>\n    * {\n      margin: 0;\n    }\n    html,\n    body {\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n    }\n    canvas {\n      display: block;\n    }\n  </style>\n</head>\n\n<body>\n'.concat(n,"\n  <script>\n").concat(r,"\n  <\/script>\n</body>\n\n</html>\n"));case 48:case"end":return e.stop()}}),e,null,[[24,36,39,42]])})))).apply(this,arguments)}var de,fe=n(48282),pe=n(41951),he=n(7239),ge=n(83633),ve=n.n(ge),me=n(71371);function be(e){var t=e.container,n=e.beforeRun,r=(0,w.Z)(),i=he.Z.Idle,s=new Date(0),c=!1;r.on(he.z.TEST_RESULT,(function(e){c=c&&"passed"===e.body}));var u=function(e){r.emit(he.z.STATE_CHANGED,e),i=e},d=function(){var e=(0,o.Z)(a().mark((function e(t,n){var o,i,s,c,d,f,p,h,g,v,m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=pe.api.Payload.fromObject(n),!(i=pe.api.Payload.verify(o))){e.next=4;break}throw i;case 4:return s=new(ve())((function(e){var t=pe.api.Response.fromObject(e),n=pe.api.Response.verify(t);if(n)me.Tb(new TypeError("invalid payload received"),(function(r){return r.setExtras({validationError:n,payload:o,message:e,response:t})}));else switch(t.body){case"error":return r.emit(he.z.ERROR,t.error);case"instructionResult":return r.emit(he.z.INSTRUCTION_RESULT,t.instructionResult);case"testResult":return r.emit(he.z.TEST_RESULT,t.testResult);case"status":switch(t.status){case pe.api.Status.Ready:return u(he.Z.Ready);case pe.api.Status.Building:return u(he.Z.Building);case pe.api.Status.Running:return u(he.Z.Running)}}})),c=t.onCommand((function(e){if(e.output)try{s.submit(e.output)}catch(h){me.Tb(new SyntaxError("invalid response received from i/o testing binary"),(function(n){return n.setExtras({err:h,payload:o,cmd:e})}))}})),d=t.request({exec:{args:["io-tester"],splitStderr:!0,lifecycle:l.api.Exec.Lifecycle.STDIN,splitLogs:!0}}),e.next=9,new Promise((function(e,t){var n,o=function(){n(),e()};r.once(he.z.STATE_CHANGED,o);var i=setTimeout((function(){n(),t(new Error("timeout while waiting for iotester to start"))}),2e4);n=function(){clearTimeout(i),r.off(he.z.STATE_CHANGED,o)}}));case 9:return e.next=11,t.request({input:JSON.stringify(o)+"\n"});case 11:if((f=e.sent).ok){e.next=16;break}throw h=new Error(null!==(p=f.error)&&void 0!==p?p:"unexpected error occurred while sending input to i/o testing binary"),me.Tb(h,(function(e){return e.setExtra("status",f)})),h;case 16:return e.next=18,d;case 18:(g=e.sent).ok||(m=new Error(null!==(v=g.error)&&void 0!==v?v:"unexpected error occurred while executing i/o testing binary"),me.Tb(m,(function(e){return e.setExtra("result",g)}))),c();case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{run:function(e){if(i!==he.Z.Idle)throw new Error("iotester already running");return u(he.Z.Starting),s=new Date,c=!0,n().then((function(){return new Promise((function(n,r){var o=t.openChannel({service:"exec"},(function(t){if(t.error)return r(t.error),o;var i="",a="",s=t.channel.onCommand((function(e){e.log?i+=e.log:e.stderr&&(a+=e.stderr)}));return n(d(t.channel,e).finally((function(){s(),o(),(a||i)&&me.Tb(new Error("logs received from io tseter"),(function(t){return t.setExtras({logs:i,stderr:a,payload:e})}))}))),o}))}))})).catch((function(e){return c=!1,Promise.reject(e)})).finally((function(){return u(he.Z.Idle)}))},get lastRunAt(){return s},get state(){return i},get lastRunDidPass(){return c},onInstructionResult:function(e){return r.on(he.z.INSTRUCTION_RESULT,e),function(){r.off(he.z.INSTRUCTION_RESULT,e)}},onStateChanged:function(e){return r.on(he.z.STATE_CHANGED,e),function(){r.off(he.z.STATE_CHANGED,e)}},onTestResult:function(e){return r.on(he.z.TEST_RESULT,e),function(){r.off(he.z.TEST_RESULT,e)}},onError:function(e){return r.on(he.z.ERROR,e),function(){r.off(he.z.ERROR,e)}}}}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e){e.ANCHORS_ADDED="ANCHORS_ADDED",e.ANCHORS_REMOVED="ANCHORS_REMOVED",e.PORTAL_UPDATED="PORTAL_UPDATED",e.THREAD_CREATED="THREADS_CREATED",e.CODE_EXPLAINED="CODE_EXPLAINED"}(de||(de={}));var ke=n(62126),Oe=n(32535),Se=n(81700),je=n.n(Se),Ze=n(37416);function Ce(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pe(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function De(e,t){return je()(e,{extended:!0,globstar:!0}).test(t)}function Ie(e,t){return e&&t?e.globPattern===t.globPattern&&JSON.stringify(e.startCommand)===JSON.stringify(t.startCommand):Boolean(e)===Boolean(t)}function Te(e){return _e.apply(this,arguments)}function _e(){return(_e=(0,o.Z)(a().mark((function e(t){var n,r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:0,e.next=3,t.exec("pwd");case 3:if(null===(r=e.sent).error){e.next=8;break}if(!(n>5)){e.next=7;break}return e.abrupt("return",{error:new Error("Could not get cwd "+r.error),workingDirectory:null});case 7:return e.abrupt("return",Te(t,n+1));case 8:return e.abrupt("return",{error:null,workingDirectory:r.output.replace("\n","")});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){var t=e.container,n=e.dotReplit,r=e.allowNonNix,o=void 0!==r&&r,i={},a={},s={};function c(e){var t=s[e];if(!t)throw new Error("languageId was never configured");var n=t.client;if(n){t.client=null,n.destroy();for(var r=0,o=Object.keys(i);r<o.length;r++){var c=o[r];if(a[c]===n){delete a[c];var u,l=Ce(i[c]);try{for(l.s();!(u=l.n()).done;){(0,u.value)(null)}}catch(d){l.e(d)}finally{l.f()}}}}t.closeChannel(),delete s[e]}function u(e,t,n){if(s[e])throw new Error("languageId is already configured");s[e]={client:null,globPattern:t,startCommand:n,closeChannel:function(){}},d(e)}function d(e){if(!s[e])throw new Error("No config found for language");var n=s[e],r=n.globPattern,c=n.startCommand;if(n.client)throw new Error("A client is already set for language");var u=[],f=t.openChannel({service:"lsp2",skip:function(e){return!o&&!e.repl.language.startsWith("nix")}},(function(n){var o=n.channel;if(o){o.send({startLSP:{language:e}});var p=null,h=function(){var t;u.forEach((function(e){return e()})),null===(t=p)||void 0===t||t.destroy(),s[e].client===p&&(s[e].client=null),f();for(var n=0,r=Object.keys(i);n<r.length;n++){var o=r[n];if(a[o]===p){delete a[o];var c,l=Ce(i[o]);try{for(l.s();!(c=l.n()).done;){(0,c.value)(null)}}catch(d){l.e(d)}finally{l.f()}}}};return u.push(o.onCommand((function(t){t.state===l.api.State.Stopped&&(h(),d(e))}))),Te(t).then((function(t){Ie(s[e],{globPattern:r,startCommand:c})&&"open"===o.status&&(t.error||((p=(0,Ze._)({channel:o,languageId:e,isSupportedFile:function(e){return De(r,e)}})).initialize({pwd:t.workingDirectory}),u.push(p.onServerStateChange((function(t){if("open"===o.status&&p&&Ie(s[e],{globPattern:r,startCommand:c})&&t===ke.aL.INITIALIZED){s[e].client=p;for(var n=0,u=Object.keys(i);n<u.length;n++){var l=u[n];if(De(r,l)&&!a[l]){a[l]=p;var d,f=Ce(i[l]);try{for(f.s();!(d=f.n()).done;){(0,d.value)(p)}}catch(h){f.e(h)}finally{f.f()}}}}})))))})),h}}));s[e].closeChannel=f}return n.watch((function(e){if(e.error){if(e.error===Oe.Y.NotFound)for(var t=0,n=Object.keys(s);t<n.length;t++){c(n[t])}}else if(e.config.languages){for(var r={},o=0,i=Object.entries(e.config.languages);o<i.length;o++){var a=(0,M.Z)(i[o],2),l=a[0],d=a[1];d.pattern&&d.languageServer&&d.languageServer.startCommand&&(r[l]={globPattern:d.pattern,startCommand:d.languageServer.startCommand})}for(var f=0,p=Object.keys(s);f<p.length;f++){var h=p[f];r[h]||c(h)}for(var g=0,v=Object.keys(r);g<v.length;g++){var m=v[g];s[m]||u(m,r[m].globPattern,r[m].startCommand)}for(var b=0,y=Object.keys(r);b<y.length;b++){var w=y[b],x=s[w],E=r[w];x&&!Ie(x,E)&&(c(w),u(w,E.globPattern,E.startCommand))}}else for(var k=0,O=Object.keys(s);k<O.length;k++){c(O[k])}})),{onClient:function(e,t){if(i[e]||(i[e]=[]),i[e].push(t),a[e])t(a[e]);else for(var n=0,r=Object.values(s);n<r.length;n++){var o=r[n];if(De(o.globPattern,e)){o.client&&t(o.client);break}}return function(){i[e]=i[e].filter((function(e){return e!==t}))}}}}function Re(e){var t=e.workspace,n=e.onUnrecoverableError,r=(0,s.Z)({onUnrecoverableError:n}),i=function(){var e=(0,w.Z)();e.setMaxListeners(20);var t=null,n=null,r=null,o=[],i=!1,a=!1,s={column:1,lineNumber:1,offset:0},c={openFiles:[],activeTab:0},u={isMonitoring:!0,interval:j.u,utilization:null};function l(t){k()(c,t)||(c=t,e.emit(j.z.SESSION_STATE_CHANGED,c))}function d(e,t){var n=t||c.openFiles.length;if(e<0||e>=n||!Number.isInteger(e))throw new Error("Invalid index: ".concat(e,". Index must be an integer between 0 and ").concat(n))}return{onResourceMonitoringStateChanged:function(t){return e.on(j.z.RESOURCE_MONITORING_STATE_CHANGED,t),function(){e.removeListener(j.z.RESOURCE_MONITORING_STATE_CHANGED,t)}},setResourceMonitoringState:function(t){k()(u,t)||(u=t,e.emit(j.z.RESOURCE_MONITORING_STATE_CHANGED,u))},getResourceMonitoringState:function(){return u},onSessionStateChanged:function(t){return e.on(j.z.SESSION_STATE_CHANGED,t),function(){e.removeListener(j.z.SESSION_STATE_CHANGED,t)}},onPreviewedFileChanged:function(t){return e.on(j.z.PREVIEWED_FILE_CHANGED,t),function(){e.removeListener(j.z.PREVIEWED_FILE_CHANGED,t)}},onPreviewedYoutubeVideoChanged:function(t){return e.on(j.z.PREVIEWED_YOUTUBE_VIDEO_CHANGED,t),function(){e.removeListener(j.z.PREVIEWED_YOUTUBE_VIDEO_CHANGED,t)}},onCursorPositionChanged:function(t){return e.on(j.z.CURSOR_POSITION_CHANGED,t),function(){e.removeListener(j.z.CURSOR_POSITION_CHANGED,t)}},onCommandBarToggled:function(t){return e.on(j.z.COMMAND_BAR_TOGGLED,t),function(){e.removeListener(j.z.COMMAND_BAR_TOGGLED,t)}},onHiddenFileVisibilityToggled:function(t){return e.on(j.z.CONFIG_FILE_VISIBILITY_TOGGLED,t),function(){e.removeListener(j.z.CONFIG_FILE_VISIBILITY_TOGGLED,t)}},onDeeplinkUpdated:function(t){return e.on(j.z.DEEPLINK_CHANGED,t),r&&(t(r),r=null),function(){e.removeListener(j.z.DEEPLINK_CHANGED,t)}},closeTab:function(e){d(e);var t=c.openFiles.slice(),n=c.activeTab;e<=c.activeTab&&0!==c.activeTab&&n--,t.splice(e,1),l({openFiles:t,activeTab:n})},openFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.tabIndex,r=t.newTab,i=o.indexOf(e);if(-1!==i?(o.splice(i),o.unshift(e)):(o.unshift(e),o.length>5&&o.pop()),void 0===n)if(c.openFiles.includes(e))l(P(P({},c),{},{activeTab:c.openFiles.indexOf(e)}));else{var a=c.openFiles.slice();if(r){var s=0===a.length?0:c.activeTab+1;return a.splice(s,0,e),void l({openFiles:a,activeTab:s})}var u=c.activeTab;a.splice(u,1,e),l({openFiles:a,activeTab:u})}else{d(n,c.openFiles.length+1);var f=c.openFiles.slice(),p=c.openFiles.indexOf(e);if(-1===p)return f.splice(n,1,e),void l({openFiles:f,activeTab:f.indexOf(e)});if(p===n)return void l(P(P({},c),{},{activeTab:f.indexOf(e)}));f.splice(p,1),f.splice(n,0,e);var h=f.indexOf(e);l({openFiles:f,activeTab:h})}},moveFile:function(e,t){var n=c.openFiles.map((function(n){return n===e?t:(0,Z.yr)(e,n)?(0,Z.hk)(e,t,n):n}));l(P(P({},c),{},{openFiles:n}))},deleteFile:function(e){var t=c.openFiles[c.activeTab],n=c.openFiles.filter((function(t){return t!==e&&!(0,Z.yr)(e,t)})),r=n.includes(t)?n.indexOf(t):n.length-1,i=Math.max(0,r),a=o.findIndex((function(t){return t===e}));a&&o.splice(a,1),l({openFiles:n,activeTab:i})},updateDeeplink:function(t){e.emit(j.z.DEEPLINK_CHANGED,t),r=t},getActiveFile:function(){var e=c,t=e.openFiles,n=e.activeTab;if(0!==t.length)return t[n]},getCursorPosition:function(){return s},getRecentFiles:function(){return o},setPreviewedFile:function(n){t!==n&&(t=n,e.emit(j.z.PREVIEWED_FILE_CHANGED,n))},setCursorPosition:function(t){k()(t,s)||(s=t,e.emit(j.z.CURSOR_POSITION_CHANGED,t))},setIsCommandBarOpen:function(t){i!==t&&(i=t,e.emit(j.z.COMMAND_BAR_TOGGLED,i))},setAreHiddenFilesVisible:function(t){a!==t&&(a=t,e.emit(j.z.CONFIG_FILE_VISIBILITY_TOGGLED,a))},setPreviewedYoutubeVideo:function(t){n!==t&&(n=t,e.emit(j.z.PREVIEWED_YOUTUBE_VIDEO_CHANGED,t))},getPreviewedFile:function(){return t},getPreviewedYoutubeVideo:function(){return n},getIsCommandBarOpen:function(){return i},getAreHiddenFilesVisible:function(){return a},getState:function(){return c}}}(),u=(0,T.Z)({container:r}),l=O({container:r}),d=(0,te.Z)({container:r,fs:u}),f=(0,c.Z)({container:r,dotReplit:d}),p=function(e){var t=e.container,n=(0,w.Z)(),r=null,i=[],s=[];function c(){return u.apply(this,arguments)}function u(){return(u=(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return",r);case 2:return e.abrupt("return",new Promise((function(e){n.once(D.MESSAGES_LOADED,(function(){e(r)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t.openChannel({service:"chat",name:"chatter"},(function(e){var t=e.channel;if(!e.error){if(!t)throw new Error("Expected channel");return t.onCommand((function(e){switch(e.body){case"chatMessage":var o=e.chatMessage;if(!o||!o.username||!o.text)throw new Error("expected a chat message in the response");i.push(o),n.emit(D.MESSAGE_RECEIVED,{text:o.text,username:o.username});break;case"chatTyping":var a=e.chatTyping;if(!a||!a.username)return;var c=a.username,u=a.typing;u&&!s.includes(c)&&s.push(c),!u&&s.includes(c)&&s.splice(s.indexOf(c),1),n.emit(D.USER_TYPING_UPDATED,{username:c,isTyping:Boolean(u)});break;case"chatScrollback":var l=e.chatScrollback;if(null===l||void 0===l||!l.scrollback)return;l.scrollback.forEach((function(e){return i.push(e)})),r=t,n.emit(D.MESSAGES_LOADED,i)}})),function(){r=null}}})),{sendMessage:function(e){return(0,o.Z)(a().mark((function t(){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:r=t.sent,i.push(e),r.send({chatMessage:e}),n.emit(D.MESSAGE_SENT,e);case 6:case"end":return t.stop()}}),t)})))()},onMessageReceived:function(e){return n.on(D.MESSAGE_RECEIVED,e),function(){n.removeListener(D.MESSAGE_RECEIVED,e)}},onMessageSent:function(e){return n.on(D.MESSAGE_SENT,e),function(){n.removeListener(D.MESSAGE_SENT,e)}},updateUserTyping:function(e){return(0,o.Z)(a().mark((function t(){var n,r,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:n=t.sent,r=e.username,o=e.isTyping,n.send({chatTyping:{username:r,typing:o}});case 5:case"end":return t.stop()}}),t)})))()},onUserTypingUpdated:function(e){return n.on(D.USER_TYPING_UPDATED,e),function(){n.removeListener(D.USER_TYPING_UPDATED,e)}},onMessagesLoaded:function(e){return n.on(D.MESSAGES_LOADED,e),function(){n.removeListener(D.MESSAGES_LOADED,e)}},getMessages:function(){return i},getUsersTyping:function(){return s}}}({container:r}),h=(0,I.Z)({container:r,beforeRun:function(){var e=(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.flush();case 2:return e.next=4,(0,fe.Z)(r,d);case 4:if(!e.sent){e.next=7;break}return e.next=7,f.installPackages();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),g=function(e){var t=e.container,n=(0,B.u)(null);return{mainClient:n,connect:function(){return new Promise((function(e,r){n.current||t.openChannel({service:"debugger"},(function(t){if(!t.error)return n.current=Q({channel:t.channel}),e(null),function(){n.current=null};r(t.error)}))}))}}}({container:r}),v=(0,A.Z)({beforeRun:function(){var e=(0,o.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("kaboom"!==t){e.next=3;break}return e.next=3,se(u);case 3:return e.next=5,u.flush();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getMainFileContents:function(e){return(0,_.Z)({language:e,fs:u})}}),m=t?function(e){var t=e.workspace,n=function(){return t.store.getState()},r=t.store.dispatch,o=t.component(),i=function(e){if(!n().plugins[e])throw new Error("Unknown plugin with pud:".concat(e))};return{component:function(){return o},set:function(e){r({type:"UPDATE_LAYOUT",path:N.Jz(),to:e})},setFloating:function(e){r({type:"UPDATE_LAYOUT",path:N.cV(),to:e})},insertFloating:function(e){i(e);var t=n().layout,o=N.$T(t,e,"inside",N.cV()),a=o.path,s=o.to;r({type:"UPDATE_LAYOUT",path:a,to:s})},insert:function(e,t,o){i(e);var a=n(),s=a.layout,c=a.plugins,u=null,l="";if("above"in t?(u="above",l=t.above):"rightOf"in t?(u="rightOf",l=t.rightOf):"below"in t?(u="below",l=t.below):"leftOf"in t&&(u="leftOf",l=t.leftOf),!u)throw new Error("Expected direction");var d=N.$T(s,e,u,N.PP(s,c,l),o),f=d.path,p=d.to;r({type:"UPDATE_LAYOUT",path:f,to:p,property:void 0})},remove:function(e){i(e);var t=N.Od(n().layout,e),o=t.path,a=t.to;r({type:"UPDATE_LAYOUT",path:o,to:a,property:null})},has:function(e){return i(e),N.e$(n().layout,e)}}}({workspace:t}):F,b=function(e){var t,n=e.container,r=(0,w.Z)(),i=new Promise((function(e){return t=e})),s=null;return n.openChannel({service:"chat",name:"broadcaster"},(function(e){if(!e.error){var n=e.channel,o=e.context;if(!n)throw new Error("Expected channel");return o.currentUser&&(s=o.currentUser.username),n.onCommand((function(e){switch(e.body){case"chatMessage":var t=e.chatMessage;if(!t||!t.username||!t.text)throw new Error("unexpected broadcast without a message");r.emit(U.MESSAGE_RECEIVED,{text:t.text,username:t.username})}})),t(n),function(){i=new Promise((function(e){return t=e}))}}})),{broadcastMessage:function(e){return(0,o.Z)(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.text,t.next=3,i;case 3:if(r=t.sent,s){t.next=6;break}throw new Error("Cannot broadcast without as username. Is currentUser in context?");case 6:r.send({chatMessage:{text:n,username:s}});case 7:case"end":return t.stop()}}),t)})))()},onBroadcastReceived:function(e){return r.on(U.MESSAGE_RECEIVED,e),function(){r.removeListener(U.MESSAGE_RECEIVED,e)}}}}({container:r}),y=(0,ne.g)({container:r}),x=Ae({container:r,dotReplit:d}),E=be({container:r,beforeRun:function(){var e=(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.flush();case 2:return e.next=4,(0,fe.Z)(r,d);case 4:if(!e.sent){e.next=7;break}return e.next=7,f.installPackages();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),S=function(e){var t=e.fs,n={},r={},i={},s=(0,w.Z)();function c(e){return u.apply(this,arguments)}function u(){return(u=(0,o.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(n.map(function(){var e=(0,o.Z)(a().mark((function e(n){var r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){r=t.watchOtFile(n.path,{onReady:function(t){var o=t.transformSelection,i=t.version;if(r(),i===n.otVersion)return e({indexStart:n.indexStart,indexEnd:n.indexEnd,version:n.otVersion});e(o({indexStart:n.indexStart,indexEnd:n.indexEnd,versionFrom:n.otVersion,versionTo:i}))}})}));case 2:return o=e.sent,i=we(we({},n),{},{indexStart:o.indexStart,indexEnd:o.indexEnd,otVersion:o.version}),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{onAnchorPortalSet:function(e,t){var n=function(n){n.id===e&&t(n)};return s.on(de.PORTAL_UPDATED,n),function(){s.removeListener(de.PORTAL_UPDATED,n)}},addAnchors:function(e){return(0,o.Z)(a().mark((function t(){var o,i,u,l,d,f,p;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=xe(e);try{for(o.s();!(i=o.n()).done;)u=i.value,n[u.id]=u}catch(a){o.e(a)}finally{o.f()}return t.next=4,c(e);case 4:l=t.sent,d=xe(l);try{for(d.s();!(f=d.n()).done;)p=f.value,r[p.id]=p}catch(a){d.e(a)}finally{d.f()}s.emit(de.ANCHORS_ADDED,l);case 8:case"end":return t.stop()}}),t)})))()},removeAnchors:function(e){return(0,o.Z)(a().mark((function t(){var o,c,u,l;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=[],c=xe(e),t.prev=2,c.s();case 4:if((u=c.n()).done){t.next=14;break}if(l=u.value,n[l]){t.next=8;break}return t.abrupt("continue",12);case 8:o.push(n[l]),delete i[l],delete r[l],delete n[l];case 12:t.next=4;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),c.e(t.t0);case 19:return t.prev=19,c.f(),t.finish(19);case 22:s.emit(de.ANCHORS_REMOVED,o);case 23:case"end":return t.stop()}}),t,null,[[2,16,19,22]])})))()},getAnchors:function(e){return(0,o.Z)(a().mark((function t(){var o,i,s,u,l;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Object.values(n).filter((function(t){return t.path===e})),t.next=3,c(o);case 3:i=t.sent,s=xe(i);try{for(s.s();!(u=s.n()).done;)l=u.value,r[l.id]=l}catch(a){s.e(a)}finally{s.f()}return t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})))()},createThread:function(e){s.emit(de.THREAD_CREATED,e)},explainCode:function(e){s.emit(de.CODE_EXPLAINED,e)},onThreadCreated:function(e){return s.on(de.THREAD_CREATED,e),function(){s.off(de.THREAD_CREATED,e)}},onCodeExplained:function(e){return s.on(de.CODE_EXPLAINED,e),function(){s.off(de.CODE_EXPLAINED,e)}},onAnchorsAdded:function(e){return s.on(de.ANCHORS_ADDED,e),function(){s.removeListener(de.ANCHORS_ADDED,e)}},onAnchorsRemoved:function(e){return s.on(de.ANCHORS_REMOVED,e),function(){s.removeListener(de.ANCHORS_REMOVED,e)}},setAnchorPortal:function(e){n[e.id]&&r[e.id]&&(i[e.id]=e,s.emit(de.PORTAL_UPDATED,e))}}}({fs:u});return{layout:m,session:i,presence:l,packager:f,container:r,fs:u,chat:p,runner:h,debuggest:g,replbox:v,broadcast:b,dotReplit:d,lsp:y,lspnix:x,iotester:E,anchorer:S}}},7239:function(e,t,n){var r,o;n.d(t,{z:function(){return r},Z:function(){return o}}),function(e){e.INSTRUCTION_RESULT="INSTRUCTION_RESULT",e.TEST_RESULT="TEST_RESULT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED"}(r||(r={})),function(e){e[e.Idle=0]="Idle",e[e.Starting=1]="Starting",e[e.Ready=2]="Ready",e[e.Building=3]="Building",e[e.Running=4]="Running"}(o||(o={}))},37416:function(e,t,n){n.d(t,{_:function(){return m}});var r,o=n(30266),i=n(92809),a=n(809),s=n.n(a),c=n(40354),u=n(67005),l={textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["plaintext"]}},formatting:{dynamicRegistration:!0},definition:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,completionItem:{documentationFormat:["plaintext"]}},hover:{dynamicRegistration:!0,contentFormat:["plaintext"]}},workspace:{didChangeConfiguration:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[u.ResourceOperationKind.Create,u.ResourceOperationKind.Delete,u.ResourceOperationKind.Rename]}}},d=n(60035),f=n(51595),p=n(62126),h=n(48764).Buffer;function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){var t=e.channel,n=e.isSupportedFile,i=e.languageId,a=(0,c.Z)(),u=null,g=p.aL.OFFLINE,m=null,b={},y={};function w(e){if(!u)throw new Error("Expected rootUri");return e.slice(u.length+1)}function x(e){if(!u)throw new Error("Expected rootUri");if(e.startsWith("/"))throw new Error("Path must be relative. Got: ".concat(e));return u+"/"+e}function E(e){g=e,a.emit(r.SERVER_STATE_CHANGE,g)}function k(e){var t=JSON.stringify(v(v({},e),{},{jsonrpc:"2.0"})),n=h.byteLength(t,"utf8");return"Content-Length: ".concat(n,"\r\n\r\n").concat(t)}function O(e){t.send({input:k(e)})}function S(){return Math.floor(Math.random()*(Math.pow(2,31)-1))}function j(e,n){var r=n||S();if(!Number.isInteger(r))throw new Error("Request ID must be an integer");return t.send({input:k(v(v({},e),{},{id:r}))}),new Promise((function(e){y[r]=e}))}var Z=(0,d.J)((function(e){if(e.id&&y[e.id]){var t=y[e.id];delete y[e.id];var n=e.result,o=e.error;if(n)return void t({result:n,cancelled:!1});if(o)return void t({error:o});throw new Error("Expected either message or error in LSP response")}var i=e.method;if("client/registerCapability"===i){var s=e.params.registrations;if(!s||!Array.isArray(s))throw new Error("Expected registrations array");s.forEach((function(e){var t=e.method;if(!t)throw new Error("Expected registration method");if(!m)throw new Error("Expected server capabilities");var n=e.registerOptions||!0;switch(t){case"textDocument/definition":m.definitionProvider=!0;break;case"textDocument/references":m.referencesProvider=!0;break;case"textDocument/hover":m.hoverProvider=!0;break;case"textDocument/completion":m.completionProvider=n;break;case"textDocument/formatting":m.documentFormattingProvider=n;break;case"textDocument/rename":m.renameProvider=n;break;case"textDocument/signatureHelp":m.signatureHelpProvider=n;break;default:f.kg.info("Unexpected dynamically registered capability in LSP client",{method:t})}a.emit(r.SERVER_CAPABILITIES_CHANGE,m)}))}"textDocument/publishDiagnostics"===i&&a.emit(r.DIAGNOSTICS,{path:w(e.params.uri),diagnostics:e.params.diagnostics})}));return t.onCommand((function(e){e.output&&Z.read(e.output)})),{initialize:function(e){return(0,o.Z)(s().mark((function t(){var n,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.pwd,E(p.aL.INITIALIZING),u="file://".concat(n),t.next=5,j({method:"initialize",params:{capabilities:l,processId:null,rootUri:u,workspaceFolders:[{name:u,uri:u}]}});case 5:if(!("error"in(o=t.sent))){t.next=8;break}throw new Error("Something went wrong initializing the LSP client: ".concat(o.error.message));case 8:if(o.result){t.next=10;break}throw new Error("Expected result in initialize request");case 10:O({method:"initialized",params:{}}),m=o.result.capabilities,a.emit(r.SERVER_CAPABILITIES_CHANGE,m),E(p.aL.INITIALIZED);case 14:case"end":return t.stop()}}),t)})))()},generateId:S,notify:{didOpen:function(e,t){var r,o;if(!n(e))throw new Error("Path not supported");if(b[e]&&0!==b[e].buffers)b[e].buffers++;else{var a=null!==(r=null===(o=b[e])||void 0===o?void 0:o.version)&&void 0!==r?r:0;b[e]={version:a,buffers:1},O({method:"textDocument/didOpen",params:{textDocument:{uri:x(e),languageId:i,text:t,version:a}}})}},didChange:function(e,t){var n=b[e];if(!n)throw new Error('Document for "'.concat(e,'" is not open'));n.version++,O({method:"textDocument/didChange",params:{textDocument:{uri:x(e),version:n.version,languageId:i},contentChanges:t}})},didSave:function(e){var t=b[e];if(!t)throw new Error('Document for "'.concat(e,'" is not open'));if(!m)throw new Error("Expected client to be initialized");if(!m.textDocumentSync)throw new Error("LSP Server does not support text document sync");O({method:"textDocument/didSave",params:{textDocument:{uri:x(e),version:t.version,languageId:i}}})},didClose:function(e){var t=b[e];if(!t)throw new Error('Document for "'.concat(e,'" is not open'));t.buffers--,t.buffers>0||O({method:"textDocument/didClose",params:{textDocument:{uri:x(e),version:t.version,languageId:i}}})},cancelRequest:function(e){var t=y[e];if(t)return t({result:null,cancelled:!0}),delete y[e],O({method:"$/cancelRequest",params:{id:e}})}},request:{completion:function(e,t,n,r){return j({method:"textDocument/completion",params:{textDocument:{uri:x(e),languageId:i},position:t,context:n}},r)},resolveCompletionItem:function(e,t){return j({method:"completionItem/resolve",params:e},t)},signatureHelp:function(e,t,n){return j({method:"textDocument/signatureHelp",params:{textDocument:{uri:x(e),languageId:i},position:t}},n)},hover:function(e,t,n){return j({method:"textDocument/hover",params:{textDocument:{uri:x(e),languageId:i},position:t}},n)},format:function(e,t,n){if(!m)throw new Error("Expected client to be initialized");if(!m.documentFormattingProvider)throw new Error("LSP server does not support formatting");return j({method:"textDocument/formatting",params:{textDocument:{uri:x(e)},options:t}},n)},findDefinitions:function(e,t,n){return(0,o.Z)(s().mark((function r(){var o;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(m){r.next=2;break}throw new Error("Expected client to be initialized");case 2:if(m.definitionProvider){r.next=4;break}throw new Error("LSP server does not support go to definition");case 4:return r.next=6,j({method:"textDocument/definition",params:{textDocument:{uri:x(e),languageId:i},position:t}},n);case 6:if("result"in(o=r.sent)){r.next=9;break}return r.abrupt("return",o);case 9:if(!o.result||Array.isArray(o.result)){r.next=11;break}return r.abrupt("return",{result:[o.result],cancelled:!1});case 11:return r.abrupt("return",o);case 12:case"end":return r.stop()}}),r)})))()},findReferences:function(e,t,n,r){if(!m)throw new Error("Expected client to be initialized");if(!m.referencesProvider)throw new Error("LSP server does not support find references");return j({method:"textDocument/references",params:{textDocument:{uri:x(e),languageId:i},position:t,context:n}},r)},rename:function(e,t,n,r){if(!m)throw new Error("Expected client to be initialized");if(!m.renameProvider)throw new Error("LSP server does not support renaming");return j({method:"textDocument/rename",params:{textDocument:{uri:x(e),languageId:i},position:t,newName:n}},r)},prepareRename:function(e,t,n){if(!m)throw new Error("Expected client to be initialized");if(!m.renameProvider||"boolean"===typeof m.renameProvider||!m.renameProvider.prepareProvider)throw new Error("LSP server does not support prepare rename");return j({method:"textDocument/prepareRename",params:{textDocument:{uri:x(e),languageId:i},position:t}},n)}},onDiagnostics:function(e){return a.on(r.DIAGNOSTICS,e),function(){a.removeListener(r.DIAGNOSTICS,e)}},onServerStateChange:function(e){return a.on(r.SERVER_STATE_CHANGE,e),function(){a.removeListener(r.SERVER_STATE_CHANGE,e)}},onServerCapabilitiesChange:function(e){return a.on(r.SERVER_CAPABILITIES_CHANGE,e),function(){a.removeListener(r.SERVER_CAPABILITIES_CHANGE,e)}},shutdown:function(){E(p.aL.EXITING),j({method:"shutdown"}).then((function(){O({method:"exit"}),E(p.aL.EXITED),a.removeAllListeners()}))},destroy:function(){E(p.aL.EXITED),a.removeAllListeners()},getServerState:function(){return g},getServerCapabilities:function(){return m},documentUriToPath:w,isSupportedFile:n}}!function(e){e.INITIALIZED="INITIALIZED",e.DIAGNOSTICS="DIAGNOSTICS",e.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",e.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE"}(r||(r={}))},20881:function(e,t,n){function r(e){var t=e.getServerCapabilities();return{isAutoCompleteSupported:Boolean(null===t||void 0===t?void 0:t.completionProvider),isFindReferencesSupported:Boolean(null===t||void 0===t?void 0:t.referencesProvider),isFindDefinitionSupported:Boolean(null===t||void 0===t?void 0:t.definitionProvider),isHoverSupported:Boolean(null===t||void 0===t?void 0:t.hoverProvider),isRenameSupported:Boolean(null===t||void 0===t?void 0:t.renameProvider)}}n.d(t,{Z:function(){return r}})},31386:function(e,t,n){n.d(t,{g:function(){return d}});var r=n(40354),o=n(62126),i=n(7977),a=n.n(i),s=n(37416),c=n(26470),u=function(e){switch((0,c.extname)(e).slice(1)){case"php":return"php";case"re":return"reason";case"erl":return"erlang";case"c":return"c";case"go":return"go";case"java":return"java";case"cpp":return"cpp";case"rb":return"ruby";case"py":return"python";case"js":case"sx":case"es6":return"replit-js";case"ts":case"tsx":return"replit-ts";default:return null}},l=n(50055);function d(e){var t=e.container,n=(0,r.Z)(),i=null,c=!1,d=0,f=null;function p(e){i!==e&&(i=e,n.emit(o.zW.ON_CLIENT,i))}var h=function(){p(null)},g=!1,v={start:function(){g||(g=!0,h=t.openChannel({service:"lsp",skip:function(e){if(e.repl.language.startsWith("nix"))return!0;var t=a().get(e.repl.language).entrypoint;return!u(t)||!a().supportsLSP(e.repl.language)}},(function(e){if(!e.error){var r=!1,i=function(){},h=a().get(e.context.repl.language).entrypoint,g=u(h);if(!g)throw new Error("Expected languageId");var m=(0,s._)({channel:e.channel,languageId:g,isSupportedFile:function(e){var t=u(e);return t===g||("replit-ts"===g&&"replit-js"===t||"replit-js"===g&&"replit-ts"===t)}});t.exec("pwd").then((function(e){if(!r){var t=e.output?e.output.replace(/\n/,""):null;if(!t)throw new Error("Expected pwd");if(!m)throw new Error("Expected client");m.initialize({pwd:t}),i=m.onServerStateChange((function(e){r||e===o.aL.INITIALIZED&&p(m)}))}}));var b=e.channel.onCommand((function(e){e.output||e.state===l.api.State.Stopped&&(d++,v.stop(),f=setTimeout((function(){return v.start()}),1e3*Math.pow(2,d)))}));return function(e){var t=e.willReconnect;m&&(m.destroy(),p(null)),r=!0,i(),b(),c?c=!1:t||n.emit(o.zW.DISCONNECT)}}})))},getClient:function(){return i},onClient:function(e){return n.on(o.zW.ON_CLIENT,e),function(){n.removeListener(o.zW.ON_CLIENT,e)}},stop:function(){if(c=!0,g=!1,null!==f&&clearTimeout(f),i){var e=i.onServerStateChange((function(t){t===o.aL.EXITED&&(e(),h())}));return i.destroy(),void p(null)}h()},onUnexpectedDisconnect:function(e){return n.on(o.zW.DISCONNECT,e),function(){n.removeListener(o.zW.DISCONNECT,e)}}};return v}},60035:function(e,t,n){n.d(t,{J:function(){return i}});var r=n(71371),o=n(79081);function i(e){var t=new o.Z,n=-1;return{read:function(o){for(t.append(o);;){if(-1===n){var i=t.tryReadHeaders();if(!i)return;var a=i["Content-Length"];if(!a)return r.Tb(new Error("Header must provide a Content-Length property.")),!1;var s=parseInt(a,10);if(isNaN(s))return r.Tb(new Error("Content-Length value must be a number.")),!1;n=s}var c=t.tryReadContent(n);if(null===c)return;n=-1;try{var u=JSON.parse(c);e(u)}catch(l){r.Tb(l)}}}}}},62126:function(e,t,n){var r,o,i,a;n.d(t,{zW:function(){return r},Ij:function(){return o},ex:function(){return i},aL:function(){return a}}),function(e){e.DISCONNECT="DISCONNECT",e.ON_CLIENT="ON_CLIENT"}(r||(r={})),function(e){e[e.Invoked=1]="Invoked",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=3]="TriggerForIncompleteCompletions"}(o||(o={})),function(e){e[e.None=0]="None",e[e.Full=1]="Full",e[e.Incremental=2]="Incremental"}(i||(i={})),function(e){e.OFFLINE="OFFLINE",e.INITIALIZING="INITIALIZING",e.INITIALIZED="INITIALIZED",e.EXITING="EXITING",e.EXITED="EXITED"}(a||(a={}))},90470:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(79056),o=n(67294),i=n(10257),a=n(53291);function s(e){var t=(0,a.Z)(),n=(0,i.Z)(),s=n.lsp,c=n.lspnix,u=o.useState(null),l=(0,r.Z)(u,2),d=l[0],f=l[1];return o.useEffect((function(){var n;if(null!==t&&void 0!==t&&t.language)return t.language.startsWith("nix")?n=c.onClient(e,f):(s.getClient()&&f(s.getClient()),n=s.onClient(f)),function(){n(),f(null)}}),[s,c,e,null===t||void 0===t?void 0:t.language]),d}},50025:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(79056),o=n(67294);function i(e){var t=e.presence,n=o.useState(t.getActiveUsers()),i=(0,r.Z)(n,2),a=i[0],s=i[1];return o.useEffect((function(){return s(t.getActiveUsers()),t.onActiveUsersChange((function(e){return s(e)}))}),[t]),a}},68563:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(79056),o=n(67294),i=n(10257);function a(){var e=(0,i.Z)().presence,t=o.useState(e.getFollowedUser()),n=(0,r.Z)(t,2),a=n[0],s=n[1];return o.useEffect((function(){return s(e.getFollowedUser()),e.onFollowedUserChanged(s)}),[e]),a}},63258:function(e,t,n){var r;n.d(t,{z:function(){return r},u:function(){return o}}),function(e){e.COMMAND_BAR_TOGGLED="COMMAND_BAR_TOGGLED",e.DEEPLINK_CHANGED="DEEPLINK_CHANGED",e.SESSION_STATE_CHANGED="SESSION_STATE_CHANGED",e.PREVIEWED_FILE_CHANGED="PREVIEWED_FILE_CHANGED",e.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED",e.CURSOR_POSITION_CHANGED="CURSOR_POSITION_CHANGED",e.PREVIEWED_YOUTUBE_VIDEO_CHANGED="PREVIEWED_YOUTUBE_VIDEO_CHANGED",e.CONFIG_FILE_VISIBILITY_TOGGLED="CONFIG_FILE_VISIBILITY_TOGGLED",e.RESOURCE_MONITORING_STATE_CHANGED="RESOURCE_MONITORING_STATE_CHANGED"}(r||(r={}));var o=2e3},68047:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(54619);function o(){var e=(0,r.Z)(),t=e.openFiles,n=e.activeTab;return t[n]?t[n]:null}},54619:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(79056),o=n(67294),i=n(10257);function a(){var e=(0,i.Z)().session,t=o.useState(e.getState()),n=(0,r.Z)(t,2),a=n[0],s=n[1];return o.useEffect((function(){return s(e.getState()),e.onSessionStateChanged(s)}),[e]),a}},32523:function(e,t,n){n.d(t,{X:function(){return i},z:function(){return a}});var r=n(67294),o=r.createContext(null);function i(){return r.useContext(o)}var a=o.Provider},39084:function(e,t,n){n.d(t,{rk:function(){return I},xW:function(){return U},e$:function(){return T}});var r=n(92809),o=n(79056),i=n(45187),a=n(67294),s=n(32523),c=n(93096),u=n.n(c),l=n(73935),d=n(70917),f=n(61909),p=n(82457),h=n(2876),g=n(35944);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e){var t=e.targetElement,n=(0,a.useState)(null),r=n[0],o=n[1],i=(0,f.Z)((function(){t&&o({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),{type:"throttle",wait:100});if((0,a.useEffect)((function(){t&&i(t)}),[t,i]),(0,a.useEffect)((function(){if(t){var e=u()((function(){o({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),100);return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}}),[t]),!r||!t)return null;var s=(0,d.iv)({backgroundColor:p.TV.backgroundOverlay,zIndex:h.n+1,position:"fixed",transition:"all 0.5s ease-out"},"","");return(0,l.createPortal)((0,g.BX)(g.HY,{children:[(0,g.tZ)("div",{css:[y(m({side:"left-top"},r)),s,"",""]}),(0,g.tZ)("div",{css:[y(m({side:"top-right"},r)),s,"",""]}),(0,g.tZ)("div",{css:[y(m({side:"right-bottom"},r)),s,"",""]}),(0,g.tZ)("div",{css:[y(m({side:"bottom-left"},r)),s,"",""]})]}),document.body)}function y(e){var t=e.side,n=e.rect,r=e.docWidth,o=e.docHeight;switch(t){case"left-top":return(0,d.iv)({top:0,left:0,width:Math.max(0,n.left),height:Math.max(0,n.bottom)},"","");case"top-right":return(0,d.iv)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.left),"px)"),height:Math.max(0,n.top)},"","");case"right-bottom":return(0,d.iv)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.right),"px)"),height:"calc(".concat(o,"px - ").concat(Math.max(0,n.top),"px)")},"","");case"bottom-left":return(0,d.iv)({bottom:0,left:0,width:Math.max(0,n.right),height:"calc(".concat(o,"px - ").concat(Math.max(0,n.bottom),"px)")},"","")}}var w=n(21932),x=n(18177),E=n(77294),k=n(94573);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e){var t=e.targetElement,n=e.activeStep,r=e.goto,o=e.currentStepIndex,i=e.totalSteps,s=e.done,c=e.disableAnimation,u=(0,a.useState)(null),p=u[0],v=u[1],m=(0,a.useState)(null),b=m[0],y=m[1],O=(0,E.D)(t,p,{placement:"auto-start",modifiers:[{name:"arrow",options:{element:b,padding:8}},{name:"offset",options:{offset:[20,16]}},{name:"computeStyles",options:{adaptive:!1}}]}),j=(0,f.Z)((function(){var e;null===(e=O.update)||void 0===e||e.call(O)}),{type:"throttle",wait:100});return(0,a.useEffect)((function(){j(t)}),[t,j]),(0,l.createPortal)((0,g.BX)("div",S(S({ref:v,style:O.styles.popper,css:(0,d.iv)({transition:c?"all":"all 0.5s ease-out",zIndex:h.n+2,width:320},"","")},O.attributes.popper),{},{children:[(0,g.tZ)(x.Z,{title:n.title,content:n.content,onDismiss:function(){s()},currentStepIndex:o,onCurrentStepChange:r,totalSteps:i}),(0,g.tZ)("span",{style:O.styles.arrow,css:[w.wk,{"&::after":{backgroundColor:k.Br.primary.dimmest,border:"1px solid "+k.Br.primary.dimmer}},"",""],ref:y})]})),document.body)}function Z(){var e=(0,s.X)();if(!e)return null;var t=e.activeStep,n=e.goto,r=e.steps,o=e.done;return(0,g.tZ)(h.Z,{preventClose:!0,isOpen:Boolean(t.isModal),onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,children:(0,g.tZ)(x.Z,{title:t.title,content:t.content,onDismiss:function(){o()},currentStepIndex:r.findIndex((function(e){return t.id===e.id})),onCurrentStepChange:n,totalSteps:r.length})})}var C=n(25108);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){var t,n=e.children,c=e.tour,u=e.isDoneInitialOverride,l=e.onStep,d=e.onDone,f=(0,a.useState)(c.steps[0]),p=f[0],h=f[1],v=(0,a.useState)({}),m=v[0],y=v[1],w=function(e,t){var n,r=(0,i.PpL)({variables:{tours:e}}),s=r.data,c=r.loading,u=(0,i.oep)({variables:{name:e},optimisticResponse:{markTourAsSeen:{__typename:"TourSeen",id:e,seen:!0}}}),l=(0,o.Z)(u,1)[0],d=(0,a.useState)(t),f=d[0],p=d[1],h=Boolean(null===s||void 0===s||null===(n=s.currentUser)||void 0===n?void 0:n.toursSeen[0].seen);return"boolean"===typeof f&&(h=f),{isLoading:c,isDone:h,setIsDone:function(e){p(e),e&&l()}}}(c.id,u),x=w.isDone,E=w.isLoading,k=w.setIsDone,O=c.steps.findIndex((function(e){return p.id===e.id}));if(-1===O)throw new Error("Current tour step is not in tour steps");function S(){k(!0),null===d||void 0===d||d(p.id)}var P=(0,a.useRef)();function I(e){P.current=p,null===l||void 0===l||l(e.id),h(e)}function T(e){var t;if("number"===typeof e)t=e;else{var n=e;t=c.steps.findIndex((function(e){return n===e.id}))}if(!(t<0||t>=c.steps.length)){for(var r=c.steps[t],o=t<O;!m[r.id]&&r.autoSkipIfNoTarget;){if((t=o?t-1:t+1)<0||t>=c.steps.length)return;r=c.steps[t]}I(r)}}function _(){T(0),k(!1)}var A=(0,a.useCallback)((function(e,t){var n=c.steps.findIndex((function(t){return e===t.id}));if(-1===n)throw new Error("Invalid step id");if(c.steps[n].isModal)throw new Error("Trying to set a target element for a modal step");y((function(n){return n[e]===t?n:D(D({},n),{},(0,r.Z)({},e,t))}))}),[c]),R=m[p.id],N=!x&&!E;window.startTour=function(){C.log("starting tour:",c.id,"from",c.steps[0].id),_()};var U=c.steps.filter((function(e){return!e.autoSkipIfNoTarget||Boolean(m[e.id])})),L=U.findIndex((function(e){return p.id===e.id}));return(0,g.BX)(s.z,{value:D(D({},c),{},{setStepTargetElement:A,activeStep:p,next:function(){var e=c.steps[O+1];if(e&&e.autoSkipIfNoTarget)for(var t=O+1;e&&e.autoSkipIfNoTarget&&!m[e.id];)t++,e=c.steps[t];e?I(e):S()},prev:function(){var e=c.steps[O-1];if(e&&e.autoSkipIfNoTarget)for(var t=O-1;e&&e.autoSkipIfNoTarget&&!m[e.id];)t--,e=c.steps[t];e&&I(e)},goto:T,isDone:x,isLoading:E,done:S,restart:_}),children:[N&&p.isModal?(0,g.tZ)(Z,{}):null,N&&R?(0,g.BX)(g.HY,{children:[(0,g.tZ)(b,{targetElement:R}),(0,g.tZ)(j,{targetElement:R,activeStep:p,currentStepIndex:L,done:S,goto:function(e){T(e+O-L)},totalSteps:U.length,disableAnimation:Boolean(0===O||(null===(t=P.current)||void 0===t?void 0:t.isModal))})]}):null,n]})}function T(e){var t=(0,s.X)(),n=(0,a.useCallback)((function(n){null===t||void 0===t||t.setStepTargetElement(e,n)}),[e,null===t||void 0===t?void 0:t.setStepTargetElement]);return t&&t.steps.some((function(t){return t.id===e}))?{delegateTooltip:n,isActive:!t.isLoading&&!t.isDone&&t.activeStep.id===e,activeStep:t.activeStep,done:t.done,goto:t.goto,id:t.id,isDone:t.isDone,isLoading:t.isLoading,next:t.next,prev:t.prev,restart:t.restart,steps:t.steps}:null}var _=n(59864),A=(0,n(49512).K)("span");function R(e){return 1===a.Children.count(e)&&!_.isFragment(e)&&_.isElement(e)&&("string"===typeof e.type||_.isForwardRef(e))}var N=function(){};function U(e){var t=e.stepId,n=e.children,r=T(t),o=r?r.delegateTooltip:N,i=(0,a.useCallback)((function(e){if(o(e),R(n)){var t=a.Children.only(n),r=t.ref||t.props.ref;r&&("function"===typeof r?r(e):"object"===typeof r&&"current"in r&&(r.current=e))}}),[o,n]);if(!n||0===a.Children.count(n))return(0,g.tZ)(g.HY,{children:n});if(!r)return(0,g.tZ)(g.HY,{children:n});if(R(n)){var s=a.Children.only(n);return(0,a.cloneElement)(s,{ref:i})}return(0,g.tZ)(A,{ref:i,children:n})}},14256:function(e,t){t.Z={brand:{darkBlue:"#0D101E",lightBlue:"#68CDEE",gray:"#6D7D84"},main:{green:{dark:"#0A6640",default:"#0F9960",light:"#3DCC91",25:"rgba(15,153,96,0.25)",15:"rgba(15,153,96,0.15)"},red:{dark:"#A82A2A",default:"#DB3737",light:"#FF7373",25:"rgba(219, 55, 55, 0.25)",15:"rgba(219, 55, 55, 0.15)"},blue:{dark:"#0068AD",default:"#0097FB",light:"#73C4FA",25:"rgba(0, 151, 251, 0.25)",15:"rgba(0, 151, 251, 0.15)"},orange:{dark:"#A14809",default:"#E16D1A",light:"#FC9C58",25:"rgba(225, 109, 26, 0.25)",15:"rgba(225, 109, 26, 0.15)"},purple:{dark:"#6213B1",default:"#9D43F7",light:"#BF80FF",25:"rgba(98, 19, 177, 0.25)",15:"rgba(98, 19, 177, 0.15)"},gold:{dark:"#A67908",default:"#D99E0B",light:"#FFC940",25:"rgba(217, 158, 11, 0.25)",15:"rgba(217, 158, 11, 0.15)"}},neutrals:{black:"#21242C",white:"#FFFFFF",offWhite:"#F7F8FA",black64:"rgba(33, 36, 44, 0.64)",black50:"rgba(33, 36, 44, 0.50)",black16:"rgba(33, 36, 44, 0.16)",black8:"rgba(33, 36, 44, 0.08)",white64:"rgba(255, 255, 255, 0.64)",white50:"rgba(255, 255, 255, 0.50)",white16:"rgba(255, 255, 255, 0.16)",white8:"rgba(255, 255, 255, 0.08)"},multiplayer:{green:"#1BC47D",red:"#EF5533",blue:"#18A0FB",gold:"#FFC700",purple:"#907CFF",teal:"#00B5CE",pink:"#EE46D3"},languages:{java:"#b07219",scheme:"#1e4aec",clojure:"#db5855",haskell:"#5e5086",lua:"#000080",ruby:"#701516",python:"#3572A5",go:"#00ADD8",cpp:"#f34b7d",c:"#555555","c#":"#178600","f#":"#b845fc",rust:"#dea584",swift:"#ffac45",r:"#198CE7",bash:"#000000",crystal:"#000100",julia:"#a270ba",elixir:"#6e4a7e",nim:"#37775b",dart:"#00B4AB",erlang:"#B83998",typescript:"#2b7489",elisp:"#c065db",sql:"#e34c26",php:"#4F5D95",html:"#e34c26",css:"#563d7c",javascript:"#f1e05a"}}},16289:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(92809),o=(n(67294),n(96622)),i=n(35944);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,i.tZ)(o.Z,s(s({},e),{},{children:(0,i.tZ)("path",{d:"M12 7V12.3333L16 15M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},74834:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(92809),o=(n(67294),n(96622)),i=n(35944);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,i.BX)(o.Z,s(s({strokeWidth:3},e),{},{children:[(0,i.tZ)("path",{d:"M9.9 4.24002C10.5883 4.0789 11.2931 3.99836 12 4.00003C19 4.00003 23 12 23 12C22.393 13.1356 21.6691 14.2048 20.84 15.19M14.12 14.12C13.8454 14.4148 13.5141 14.6512 13.1462 14.8151C12.7782 14.9791 12.3809 15.0673 11.9781 15.0744C11.5753 15.0815 11.1752 15.0074 10.8016 14.8565C10.4281 14.7056 10.0887 14.4811 9.80385 14.1962C9.51897 13.9113 9.29439 13.572 9.14351 13.1984C8.99262 12.8249 8.91853 12.4247 8.92563 12.0219C8.93274 11.6191 9.02091 11.2219 9.18488 10.8539C9.34884 10.4859 9.58525 10.1547 9.88 9.88003M17.94 17.94C16.2306 19.243 14.1491 19.9649 12 20C5 20 1 12 1 12C2.24389 9.68192 3.96914 7.65663 6.06 6.06003L17.94 17.94Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.tZ)("path",{d:"M1 1L23 23",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},55994:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(92809),o=(n(67294),n(96622)),i=n(35944);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,i.tZ)(o.Z,s(s({},e),{},{children:(0,i.tZ)("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8M14 2L20 8M14 2V8H20M12 18V12M9 15H15",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},90101:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(92809),o=(n(67294),n(96622)),i=n(35944);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,i.tZ)(o.Z,s(s({},e),{},{children:(0,i.tZ)("path",{d:"M12 11V17M9 14H15M22 19C22 19.5304 21.7893 20.0391 21.4142 20.4142C21.0391 20.7893 20.5304 21 20 21H4C3.46957 21 2.96086 20.7893 2.58579 20.4142C2.21071 20.0391 2 19.5304 2 19V5C2 4.46957 2.21071 3.96086 2.58579 3.58579C2.96086 3.21071 3.46957 3 4 3H9L11 6H20C20.5304 6 21.0391 6.21071 21.4142 6.58579C21.7893 6.96086 22 7.46957 22 8V19Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},46379:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(92809),o=(n(67294),n(96622)),i=n(35944);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(0,i.tZ)(o.Z,s(s({},e),{},{children:(0,i.tZ)("path",{d:"M22.9999 4.00001V10M22.9999 10H16.9999M22.9999 10L18.3699 5.64001C16.9905 4.25975 15.1999 3.3652 13.2678 3.09116C11.3358 2.81711 9.36705 3.17843 7.65823 4.12065C5.94942 5.06288 4.59313 6.53496 3.79374 8.31508C2.99436 10.0952 2.79519 12.0869 3.22625 13.9901C3.6573 15.8932 4.69524 17.6047 6.18363 18.8667C7.67203 20.1286 9.53026 20.8726 11.4783 20.9866C13.4263 21.1006 15.3586 20.5783 16.984 19.4985C18.6094 18.4187 19.8399 16.8399 20.4899 15",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},34897:function(e,t,n){var r=n(67294).createContext(null);t.Z=r},56568:function(e,t,n){n.d(t,{Z:function(){return ge}});var r=n(91077),o=n(30268),i=n(92953),a=n(92809),s=n(68216),c=n(25997),u=n(67294),l=n(71371);var d=function(e,t,n,r){return function(o){return function(i){return function(a){i(a);var s=o.getState();if(s)for(var c=s.plugins,u=Object.keys(c),l=function(){var i=f[d];if(a.pud&&a.pud!==i)return"continue";var c=s.plugins[i];if(c.broken)return"continue";var u=c.type,l=n[u];if(l)try{var p=l(t,i,a);if(p){var h=e(i).dispatch(p);h&&"object"===typeof h&&"function"===typeof h.catch&&h.catch((function(e){o.dispatch({type:"PLUGIN_BROKE",pud:i,message:e.toString()}),r({error:e,pluginType:u,source:"receiver",pud:i})}))}}catch(g){o.dispatch({type:"PLUGIN_BROKE",pud:i,message:g.toString()}),r({error:g,pluginType:u,source:"receiver",pud:i})}},d=0,f=u;d<f.length;d++)l()}}}},f=n(97131),p=n(17120);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===n.length)return t;var r=(0,p.Z)(n),o=r[0],i=r.slice(1);return e(t[o],i)},m=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;if(0===n.length)return r;var o=(0,p.Z)(n),i=o[0],s=o.slice(1);return Array.isArray(t)?(t[i]=e(t[i],s,r),t):g(g({},t),{},(0,a.Z)({},i,e(t[i],s,r)))};var b=function(e,t,n){function r(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;for(var i in r)if(!o.pud||o.pud===i){var s=r[i];if(!s.broken){var c=t[s.type];if(c)if("PLUGIN_BROKE"!==o.type){var u=void 0;try{u=c(s.state,g(g({},o),{},{wid:e}))}catch(l){r=g(g({},r),{},(0,a.Z)({},i,g(g({},s),{},{broken:!0,errorMessage:l.toString()}))),n({error:l,pluginType:s.type,source:"reducer",pud:i});continue}u!==s.state&&(r=g(g({},r),{},(0,a.Z)({},i,g(g({},s),{},{state:u}))))}else r=g(g({},r),{},(0,a.Z)({},i,g(g({},s),{},{broken:!0,errorMessage:o.message})))}}return r}function o(e,t){switch(t.type){case"UPDATE_LAYOUT":return g(g({},e),m(e,t.path.concat(t.property||[]),t.to));case"SET_ACTIVE_TAB":return g(g({},e),m(e,t.path.concat("active"),t.tabIndex));case"SET_SPLIT_POSITION":return g(g({},e),m(e,t.path.concat("position"),t.position));case"NEW_TAB":if("tabs"!==v(e,t.path.concat("type"))){var r=new Error("trying to add tab to non tab component");return n({error:r,pluginType:"layout",pud:null,source:"reducer"}),e}var o=g(g({},e),m(e,t.path.concat("tabs"),[].concat((0,f.Z)(v(e,t.path.concat("tabs"))),[t.layout])));if(!t.setActiveTab)return o;var i=v(o,t.path.concat("tabs")).findIndex((function(e){return e.pud===t.layout.pud}));return g(g({},o),m(o,t.path.concat("active"),i));case"CLOSE_TAB":var s=v(e,t.path.concat("tabs")),c=t.tabIndex||s.findIndex((function(e){return e.pud===t.tabPud}));if(!s[c]){var u=new Error("trying to remove nonexistent tab");return n({error:u,pluginType:"layout",pud:null,source:"reducer"}),e}var l=v(e,t.path.concat("active")),d=l===c?Math.max(l-1,0):l,p=g(g({},e),m(e,t.path.concat("active"),d));return g(g({},p),m(p,t.path.concat("tabs"),(0,f.Z)(s.slice(0,c).concat(s.slice(c+1)))));case"LOAD_PLUGIN":return g(g({},e),{},{pluginTitles:g(g({},e.pluginTitles),{},(0,a.Z)({},t.pluginPud,t.title))});default:return e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{plugins:{},layout:{}},n=arguments.length>1?arguments[1]:void 0,i=r(e.plugins,n);i!==e.plugins&&(e=g(g({},e),{},{plugins:i}));var s=o(e.layout,n);switch(s!==e.layout&&(e=g(g({},e),{},{layout:s})),n.type){case"OPEN_FILE":return g(g({},e),{},{activeFile:n.path});case"MOVE_FILE":return e.activeFile===n.path?g(g({},e),{},{activeFile:n.to}):e;case"LOAD_PLUGIN":var c=t[n.pluginType];c||(c=function(e,t){});var u=n.initialState||{},l=c(void 0,{type:"@@INIT",initialState:u});return g(g({},e),{},{plugins:g(g({},e.plugins),{},(0,a.Z)({},n.pluginPud,{type:n.pluginType,state:l,isClosable:n.isClosable,isDraggable:n.isDraggable}))});case"UNLOAD_PLUGIN":return g(g({},e),{},{plugins:Object.keys(e.plugins).reduce((function(t,r){return r!==n.pud?g(g({},t),{},(0,a.Z)({},r,e.plugins[r])):t}),{})});default:return e}}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WORKSPACE":return t.state;case"CREATE_WORKSPACE":return{layout:t.layout,plugins:r(void 0,t),activeFile:t.activeFile};default:return i(e,t)}}},y=n(79056),w=n(82100),x=n(28955),E=n(85893),k=function(e){var t={strokeMiterlimit:10,fill:"none",stroke:e.color,strokeWidth:1};return(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:(0,E.jsxs)("g",{children:[(0,E.jsx)("line",{style:t,x1:"3",y1:"3",x2:"13",y2:"13"}),(0,E.jsx)("line",{style:t,x1:"13",y1:"3",x2:"3",y2:"13"})]})})};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(e){var t=e.onClick,n=e.onMouseDown,r=e.Icon,o=e.color,i=e.style;return(0,E.jsx)("button",{onClick:t,onMouseDown:n,style:S({color:"var(--foreground-default)",backgroundColor:"transparent",border:"none",cursor:"pointer",margin:"0",outline:"none",padding:"0"},i),children:(0,E.jsx)(r,{color:o})})},Z=function(e){var t=e.color;return(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8.467 10.583",children:(0,E.jsx)("path",{d:"M4.233.684L2.988 1.93l.374.374.607-.607V3.97H1.697l.607-.607-.374-.374L.684 4.233 1.93 5.48l.374-.374-.607-.607H3.97V6.77l-.607-.607-.374.374 1.245 1.245L5.48 6.537l-.374-.374-.607.607V4.498H6.77l-.607.607.374.374 1.245-1.246-1.245-1.245-.374.374.607.607H4.498V1.697l.607.607.374-.374z",fill:t,"white-space":"normal",overflow:"visible"})})},C={height:"12px",width:"12px",margin:"0 4px"},P=function(e){var t=e.isTabbed,n=e.isClosable,r=e.isDraggable,o=e.HeaderPlugin,i=e.onClose,a=e.onDrag;return(0,E.jsxs)(u.Fragment,{children:[o,(0,E.jsxs)("div",{style:{alignItems:"center",display:"flex",height:"100%",marginLeft:"auto"},children:[r&&!t&&(0,E.jsx)(j,{Icon:Z,onMouseDown:a,style:C}),n&&!t&&(0,E.jsx)(j,{Icon:k,onClick:i,style:C})]})]})},D=n(23495),I=n(38934);function T(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=1e5,L=32,F={width:"100%",height:"100%"},B=function(e){return e.getBoundingClientRect()},M=function(e,t){var n=t.px,r=t.pc;return{px:e.px+(n||0),pc:e.pc+(r||0)}},H=function(e,t){return{px:e.px*t,pc:e.pc*t}},z={px:0,pc:0},G=function(e){return{px:e,pc:0}},V=function(e){return{px:0,pc:e}},W=function(e){var t=e.px,n=e.pc;return 0===t&&0===n},X=function e(t,n,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{x:z,y:z,w:V(100),h:V(100),p:[]};if("tabs"===o.type){var s=o.active||0;r.push(N(N({},a),{},{h:G(L),tabs:o.tabs.map((function(e){return e.pud||e.type})),active:s}));for(var c=0;c<o.tabs.length;c++)e(t,n,r,N({},o.tabs[c]),i,N(N({},a),{},{p:[].concat((0,f.Z)(a.p),["tabs",c.toString()]),y:M(a.y,G(L)),h:c===s?M(a.h,G(-32)):z,w:c===s?a.w:z}))}if("split"===o.type){var u=void 0===o.position?50:o.position,l=!1;if("undefined"!==typeof o.fixed?l=o.fixed:("undefined"!==typeof o.leftSize||"undefined"!==typeof o.rightSize)&&(l=!0),"undefined"!==typeof o.leftSize&&"undefined"!==typeof o.rightSize)throw new Error("Cannot have both leftSize and rightSize specified");var d=null;if(0===u?d="left":100===u&&(d="right"),o.stacked){var p=!W(a.h)&&!l,h=H(a.h,u/100);o.rightSize?h=M(a.h,G(-o.rightSize)):o.leftSize?h=G(o.leftSize):"left"===d||W(a.h)?h=z:"right"===d&&(h=M(h,G(-8))),e(t,n,r,o.left,i,N(N({},a),{},{p:[].concat((0,f.Z)(a.p),["left"]),h:h}));var g=M(a.y,H(a.h,u/100));o.rightSize?g=M(a.y,h):o.leftSize?g=M(a.y,G(o.leftSize)):"left"===d?g=a.y:"right"===d&&p&&(g=M(g,G(-8)));var v=H(a.h,(100-u)/100);o.rightSize?v=G(o.rightSize):o.leftSize?v=M(a.h,G(-o.leftSize)):("right"===d||W(a.h))&&(v=z),e(t,n,r,o.right,i,N(N({},a),{},{p:[].concat((0,f.Z)(a.p),["right"]),y:p?M(g,G(8)):g,h:p?M(v,G(-8)):v})),p&&n.push(N(N({},a),{},{y:g,snapped:d,h:G(8),stacked:o.stacked}))}else{var m=!W(a.w)&&!l,b=H(a.w,u/100);o.rightSize?b=M(a.w,G(-o.rightSize)):o.leftSize?b=G(o.leftSize):"left"===d||W(a.w)?b=z:"right"===d&&(b=M(b,G(-8))),e(t,n,r,o.left,i,N(N({},a),{},{p:[].concat((0,f.Z)(a.p),["left"]),w:b}));var y=M(a.x,H(a.w,u/100));"left"===d?y=a.x:o.rightSize?y=M(a.x,b):o.leftSize?y=M(a.x,G(o.leftSize)):"right"===d&&(y=M(y,G(-8)));var w=H(a.w,(100-u)/100);o.rightSize?w=G(o.rightSize):o.leftSize?w=M(a.w,G(-o.leftSize)):("right"===d||W(a.w))&&(w=z),e(t,n,r,o.right,i,N(N({},a),{},{p:[].concat((0,f.Z)(a.p),["right"]),x:m?M(y,G(8)):y,w:m?M(w,G(-8)):w})),m&&n.push(N(N({},a),{},{x:y,snapped:d,w:G(8),stacked:o.stacked}))}}if("pane"===o.type){var E=o.header,k=o.pud,O=i[k]||{isDraggable:!1,isClosable:!1},S=x.JU(a.p),j=E||!S&&(O.isClosable||O.isDraggable),Z=j?E&&E.height||32:0;t.push({header:j&&{pud:E&&E.pud,p:N(N({},a),{},{h:G(Z)})},pud:k,p:N(N({},a),{},{y:M(a.y,G(Z)),h:M(a.h,G(-Z))}),isDraggable:O.isDraggable,isClosable:O.isClosable})}},Y=function(e){var t,n,r,o=e.stacked,i=e.onMouseDown,s=e.snapped,c=e.style,u=te(),l=(0,y.Z)(u,2),d=l[0],f=l[1],p=d?"var(--outline-default)":"var(--outline-dimmest)";s?(n="left"===s?o?"translate(0px, -2px) rotate(135deg)":"translate(-2px, 0px) rotate(45deg)":o?"translate(0px, 2px) rotate(-45deg)":"translate(2px, 0px) rotate(-135deg)",t={width:6,height:6,borderRight:"solid 1px ".concat(p),borderTop:"solid 1px ".concat(p),transition:"0.1s background-color",transform:n}):(r={backgroundColor:p,borderRadius:"var(--border-radius-4)"},(0,a.Z)(r,o?"height":"width",2),(0,a.Z)(r,o?"width":"height",25),(0,a.Z)(r,"transition","0.1s background-color"),t=r);return(0,E.jsx)("div",N(N({},f),{},{onMouseDown:i,onTouchStart:i,style:N({position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",flex:"1 0 auto",overflow:"hidden",borderRadius:"var(--border-radius-4)",background:"var(--background-root)",cursor:o?"row-resize":"col-resize",zIndex:1},c),children:(0,E.jsx)("div",{style:t})}))},q=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;if(0===n.length)return r;var o=(0,p.Z)(n),i=o[0],s=o.slice(1);return Array.isArray(t)?(t[i]=e(t[i],s,r),t):N(N({},t),{},(0,a.Z)({},i,e(t[i],s,r)))},J=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===n.length)return t;var r=(0,p.Z)(n),o=r[0],i=r.slice(1);return e(t[o],i)},K=function(e){(0,r.Z)(n,e);var t=A(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={protectEvents:!1,newLayout:null,debug:!1,dragging:null,resizing:null,layout:e.props.store.getState().layout,plugins:e.props.store.getState().plugins},e.getPluginComponent=function(t,n){var r=e.state.plugins[n],o=e.props,i=o.pluginComponents,a=o.wid,s=null;return s=r?r.broken?(0,E.jsx)(Q,{handleError:function(t){return e.handleError({error:t,pluginType:r.type,source:"component",pud:n})},message:r.errorMessage||"Plugin broken with no error :/"}):(s=i[r.type])?(0,E.jsx)(s,{wid:a,pud:n,dimensions:e.getPluginDims(n,{w:t.w,h:t.h}),style:F}):(0,E.jsx)(Q,{handleError:function(t){return e.handleError({error:t,pluginType:r.type,source:"component",pud:n})},message:"No plugin component by the name ".concat(n)}):(0,E.jsx)(Q,{handleError:function(t){return e.handleError({error:t,pluginType:"none",source:"component",pud:n})},message:"No known plugin by the name ".concat(n)})},e.onResizerDown=function(t,n,r){var o=t.target;e.setState({protectEvents:!0,resizing:{stacked:r}}),t.preventDefault(),t.stopPropagation();var i=0;!function t(n,o){if("pane"===n.type){var a=e.nodes[o.join(".")].ref;if(!a)return;i+=r?B(a).height:B(a).width}else if("split"===n.type)n.stacked===r?(t(n.left,[].concat((0,f.Z)(o),["left"])),t(n.right,[].concat((0,f.Z)(o),["right"]))):t(n.left,[].concat((0,f.Z)(o),["left"]));else if("tabs"===n.type){var s=n.active||0;t(n.tabs[s],[].concat((0,f.Z)(o),["tabs",s.toString()]))}}(J(e.state.layout,["tiling"].concat((0,f.Z)(n))),n),i+=8;var a=r?B(o).top:B(o).left,s=J(e.state.layout,["tiling"].concat((0,f.Z)(n),["position"]));"number"!==typeof s&&(s=50);var c=function(t){t.preventDefault(),t.stopPropagation();var o,c=t.touches?t.touches[0]:t,u=(r?c.pageY:c.pageX)-a,l=i*(s/100)+u;o=l>i-32?100:l<32?0:l/i*100,e.setState({newLayout:q(e.state.layout,["tiling"].concat((0,f.Z)(n),["position"]),o)})},u=function t(){document.removeEventListener("touchmove",c),document.removeEventListener("mousemove",c),document.removeEventListener("touchend",t),document.removeEventListener("mouseup",t),e.setState({protectEvents:!1,resizing:null}),null!==e.state.newLayout&&(e.props.store.dispatch({type:"SET_SPLIT_POSITION",position:J(e.state.newLayout,["tiling"].concat((0,f.Z)(n),["position"])),path:["tiling"].concat((0,f.Z)(n))}),e.setState({newLayout:null}))};document.addEventListener("touchmove",c),document.addEventListener("mousemove",c),document.addEventListener("touchend",u),document.addEventListener("mouseup",u)},e.onDrag=function(t,n){t.stopPropagation(),t.preventDefault();var r=t.pageX,o=t.pageY,i=null,a=[];for(var s in e.nodes){var c=e.nodes[s];if(c.ref){var u=B(c.ref),l=u.top,d=u.left,f=u.width,p=u.height,h={p:c.p,x:d,y:l,w:f,h:p,pud:c.pud};c.pud===n?i=h:a.push(h)}}e.setState({protectEvents:!0});var g=function(t){t.preventDefault(),t.stopPropagation();var s,c=t.pageX,u=t.pageY,l={target:null,side:"bottom",left:c,top:u},d=T(a);try{for(d.s();!(s=d.n()).done;){var f=s.value;if((e.state.plugins[f.pud]||{}).isDraggable&&(c>f.x&&c<f.x+f.w&&u>f.y&&u<f.y+f.h)){var p=c-f.x,h=f.x+f.w-c,g=u-f.y,v=f.y+f.h-u,m=Math.min(p,h,g,v);l.target=f.pud,m===p?l.side="left":m===h?l.side="right":m===g&&(l.side="top");break}}}catch(w){d.e(w)}finally{d.f()}var b=c-r,y=u-o;l.left=i.x+b,l.top=i.y+y,e.setState({dragging:N({pud:n,width:i.w,height:i.h},l)})};document.addEventListener("mousemove",g),document.addEventListener("mouseup",(function t(){e.state.dragging&&e.state.dragging.target&&e.props.store.dispatch($({pud:n,side:e.state.dragging.side,target:e.state.dragging.target})),e.setState({protectEvents:!1,dragging:null}),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",t)}))},e.nodes={},e.dimMap={},e.getPluginDims=function(t,n){var r=e.dimMap[t];return r&&r.h.pc===n.h.pc&&r.h.px===n.h.px&&r.w.pc===n.h.pc&&r.w.px===n.w.px?r:(e.dimMap[t]=n,n)},e}return(0,c.Z)(n,[{key:"cancelContextMenuIntercept",value:function(e){e.shiftKey&&e.altKey&&e.preventDefault()}},{key:"componentDidMount",value:function(){this.isWeMounted=!0,this.subscribe(),document.addEventListener("contextmenu",this.cancelContextMenuIntercept)}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe(),document.removeEventListener("contextmenu",this.cancelContextMenuIntercept),this.isWeMounted=!1}},{key:"subscribe",value:function(){var e=this,t=this.props.store;this.unsubscribe=t.subscribe((function(){var n=t.getState(),r=n.layout,o=n.plugins;e.isWeMounted&&e.setState((function(e){for(var t in e.plugins){if(!o[t])return{layout:r,plugins:o};if(o[t].broken!==e.plugins[t].broken)return{layout:r,plugins:o}}return e.layout===r?null:{layout:r,plugins:o}}))}))}},{key:"shouldComponentUpdate",value:function(e,t){if(this.state!==t)return!0;for(var n in this.props)if(this.props[n]!==e[n])return!0;return!1}},{key:"onMaybeDrag",value:function(e,t){var n=this.state.plugins[t]&&this.state.plugins[t].isDraggable;(e.altKey||e.shiftKey)&&n&&this.onDrag(e,t)}},{key:"closeTabbedPlugin",value:function(e){var t=e.path,n=e.tabIndex,r=e.activeTabIndex;return function(e,o){var i=o().layout,a=x.QK(i,t).tabs,s=a[n].pud;if(e({type:"CLOSE_TAB",path:t,tabIndex:n}),a.length-1===0)e(N({type:"UPDATE_LAYOUT"},x.Od({layout:i,nodePath:t})));else if(n<=r){e({type:"SET_ACTIVE_TAB",tabIndex:Math.max(r-1,0),path:t})}e({type:"PLUGIN_CLOSED",closedPud:s})}}},{key:"closePlugin",value:function(e){var t=e.pud;return function(e,n){var r=n().layout;e(N({type:"UPDATE_LAYOUT"},x.Od({layout:r,pud:t}))),e({type:"PLUGIN_CLOSED",closedPud:t})}}},{key:"getPaneStyles",value:function(e,t){var n=W(t.w)||W(t.h),r=t.p.includes("tabs");return e?{opacity:.75,overflow:"hidden",visibility:n?"hidden":void 0,height:this.state.dragging.height,position:"absolute",left:0,top:0,transform:"translate(".concat(this.state.dragging.left,"px, ").concat(this.state.dragging.top-(t.h.px>0?t.h.px:0),"px)"),width:this.state.dragging.width,zIndex:99999,transition:"opacity 0.2s, max-width 0.2s, max-height 0.2s",maxWidth:"100vw",maxHeight:"100vh"}:{position:"absolute",visibility:n&&!r?"hidden":void 0,display:n&&r?"none":void 0,height:"calc(".concat(t.h.pc,"% + ").concat(t.h.px,"px)"),width:"calc(".concat(t.w.pc,"% + ").concat(t.w.px,"px)"),left:"calc(".concat(t.x.pc,"% + ").concat(t.x.px,"px)"),top:"calc(".concat(t.y.pc,"% + ").concat(t.y.px,"px)"),opacity:"1",transition:"opacity 0.2s, max-width 0.2s, max-height 0.2s",maxWidth:"100vw",maxHeight:"100vh"}}},{key:"render",value:function(){var e=this,t=this.state.newLayout||this.state.layout,n=t.tiling,r=t.floating,o=this.state.plugins,i=[],a=[],s=[];X(i,a,s,n,o);var c="default";return this.state.resizing?c=this.state.resizing.stacked?"row-resize":"col-resize":this.state.dragging&&(c="grabbing"),(0,E.jsxs)("div",{style:{height:"100%",width:"100%",position:"absolute"},children:[i.map((function(t){var n=t.pud,r=t.p,o=t.header,i=t.isClosable,a=t.isDraggable,s=e.state.plugins[n]||{},c=e.state.plugins[o&&o.pud]||{},l=o&&o.p.h.px,d=o&&o.pud&&(0,E.jsx)(Q,{handleError:function(t){return e.props.handleError({error:t,pluginType:c.type,source:"component",pud:n})},message:c.broken?c.errorMessage:void 0,children:(0,E.jsx)(w.zt,{store:e.props.classicStoreFor(n),children:e.getPluginComponent(o.p,o.pud)})}),f=e.state.dragging&&e.state.dragging.pud===n;return(0,E.jsxs)(u.Fragment,{children:[o&&(0,E.jsx)("div",{className:"WHO AM  I??",style:N(N({},e.getPaneStyles(f,o.p)),{},{backgroundColor:"var(--background-default)",color:"var(--foreground-default)",height:"".concat(l,"px"),alignItems:"center",display:"flex",justifyContent:"spaceBetween"}),children:(0,E.jsx)(P,{HeaderPlugin:d,isClosable:i,isDraggable:a,isTabbed:x.JU(r.p),onClose:function(){e.props.store.dispatch(e.closePlugin({pud:n}))},onDrag:function(t){return e.onDrag(t,n)}})}),(0,E.jsxs)("div",{ref:function(t){return e.nodes[r.p.join(".")]={ref:t,p:r,pud:n}},style:N(N({},e.getPaneStyles(f,r)),{},{borderRadius:"var(--border-radius-4)",boxShadow:f?"var(--shadow-2)":"none"}),onMouseDown:function(t){return e.onMaybeDrag(t,n)},children:[e.state.debug?(0,E.jsxs)("div",{style:{backgroundColor:"hsl(".concat(n.split("").map((function(e){return e.charCodeAt(0)})).reduce((function(e,t){return e+t})),", 50%, 50%)"),width:"100%",height:"100%",border:"inset 5px"},children:[n,(0,E.jsxs)("pre",{children:["x: ","calc(".concat(r.x.pc,"% + ").concat(r.x.px,"px)"),(0,E.jsx)("br",{}),"y: ","calc(".concat(r.y.pc,"% + ").concat(r.y.px,"px)"),(0,E.jsx)("br",{}),"w: ","calc(".concat(r.w.pc,"% + ").concat(r.w.px,"px)"),(0,E.jsx)("br",{}),"h: ","calc(".concat(r.h.pc,"% + ").concat(r.h.px,"px)"),(0,E.jsx)("br",{}),"p: ",r.p.join(" ")]})]}):(0,E.jsx)(Q,{handleError:function(t){return e.props.handleError({error:t,pluginType:s.type,source:"component",pud:n})},message:s.broken?s.errorMessage:void 0,children:(0,E.jsx)(w.zt,{store:e.props.classicStoreFor(n),children:e.getPluginComponent(r,n)})}),e.state.dragging&&e.state.dragging.target===n?(0,E.jsx)("div",{style:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"rgba(127, 127, 127, 0.6)",transition:"transform 0.2s",transformOrigin:"top left",transform:"translate(".concat("right"===e.state.dragging.side?"50%":0,", ").concat("bottom"===e.state.dragging.side?"50%":0,") ").concat("left"===e.state.dragging.side||"right"===e.state.dragging.side?"scaleX(.5)":"scaleY(.5)")}}):null]})]},n)})),this.state.protectEvents&&(0,E.jsx)("div",{style:{zIndex:U,position:"absolute",top:0,bottom:0,left:0,right:0,cursor:c}}),a.map((function(t,n){var r=t.x,o=t.y,i=t.w,a=t.h,s=t.p,c=t.snapped,u=t.stacked;return(0,E.jsx)(Y,{onMouseDown:function(t){return e.onResizerDown(t,s,u)},snapped:c,stacked:u,style:{left:"calc(".concat(r.pc,"% + ").concat(r.px,"px)"),top:"calc(".concat(o.pc,"% + ").concat(o.px,"px)"),width:"calc(".concat(i.pc,"% + ").concat(i.px,"px)"),height:"calc(".concat(a.pc,"% + ").concat(a.px,"px)")}},n)})),s.map((function(t,n){var r=t.x,o=t.y,i=t.w,a=t.h,s=t.p,c=t.tabs,u=t.active;return(0,E.jsx)(ee,{tabsMetadata:c.map((function(t){if("split"===t){var r=J(e.state.layout,["tiling"].concat((0,f.Z)(s),["tabs"]))[n];t=r.left.pud||r.right.pud}return{title:e.state.layout.pluginTitles[t]||"untitled",isClosable:e.state.plugins[t]&&e.state.plugins[t].isClosable}})),active:u,setActive:function(t){return e.props.store.dispatch((function(e,n){var r=n(),o=["tiling"].concat((0,f.Z)(s));"shell"===J(r.layout,o.concat("tabs"))[t].pud&&(0,I.track)(I.events.SHELL_OPENED),e({type:"SET_ACTIVE_TAB",tabIndex:t,path:o})}))},close:function(t){var n=["tiling"].concat((0,f.Z)(s));e.props.store.dispatch(e.closeTabbedPlugin({path:n,tabIndex:t,activeTabIndex:u}))},style:{position:"absolute",left:"calc(".concat(r.pc,"% + ").concat(r.px,"px)"),top:"calc(".concat(o.pc,"% + ").concat(o.px,"px)"),width:"calc(".concat(i.pc,"% + ").concat(i.px,"px)"),height:"calc(".concat(a.pc,"% + ").concat(a.px,"px)")}},n)})),r.map((function(t){if(!e.state.plugins[t])return(0,E.jsx)(Q,{handleError:function(n){return e.props.handleError({error:n,pluginType:e.state.plugins[t].type,source:"component",pud:t})},message:"No plugin by the name ".concat(t)},t);var n=e.props.pluginComponents[e.state.plugins[t].type];return n?(0,E.jsx)(Q,{handleError:function(n){return e.props.handleError({error:n,pluginType:e.state.plugins[t].type,source:"component",pud:t})},children:(0,E.jsx)(w.zt,{store:e.props.classicStoreFor(t),children:(0,E.jsx)(n,{wid:e.props.wid,pud:t},t)})},t):(0,E.jsx)(Q,{handleError:function(n){return e.props.handleError({error:n,pluginType:e.state.plugins[t].type,source:"component",pud:t})},message:"No component found for plugin by the name ".concat(t)},t)}))]})}}]),n}(u.Component);function $(e){var t=e.pud,n=e.side,r=e.target;return function(e,o){var i=o().layout,a=x.Bp(i,t),s=x.QK(i,a);e(N({type:"UPDATE_LAYOUT"},x.Od({layout:i,pud:t}))),i=o().layout;var c=x.Bp(i,r);if(c){x.JU(c)&&(c=x.Il(c));var u="leftOf";"right"===n?u="rightOf":"top"===n?u="above":"bottom"===n&&(u="below"),e(N({type:"UPDATE_LAYOUT"},x.$T(i,s.pud,u,c,{position:50})))}}}var Q=function(e){(0,r.Z)(n,e);var t=A(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hasError:!!e.props.message,error:new Error(e.props.message)},e}return(0,c.Z)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,info:t}),this.props.handleError(e)}},{key:"render",value:function(){return this.state.hasError?(0,E.jsxs)("div",{style:{background:"red",color:"white",width:"100%",height:"100%",padding:"0",margin:"0",overflow:"hidden"},children:[(0,E.jsx)("h1",{children:"This Plugin Crashed!"}),this.state.info&&(0,E.jsx)("pre",{children:this.state.info.componentStack||JSON.stringify(this.state.info)}),this.state.error&&(0,E.jsx)("pre",{children:this.state.error.toString()})]}):this.props.children||null}}]),n}(u.Component);function ee(e){var t=e.active,n=void 0===t?0:t,r=e.setActive,o=void 0===r?function(){}:r,i=e.close,a=void 0===i?function(){}:i,s=e.tabsMetadata,c=e.style;return(0,E.jsx)("div",{style:c,children:(0,E.jsx)("div",{style:{height:L,fontFamily:"'IBM Plex Sans', sansSerif",backgroundColor:"var(--background-root)",display:"flex",alignItems:"flex-end",position:"relative",zIndex:2},children:s.map((function(e,t){return(0,E.jsx)(re,{title:e.title,isClosable:e.isClosable,onClose:function(){return a(t)},onClick:function(){return o(t)},isActive:t===n},t)}))})})}function te(){var e=u.useState(!1),t=(0,y.Z)(e,2),n=t[0],r=t[1];return[n,{onMouseEnter:function(){r(!0)},onMouseLeave:function(){r(!1)}}]}function ne(e){var t=e.isHovering,n=e.isActive;return N(N({height:"100%",boxSizing:"border-box",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",padding:"var(--space-8)",backgroundColor:"var(--background-root)",color:"var(--foreground-dimmer)",fontSize:"var(--font-size-default)",fontFamily:"var(--font-family-default)",borderTopRightRadius:"var(--border-radius-4)",borderTopLeftRadius:"var(--border-radius-4)",cursor:"pointer",transition:"0.2s background-color"},t?{backgroundColor:"var(--background-root)",color:"var(--foreground-default)"}:{}),n?{backgroundColor:"var(--background-default)",color:"var(--foreground-default)"}:{})}function re(e){var t=e.isActive,n=e.onClick,r=e.title,o=e.isClosable,i=e.onClose,a=te(),s=(0,y.Z)(a,2),c=s[0],u=s[1];return(0,E.jsx)("div",N(N({},u),{},{style:ne({isHovering:c,isActive:t}),onClick:n,children:(0,E.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[(0,D.Qs)(r),o&&(0,E.jsx)(j,{onClick:function(e){e.stopPropagation(),i()},Icon:k,style:{height:"8px",width:"8px",padding:0,marginLeft:"7px"}})]})}))}var oe=K,ie=n(34897),ae=n(51595),se=n(25108);function ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}function ue(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=function(e){return function(t){return function(n){return"function"===typeof n?n(e.dispatch,e.getState):t(n)}}},he=["activeFile"],ge=function(){function e(){var t=this;(0,s.Z)(this,e),this.marshal=function(){var e=t.store.getState();return JSON.stringify(e)},this.unmarshal=function(e){var n=JSON.parse(e);t.store.dispatch({type:"SET_WORKSPACE",state:n})},this.bootstrap=function(e){t.store.dispatch(function(e){var t=e.wid,n=e.config;return function(e){for(var r in e({wid:t,type:"CREATE_WORKSPACE",language:n.language,layout:n.layout,activeFile:n.activeFile}),n.plugins)e(me({wid:t,pluginPud:r,pluginType:n.plugins[r].type,title:n.plugins[r].title,initialState:n.plugins[r].state,isClosable:n.plugins[r].isClosable,isDraggable:n.plugins[r].isDraggable}))}}({config:e}))},this.register=function(e,n){t.reducers[e]=n.reducer,t.recievers[e]=n.reciever||n.receiver,t.components[e]=n.Component},this.yikesInjectStore=function(e){t.yikesExtraStore=e},this.injectServices=function(e){t.services=e},this.handleError=function(e){var n=e.error,r=e.pluginType,o=e.source,i=e.pud;if(0===t.errorHandlers.length)return se.error("Plugin with type ",r," errored in ",o," error is: "),void se.error(n);t.errorHandlers.forEach((function(e){return e({error:n,pluginType:r,source:o,pud:i})}))},this.registerErrorHandler=function(e){return t.errorHandlers.push(e),function(){t.errorHandlers=t.errorHandlers.filter((function(t){return t!==e}))}},window.performance.clearMarks("create-workspace"),window.performance.mark("create-workspace"),this.wid=""+Math.random(),this.reducers={},this.recievers={},this.components={},this.pluginStores={},this.yikesExtraStore={getState:function(){return{}},subscribe:function(){return function(){}},dispatch:function(){}},this.errorHandlers=[];var n=[];this.govalConnectionStarted=null,this.classicStoreFor=function(e){var o={};if(t.pluginStores[e])return t.pluginStores[e];var i=t,s={getState:function(){return{get user(){return o.user=!0,i.yikesExtraStore.getState().user},get banners(){return o.banners=!0,i.yikesExtraStore.getState().banners},get replEnvironment(){return o.replEnvironment=!0,i.yikesExtraStore.getState().replEnvironment},get repls(){throw new Error("Please use repl shared reducer")},get replsByUrl(){throw new Error("Please use repl shared reducer")},get replsByUser(){throw new Error("Please use repl shared reducer")},get files(){throw new Error("Please use files shared reducer")},get messages(){return o.messages=!0,i.yikesExtraStore.getState().messages},get plans(){return o.plans=!0,i.yikesExtraStore.getState().plans},workspace:(0,a.Z)({},t.wid,t.store.getState()),get services(){return i.services}}},subscribe:function(n){var r={},i={},a=he.reduce((function(e,n){return e[n]=t.store.getState()[n],e}),{});return t.store.subscribe((function(){var s=t.store.getState().plugins[e];if(s!==r)return r=s,void n();var c=!1,u=t.yikesExtraStore.getState();for(var l in o)u[l]!==i[l]&&(i[l]=u[l],c=!0);var d=t.store.getState();for(var f in a)d[f]!==a[f]&&(a[f]=d[f],c=!0);c&&n()}))},dispatch:function(o){if(o.type){var i={};o.path&&(i={path:o.path}),l.n_({category:"redux",message:"workspace action",data:fe({type:o?o.type:null},i)})}if(o.wid||"function"===typeof o){var a,s=pe(t.classicStoreFor(e))(r(u)(c))(o),d=ue(n);try{for(d.s();!(a=d.n()).done;){a.value.cb()}}catch(f){d.e(f)}finally{d.f()}return s}return t.yikesExtraStore.dispatch(o)}};return t.pluginStores[e]=s,s};var r=d(this.classicStoreFor,this.wid,this.recievers,this.handleError),o=b(this.wid,this.reducers,this.handleError),i=o(void 0,{type:"@@INIT"}),c=function(e){i=o(i,e)},u={getState:function(){return i},subscribe:function(e){var t=function e(){n=n.filter((function(t){return t.unsub!==e}))};return n.push({cb:e,unsub:t}),t},dispatch:function(e){if(e.type){var t={};e.path&&(t={path:e.path}),l.n_({category:"redux",message:"workspace action",data:fe({type:e?e.type:null},t)})}var o,i=pe(u)(r(u)(c))(e),a=ue(n);try{for(a.s();!(o=a.n()).done;){o.value.cb()}}catch(s){a.e(s)}finally{a.f()}return i}};window.store=u,this.store=u}return(0,c.Z)(e,[{key:"component",value:function(){var e=this;return function(){return(0,E.jsx)(ie.Z.Provider,{value:e.wid,children:(0,E.jsx)(ve,{store:e.store,classicStoreFor:e.classicStoreFor,wid:e.wid,pluginComponents:e.components,handleError:e.handleError,govalConnectionStarted:e.govalConnectionStarted})})}}}]),e}(),ve=function(e){(0,r.Z)(n,e);var t=ce(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props.govalConnectionStarted;if(e){var t=window.performance.now()-e;ae.kg.info(I.events.GOVAL_TIME_TO_CONNECT,{time:t})}this.props.store.dispatch({type:"WORKSPACE_MOUNTED"})}},{key:"componentWillUnmount",value:function(){this.props.store.dispatch({type:"WORKSPACE_WILL_UNMOUNT"})}},{key:"render",value:function(){return(0,E.jsx)("div",{style:{height:"100%",position:"relative",display:"flex"},children:(0,E.jsx)(oe,{wid:this.props.wid,store:this.props.store,classicStoreFor:this.props.classicStoreFor,pluginComponents:this.props.pluginComponents,handleError:this.props.handleError})})}}]),n}(u.Component);function me(e){var t=e.wid,n=e.pluginPud,r=e.pluginType,o=e.title,i=e.initialState,a=e.isClosable,s=void 0!==a&&a,c=e.isDraggable;return{type:"LOAD_PLUGIN",wid:t,pluginPud:n,pluginType:r,title:o,initialState:i,isClosable:s,isDraggable:void 0!==c&&c}}},28955:function(e,t,n){n.d(t,{e$:function(){return l},$T:function(){return g},Od:function(){return v},PP:function(){return f},Bp:function(){return u},Jz:function(){return p},cV:function(){return h},i3:function(){return b},QK:function(){return m},Il:function(){return y},J9:function(){return w},JU:function(){return x}});var r=n(97131),o=n(17120),i=n(92809);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if("split"===e.type){var n=c(e.left,t);if(n)return["left"].concat(n);var r=c(e.right,t);if(r)return["right"].concat(r)}else if("tabs"===e.type)for(var o=0;o<e.tabs.length;o++){var i=c(e.tabs[o],t);if(i)return["tabs",o].concat(i)}else if("pane"===e.type&&e.pud===t)return[];return null}function u(e,t){for(var n=0;n<e.floating.length;n++)if(e.floating[n]===t)return["floating",n];var r=c(e.tiling,t);return r?["tiling"].concat(r):null}function l(e,t){return!!u(e,t)}function d(e,t,n){if("split"===e.type){var r=d(e.left,t,n);if(r)return["left"].concat(r);var o=d(e.right,t,n);if(o)return["right"].concat(o)}else if("tabs"===e.type)for(var i=0;i<e.tabs.length;i++){var a=d(e.tabs[i],t,n);if(a)return["tabs",i].concat(a)}else if("pane"===e.type){if(t[e.pud].type===n)return[];if(e.header&&t[e.header.pud].type===n)return["header"]}return null}function f(e,t,n){var r=d(e.tiling,t,n);return r?["tiling"].concat(r):null}function p(){return["tiling"]}function h(){return["floating"]}function g(e,t,n,r,o){if("inside"===n){if(1!==r.length||"floating"!==r[0])throw new Error("position 'inside' should only be used for the path ['floating']");return o&&o.once&&e.floating.includes(t)?{path:["floating"],to:e.floating}:{path:["floating"],to:e.floating.concat(t)}}var i={type:"split"};if("undefined"!==typeof o?"undefined"!==typeof o.position?i=s(s({},i),{},{fixed:!!o.fixed,position:o.position||50}):"undefined"!==typeof o.leftSize?i=s(s({},i),{},{leftSize:o.leftSize}):"undefined"!==typeof o.rightSize&&(i=s(s({},i),{},{rightSize:o.rightSize})):i=s(s({},i),{},{fixed:!1,position:50}),"leftOf"===n)i=s(s({},i),{},{stacked:!1,right:m(e,r),left:{type:"pane",pud:t}});else if("rightOf"===n)i=s(s({},i),{},{stacked:!1,right:{type:"pane",pud:t},left:m(e,r)});else if("above"===n)i=s(s({},i),{},{stacked:!0,left:{type:"pane",pud:t},right:m(e,r)});else{if("below"!==n)throw new Error("unsupported new plugin type");i=s(s({},i),{},{stacked:!0,right:{type:"pane",pud:t},left:m(e,r)})}return{path:r.map((function(e){return e.toString()})),to:i}}function v(e,t){var n,r=u(e,t);if(!r)return{path:["tiling"],to:e.tiling};if("floating"===r[0]){var o=e.floating.indexOf(t);return{path:["floating"],to:e.floating.slice(0,o).concat(e.floating.slice(o+1))}}if("split"!==m(e,r.slice(0,-1)).type)throw new Error("remove only supports splits right now");return n="left"===r[r.length-1]?"right":"left",{path:r.slice(0,-1).map((function(e){return e.toString()})),to:m(e,r.slice(0,-1).concat(n))}}var m=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(0===n.length)return t;var r=(0,o.Z)(n),i=r[0],a=r.slice(1);return e(t[i],a)};function b(e,t){return e.length!==t.length&&(e=e.slice(0,t.length),t=t.slice(0,e.length)),e.join()===t.join()?e:0===e.length?null:b(e.slice(0,-1),t.slice(0,-1))}function y(e){return e.slice(0,-1)}function w(e){return[].concat((0,r.Z)(e.slice(0,-1)),["left"===e[e.length-1]?"right":"left"])}function x(e){return"tabs"===e.slice(0,-1).pop()}},52973:function(e,t,n){n.d(t,{$:function(){return c}});var r=n(92809);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){"function"!==typeof e.primary&&(e.primary=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e});var t=Object.keys(e);return function(n,r){var o,s,c=!1,u={},l=a(t);try{for(l.s();!(o=l.n()).done;){var d=o.value;if("primary"!==d){var f=e[d],p=n?n[d]:void 0,h=f(p,r);u[d]=h,c=c||h!==p}}}catch(v){l.e(v)}finally{l.f()}n&&(s=c?i(i({},n),u):n);var g=e.primary(s,r);return(c=c||g!==s)?i(i({},u),g):n}}},20138:function(e,t,n){n.d(t,{Z:function(){return o},J:function(){return i}});var r=n(82100);function o(e,t,n,r){var o=e.workspace[t].plugins[n];if(o.type!==r)throw new Error("expected type to be "+r);return o.state}function i(e,t,n,i){var a=(0,r.v9)((function(r){return o(r,e,t,n)}),i),s=(0,r.I0)();return[a,function(n){s({type:"SET_STATE",wid:e,pud:t,state:n})}]}},94793:function(e,t,n){function r(e){return e.startsWith("/")?e:null}function o(e){var t=r(e);if(null===t)throw new Error("Expected an absolute path but got ".concat(e));return t}function i(e){return e.startsWith("/home/runner/")?e.split("/").slice(4).join("/"):null}n.d(t,{IT:function(){return r},ZF:function(){return o},om:function(){return i}})},36265:function(e,t,n){function r(e,t){if("dev"===e)return!0;if("dev"===t)return!1;for(var n=function(e){var t=[0,0,0];return e.split(".").map(Number).forEach((function(n,r){if("number"!==typeof n||isNaN(n))throw new Error("invalid version: ".concat(e));t[r]=n})),t},r=n(e),o=n(t),i=0;i<3;i++){if(o[i]>r[i])return!1;if(r[i]>o[i])return!0}return!0}function o(e,t){return!r(e,t)}n.d(t,{H:function(){return r},h:function(){return o}})},61069:function(e,t,n){n.d(t,{Z:function(){return Q}});var r,o=n(30266),i=n(79056),a=n(65988),s=n(809),c=n.n(s),u=n(67294),l=n(56023),d=n(81529),f=n(10257),p=n(84476),h=n(26331),g=n(38279),v=n(42567),m=n(97131),b=n(24243),y=n(37429),w=n(61850),x=n(38934),E=n(55877),k=n.n(E);function O(e){return new Promise((function(t,n){var r=new window.FileReader;r.onload=function(r){r.target&&r.target.result?t({name:e.path||e.name,result:b.Z.from(r.target.result)}):n(new Error("Expected target result"))},r.onerror=n,r.readAsArrayBuffer(e)}))}function S(){return(S=(0,o.Z)(c().mark((function e(t){var n,i,a,s,u,l,d,f,p,h,g,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.parentPath,i=t.overwrite,a=t.fs,s=t.files,u=t.shouldUseFileTransferAPI,l=t.onStart,d=t.onUpload,f=t.onError,p=t.onDone,h=function(){var e=(0,o.Z)(c().mark((function e(t){var n,o,s,l,p,h,g,v,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.targetPath,o=t.file,s=t.progress,i){e.next=10;break}return e.next=4,a.stat(n);case 4:if(l=e.sent,!l.exists){e.next=10;break}return p={file:o,path:n,error:r.AlreadyExists},f(p),e.abrupt("return",p);case 10:return h=k()(),g=Date.now(),(0,x.track)(x.events.WS_FILE_UPLOAD_STARTED,{uploadID:h,size:o.size}),v=null,e.prev=14,e.next=17,O(o);case 17:v=e.sent,e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(14),m={file:o,path:n,error:r.FileRead},f(m),e.abrupt("return",m);case 25:if(v){e.next=27;break}throw new Error("Expected fileRead");case 27:if(!u){e.next=32;break}return e.next=30,a.transferFile(n,v.result,(function(e,t){s.current=t/e}));case 30:e.next=34;break;case 32:return e.next=34,a.writeFile(n,v.result);case 34:return(0,x.track)(x.events.WS_UPLOADED_FILE,{uploadID:h,size:o.size,elapsedMillis:Date.now()-g}),d({file:o,path:n}),e.abrupt("return",{path:n,file:o});case 37:case"end":return e.stop()}}),e,null,[[14,20]])})));return function(t){return e.apply(this,arguments)}}(),g=s.map((function(e){var t=e.path||e.webkitRelativePath||e.name;return{targetPath:n?n+"/"+t:t,progress:(0,y.u)(0),file:e}})),l(g),e.next=6,Promise.all(g.map(h));case 6:v=e.sent,p({parentPath:n,uploads:v.filter((function(e){return!("error"in e)})),errors:v.reduce((function(e,t){return"error"in t?[].concat((0,m.Z)(e),[t]):e}),[])});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){var t=e.fs,n=e.onDone,r=u.useState([]),o=(0,i.Z)(r,2),a=o[0],s=o[1],c=u.useRef(n);u.useEffect((function(){c.current=n}),[n]);var l=(0,w.Z)("flag-transfer-files");return{uploadFiles:u.useCallback((function(e){var n=e.parentPath,r=e.files;!function(e){S.apply(this,arguments)}({overwrite:e.overwrite,parentPath:n,files:r.filter(Boolean),fs:t,shouldUseFileTransferAPI:l,onStart:function(e){return s((function(t){return[].concat((0,m.Z)(t),(0,m.Z)(e))}))},onUpload:function(e){s((function(t){return t.filter((function(t){return t.targetPath!==e.path}))}))},onError:function(e){s((function(t){return t.filter((function(t){return t.targetPath!==e.path}))}))},onDone:function(e){c.current&&c.current(e)}})}),[t,s,l]),pendingUploads:a}}!function(e){e.AlreadyExists="ALREADY_EXIST",e.FileRead="FILE_READ",e.Network="NETWORK"}(r||(r={}));var Z=n(70264);function C(){var e=(0,f.Z)().session,t=u.useState(e.getAreHiddenFilesVisible()),n=(0,i.Z)(t,2),r=n[0],o=n[1];return u.useEffect((function(){return o(e.getAreHiddenFilesVisible()),e.onHiddenFileVisibilityToggled(o)}),[e]),r}var P=n(35944);function D(e){var t=e.uploadFiles,n=e.onDownloadZip,r=u.useRef(null),o=u.useRef(null),i=C(),s=(0,f.Z)().session,c=u.useMemo((function(){if("undefined"===typeof document)return[];var e=document.createElement("input"),t="webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e,n=[Z.s.UploadFile];return t&&n.push(Z.s.UploadFolder),n.push(Z.s.DownloadZip),n.push(i?Z.s.HideHiddenFiles:Z.s.ShowHiddenFiles),n}),[i]);return(0,P.BX)(P.HY,{children:[(0,P.tZ)("input",{ref:r,type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*",className:"jsx-880321226"}),(0,P.tZ)("input",{ref:o,type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*",className:"jsx-880321226"}),(0,P.tZ)(Z.Z,{actions:c,onAction:function(e){switch(e){case Z.s.UploadFile:if(!r.current)return;return void r.current.click();case Z.s.UploadFolder:if(!o.current)return;return void o.current.click();case Z.s.DownloadZip:return void n();case Z.s.ShowHiddenFiles:return void s.setAreHiddenFilesVisible(!0);case Z.s.HideHiddenFiles:s.setAreHiddenFilesVisible(!1)}}}),(0,P.tZ)(a.default,{id:"880321226",children:["input.jsx-880321226{display:none;}"]})]})}var I=n(53567),T=n(45971),_=n(95420),A=n(51444),R=n(972),N=n(88834),U=n(55994),L=n(90101),F=n(68047),B=n(45187),M=n(60356),H=n(84647),z=n(16482),G=n(39084),V=n(32535),W=n(81700),X=n.n(W),Y=n(7785),q=n(23286),J=n(49512),K=n(82457);function $(e){return e/1024/1024}function Q(e){var t,n,s,m,b,y,E,k,O,S,Z=(0,A.Z)().showError,W=(0,M.Z)(),Q=u.useState(null),ee=(0,i.Z)(Q,2),te=ee[0],ne=ee[1],re=(0,w.Z)("flag-monitor-repl-resources"),oe=(0,f.Z)(),ie=oe.session,ae=oe.presence,se=oe.fs,ce=oe.dotReplit,ue=u.useState(null),le=(0,i.Z)(ue,2),de=le[0],fe=le[1],pe=(0,F.Z)(),he=C(),ge=(0,B.aEG)({variables:{replId:W}}).data,ve="Repl"===(null===ge||void 0===ge?void 0:ge.repl.__typename)?ge.repl:void 0,me=ve?ve.url:void 0,be=ge?function(e){var t,n="Repl"===(null===e||void 0===e?void 0:e.repl.__typename)?e.repl:void 0,r=null!==e&&void 0!==e&&e.currentUser?e.currentUser:void 0;if(void 0===n||void 0===r)return q.J.Nothing;if("User"===(null===(t=n.owner)||void 0===t?void 0:t.__typename)){var o,i;if(r.id!==(null===(o=n.owner)||void 0===o?void 0:o.id))return q.J.Nothing;if(null===(i=r.capabilities)||void 0===i||!i.canBoost)return q.J.Upgrade;if(!n.isBoosted)return q.J.Boost}return q.J.Nothing}(ge):q.J.Nothing,ye="Repl"===(null===ge||void 0===ge?void 0:ge.repl.__typename)?ge.repl.language:void 0,we="Repl"===(null===ge||void 0===ge?void 0:ge.repl.__typename)&&(ge.repl.isProjectFork||ge.repl.isModelSolution||ge.repl.isModelSolutionFork),xe=u.useCallback((function(){var e=(me||window.location.pathname)+".zip";window.open(e,"_blank")}),[me]),Ee=u.useCallback(function(){var e=(0,o.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne(t),!t||!de){e.next=7;break}return e.next=4,se.stat(de);case 4:n=e.sent,n.exists||fe(pe||null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[pe,de,se]),ke=u.useState(null),Oe=(0,i.Z)(ke,2),Se=Oe[0],je=Oe[1],Ze=u.useState(ie.getResourceMonitoringState()),Ce=(0,i.Z)(Ze,2),Pe=Ce[0],De=Ce[1];u.useEffect((function(){return ie.onResourceMonitoringStateChanged((function(e){De(e)}))}),[ie,De]),u.useEffect((function(){pe!==de&&fe(pe)}),[pe]);var Ie=j({onDone:function(e){var t=e.parentPath,n=e.errors;if(n.length){var o=n.filter((function(e){return e.error===r.AlreadyExists}));o.length&&je({parentPath:t,errors:o});var i=n.filter((function(e){return e.error!==r.AlreadyExists}));i.length&&Z("There was an error uploading: ".concat(i.map((function(e){return e.path})).join(", ")))}},fs:se}),Te=Ie.uploadFiles,_e=Ie.pendingUploads,Ae=(null===ye||void 0===ye?void 0:ye.includes("nix"))&&!he,Re=(0,Y.Z)(),Ne=u.useState([]),Ue=(0,i.Z)(Ne,2),Le=Ue[0],Fe=Ue[1];return u.useEffect((function(){return ce.watch((function(e){Re.current&&(e.error?e.error===V.Y.NotFound&&Fe([]):e.config.hidden?Fe(e.config.hidden.map((function(e){return X()(e,{extended:!0,globstar:!0})}))):Fe([]))}))}),[ce]),(0,P.tZ)(v.Z,{children:(0,P.tZ)(G.xW,{stepId:z.H.Sidepane,children:(0,P.BX)("div",{className:a.default.dynamic([["3645750475",[e.minHeight?e.minHeight:"auto"]]])+" filetree",children:[(0,P.BX)(I.Ug,{align:"center",wrap:"nowrap",spacing:0,className:"filetree-header",children:[(0,P.tZ)("div",{className:a.default.dynamic([["3645750475",[e.minHeight?e.minHeight:"auto"]]])+" heading",children:(0,P.tZ)(p.Z,{level:4,children:"Files"})}),(0,P.tZ)(N.Z,{border:!1,Icon:U.Z,className:"add-button",textColor:"var(--foreground-dimmer)",backgroundColor:"var(--background-default)",onClick:function(){return Ee(l.Tv.File)},"aria-label":"Add file","data-microtip-position":"bottom",role:"tooltip"}),(0,P.tZ)("div",{className:a.default.dynamic([["3645750475",[e.minHeight?e.minHeight:"auto"]]])+" filetree-action-separator"}),(0,P.tZ)(N.Z,{border:!1,Icon:L.Z,className:"add-button",textColor:"var(--foreground-dimmer)",backgroundColor:"var(--background-default)",onClick:function(){return Ee(l.Tv.Directory)},"aria-label":"Add folder","data-microtip-position":"bottom",role:"tooltip"}),(0,P.tZ)(D,{uploadFiles:Te,onDownloadZip:xe})]}),(0,P.tZ)(h.Z,{height:1}),(0,P.tZ)(g.Z,{onRename:function(){return null},onDownload:function(){return null},onDelete:function(){return null},onDuplicate:function(){return null},overwriteNode:function(){return null},getNodeType:function(){var e=(0,o.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.readFile(t);case 2:return n=e.sent,e.abrupt("return",n.error===l.Df.IsDirectory?l.Tv.Directory:l.Tv.File);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),siblings:[],onClick:function(){return null},pendingUploads:_e,uploadFiles:Te,pendingFileType:te,setPendingFileType:Ee,activePath:de,onNodeClick:function(e){var t=e.path,n=e.type,r=e.newTab;if(fe(t),n!==l.Tv.Directory){var o=(0,H.r6)(t);(0,x.track)(x.events.WS_FILE_CLICKED,{ext:o}),ie.openFile(t,{newTab:r}),ae.getFollowedUser()&&ae.unfollowUser()}},path:d.Q,transformChildren:ye?(0,R.Z)({language:ye,shouldHideHiddenFiles:Ae,hiddenFiles:Le,isProjectFork:we}):void 0,fs:se}),re&&(0,P.tZ)(J.Z,{css:[K.l0.p(8),K.l0.backgroundColor.backgroundDefault,{borderTop:"1px solid ".concat(K.TV.backgroundHigher)},"",""],children:(0,P.tZ)(q.Z,{callToAction:be,cpuTotal:100,cpuCurrent:null!==(t=null===Pe||void 0===Pe||null===(n=Pe.utilization)||void 0===n?void 0:n.cpuUtilPercent)&&void 0!==t?t:0,ramTotal:$(null!==(s=null===Pe||void 0===Pe||null===(m=Pe.utilization)||void 0===m?void 0:m.memoryLimitBytes)&&void 0!==s?s:0),ramCurrent:$(null!==(b=null===Pe||void 0===Pe||null===(y=Pe.utilization)||void 0===y?void 0:y.memoryUsageBytes)&&void 0!==b?b:0),diskTotal:$(null!==(E=null===Pe||void 0===Pe||null===(k=Pe.utilization)||void 0===k?void 0:k.storageTotalBytes)&&void 0!==E?E:0),diskCurrent:$(null!==(O=null===Pe||void 0===Pe||null===(S=Pe.utilization)||void 0===S?void 0:S.storageUsedBytes)&&void 0!==O?O:0)})}),(0,P.tZ)(T.Z,{isOpen:Boolean(Se),onRequestClose:function(){return je(null)},children:Se?(0,P.tZ)(_.Z,{paths:Se.errors.map((function(e){return e.path})),onCancel:function(){return je(null)},onConfirm:function(){Te({overwrite:!0,parentPath:Se.parentPath,files:Se.errors.map((function(e){return e.file}))}),je(null)}}):null}),(0,P.tZ)(a.default,{id:"3645750475",dynamic:[e.minHeight?e.minHeight:"auto"],children:[".filetree.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;overflow:hidden;border-top-right-radius:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);background-color:var(--background-default);min-height:".concat(e.minHeight?e.minHeight:"auto",";}"),".filetree.__jsx-style-dynamic-selector .filetree-header{padding:var(--space-8);background-color:var(--background-default);position:-webkit-sticky;position:sticky;top:0;}",".filetree-action-separator.__jsx-style-dynamic-selector{height:6px;width:0;border-right:1px solid var(--foreground-dimmest);}",".add-button:hover{color:var(--foreground-default) !important;}",".heading.__jsx-style-dynamic-selector{margin-right:auto;}"]})]})})})}},59633:function(e,t,n){n.d(t,{Z:function(){return O}});var r=n(92809),o=n(79056),i=n(65988),a=n(67294),s=n(5537),c=n(46379),u=n(76642),l=n(16289),d=n(95211),f=n(94184),p=n.n(f),h=n(45187),g=n(88834),v=n(41649),m=n(35944);function b(e){var t=e.repl,n=e.onCancel,r=e.onLink,s=(0,a.useState)(null),c=s[0],u=s[1],l=(0,h.T9I)(),d=(0,o.Z)(l,2),f=d[0],b=d[1],w=(0,a.useRef)(null),x=(0,a.useState)(""),E=x[0],k=x[1];(0,a.useEffect)((function(){b.data&&"Repl"===b.data.linkReplDomain.__typename&&r()}),[b.data,r]);var O=E.includes(".")&&E.split(".")[0].length>0&&E.split(".")[1].length>0,S=t.hostedUrl.replace(/^https:\/\//,"");return(0,m.BX)("div",{className:"jsx-2066200193 edit-domain",children:[(0,m.tZ)("div",{className:"jsx-2066200193 title",children:"Link An Existing Domain"}),(0,m.BX)("div",{className:"jsx-2066200193 subtitle",children:["Learn more"," ",(0,m.tZ)("a",{href:"https://docs.replit.com/repls/web-hosting#custom-domains",target:"_blank",className:"jsx-2066200193",children:"here"}),"."]}),(0,m.BX)("ol",{className:"jsx-2066200193 steps",children:[(0,m.tZ)("li",{className:"jsx-2066200193",children:(0,m.BX)("div",{className:"jsx-2066200193",children:[(0,m.tZ)("label",{className:"jsx-2066200193",children:"Enter Your Domain:"}),(0,m.tZ)(v.ZP,{disabled:"loading"===c,required:!0,value:E,onChange:function(e){k(e.target.value)},placeholder:"example.com"})]})}),O?(0,m.tZ)("li",{className:"jsx-2066200193",children:(0,m.BX)("div",{className:"jsx-2066200193",children:[(0,m.BX)("div",{className:"jsx-2066200193",children:["Add a ",(0,m.tZ)("code",{className:"jsx-2066200193",children:"CNAME"})," record to your domain pointing at:"]}),(0,m.BX)("div",{className:"jsx-2066200193 cname-url",children:[(0,m.tZ)(v.ZP,{readOnly:!0,ref:w,onChange:function(){return null},value:S,onClick:function(){w.current&&w.current.select()}}),(0,m.tZ)(g.Z,{onClick:function(){w.current&&(w.current.select(),document.execCommand("copy"))},children:"Copy"})]})]})}):null,"loading"===c||"error"===c?(0,m.tZ)("li",{className:"jsx-2066200193",children:(0,m.tZ)("div",{className:"jsx-2066200193",children:(0,m.tZ)(y,{replId:t.id,domain:E,onVerified:function(){return u("verified")},onError:function(){return u("error")}})})}):null,"verified"===c?(0,m.tZ)("li",{className:"jsx-2066200193",children:"Your domain is configured correctly. Linking could take a few minutes. Please don't leave this page."}):null]}),(0,m.BX)("div",{className:"jsx-2066200193 controls",children:[(0,m.tZ)(g.Z,{onClick:n,children:"Close"}),(0,m.tZ)("div",{className:"jsx-2066200193 "+(p()("next",{"show-next":O&&"loading"!==c})||""),children:"verified"===c?(0,m.tZ)(g.Z,{color:"primary",loading:b.loading,onClick:function(){b.loading||f({variables:{replId:t.id,domain:E}})},children:b.loading?"Linking...":"Link Domain"}):(0,m.tZ)(g.Z,{color:"primary",onClick:function(){return u("loading")},children:"Next"})})]}),(0,m.tZ)(i.default,{id:"2066200193",children:[".edit-domain.jsx-2066200193{display:grid;grid-row-gap:var(--space-16);}",".title.jsx-2066200193{font-size:20px;}",".subtitle.jsx-2066200193,.label.jsx-2066200193{font-size:18px;}","li.jsx-2066200193{margin-bottom:var(--space-16);}","li.jsx-2066200193>div.jsx-2066200193{display:grid;grid-row-gap:var(--space-8);}",".cname-url.jsx-2066200193{display:grid;grid-column-gap:var(--space-8);grid-template-columns:1fr auto;}",".controls.jsx-2066200193{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".next.jsx-2066200193{visibility:hidden;}",".next.show-next.jsx-2066200193{visibility:visible;}"]})]})}function y(e){var t,n,r=e.domain,o=e.replId,s=e.onVerified,c=e.onError,u=(0,h.ZUY)({variables:{replId:o,domain:r},pollInterval:1e3}),l=u.data,d=u.stopPolling;return(0,a.useEffect)((function(){if(l&&"Repl"===l.repl.__typename){var e=l.repl;if(e.checkDomain){var t=e.checkDomain,n=t.retry,r=t.verified;r||n?(!r&&n||d(),r&&s()):c()}}}),[l,d,s,c]),"Repl"===(null===l||void 0===l?void 0:l.repl.__typename)&&null!==(t=l.repl.checkDomain)&&void 0!==t&&t.status&&l.repl.checkDomain.retry?(0,m.BX)("div",{className:"jsx-1173750789 verify-domain",children:[(0,m.tZ)("div",{className:"jsx-1173750789 loading"}),(0,m.tZ)("div",{className:"jsx-1173750789",children:l.repl.checkDomain.status}),(0,m.tZ)(i.default,{id:"1173750789",children:[".verify-domain.jsx-1173750789{display:grid;grid-template-columns:auto 1fr;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".loading.jsx-1173750789{width:20px;height:20px;border-radius:100%;border:solid 3px #eee;border-top:solid 3px #888;-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-animation:linear domain-loading-jsx-1173750789 1s infinite;animation:linear domain-loading-jsx-1173750789 1s infinite;}","@-webkit-keyframes domain-loading-jsx-1173750789{from{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}to{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes domain-loading-jsx-1173750789{from{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}to{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}"]})]}):"Repl"!==(null===l||void 0===l?void 0:l.repl.__typename)||null!==(n=l.repl.checkDomain)&&void 0!==n&&n.retry?null:(0,m.tZ)(m.HY,{children:"We ran into an internal error while checking the domain. Please try again later."})}function w(e){var t=e.replId,n=e.domain,r=e.onCancel,s=e.onUnlink,c=(0,h.pCu)({variables:{input:{id:t,domain:null}}}),u=(0,o.Z)(c,2),l=u[0],d=u[1];return(0,a.useEffect)((function(){d.data&&d.data.updateRepl.repl&&s()}),[d.data,s]),(0,m.BX)("div",{className:"jsx-2620693481 unlink-domain",children:[(0,m.BX)("div",{className:"jsx-2620693481",children:["Your repl is being served at"," ",(0,m.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+n,className:"jsx-2620693481",children:n})]}),(0,m.BX)("div",{className:"jsx-2620693481 controls",children:[(0,m.tZ)(g.Z,{onClick:r,children:"Close"}),(0,m.tZ)(g.Z,{color:"negative",onClick:function(){d.loading||l()},children:d.loading?"Unlinking...":"Unlink Domain"})]}),(0,m.tZ)(i.default,{id:"2620693481",children:[".unlink-domain.jsx-2620693481{display:grid;grid-row-gap:var(--space-24);}",".controls.jsx-2620693481{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}"]})]})}function x(e){var t=e.replId,n=e.onCancel,r=e.onUnlink,o=e.onLink,a=(0,h.KG0)({variables:{replId:t}}),s=a.data,c=null;if(a.loading)c=(0,m.tZ)(m.HY,{children:"loading..."});else if(s&&"Repl"===s.repl.__typename){var u=s.repl;c=u.config.domain?(0,m.tZ)(w,{replId:u.id,domain:u.config.domain,onUnlink:r,onCancel:n}):(0,m.tZ)(b,{repl:u,onLink:o,onCancel:n})}else s&&"ReplRedirect"===s.repl.__typename?c=(0,m.BX)("div",{children:["This repl has moved to"," ",(0,m.tZ)("a",{href:s.repl.replUrl,children:s.repl.replUrl})]}):s&&"SubscriptionExpiredError"===s.repl.__typename&&(c=(0,m.tZ)("div",{children:"Subscription expired"}));return(0,m.BX)("div",{className:"jsx-2281586937",children:[c,(0,m.tZ)(i.default,{id:"2281586937",children:["div.jsx-2281586937{padding:var(--space-16);color:var(--foreground-default);}"]})]})}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){var t=a.useState(!1),n=(0,o.Z)(t,2),r=n[0],f=n[1];return(0,m.BX)("div",{className:"jsx-1852595970 url-bar",children:[(0,m.tZ)("button",{"aria-label":e.refreshing?"Refreshing...":"Refresh","data-microtip-position":"right",role:"tooltip",onClick:e.onRefresh,className:"jsx-1852595970 control",children:(0,m.tZ)("div",{className:"jsx-1852595970 "+"rotate-wrapper ".concat(e.refreshing?"rotate":""),children:(0,m.tZ)(c.Z,{})})}),(0,m.tZ)("input",{value:e.url,type:"text",onClick:function(t){e.trackUrlSelect(),t.currentTarget.select()},readOnly:!0,className:"jsx-1852595970"}),e.canEditDomain&&(0,m.BX)("div",{className:"jsx-1852595970 edit-domain-wrap",children:[(0,m.tZ)("button",k(k({},r?{}:{"aria-label":"Custom domain","data-microtip-position":"left",role:"tooltip"}),{},{onClick:function(){return f(!r)},className:"jsx-1852595970 control",children:(0,m.tZ)(s.Z,{})})),r?(0,m.tZ)("div",{className:"jsx-1852595970 edit-domain",children:(0,m.tZ)(x,{onCancel:function(){return f(!1)},onLink:function(){return f(!1)},onUnlink:function(){return f(!1)},replId:e.replId})}):null]}),e.anon?(0,m.tZ)("div",{"aria-label":"Anonymous websites are only hosted for an hour. Log in to keep your website up forever.","data-microtip-size":"large","data-microtip-position":"bottom-left",role:"tooltip",className:"jsx-1852595970 control",children:(0,m.tZ)(l.Z,{})}):null,(0,m.tZ)("a",{href:e.url,target:"_blank",rel:"noopener","aria-label":"Open in a new tab","data-microtip-position":"left",role:"tooltip",className:"jsx-1852595970 control",children:(0,m.tZ)(u.Z,{})}),e.canBeClosed&&(0,m.tZ)("button",{"aria-label":"Close web view","data-microtip-position":"left",role:"tooltip",onClick:e.closeCallback,className:"jsx-1852595970 control",children:(0,m.tZ)(d.Z,{})}),(0,m.tZ)(i.default,{id:"1852595970",children:[".url-bar.jsx-1852595970{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:40px;width:100%;background-color:var(--background-default);border-bottom:1px solid var(--background-higher);position:relative;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-top-left-radius:var(--border-radius-4);border-top-right-radius:var(--border-radius-4);}",".control.jsx-1852595970{padding:var(--space-8);color:var(--foreground-dimmest);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".control.jsx-1852595970:hover{color:var(--foreground-default);}",".edit-domain-wrap.jsx-1852595970{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}","input.jsx-1852595970{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;outline:none;border:1px solid var(--background-highest);background-color:transparent;padding:2px 4px;margin:0 var(--space-8);color:var(--foreground-default);font-size:13px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;border-radius:var(--border-radius-4);}","input.jsx-1852595970:focus{border-color:var(--foreground-dimmer);background-color:var(--background-root);}","a.jsx-1852595970,a.jsx-1852595970:hover{border-bottom:none;}","button.jsx-1852595970{border:0;background:transparent;box-shadow:none;cursor:pointer;}","button.jsx-1852595970:focus{outline:0 none;}",".edit-domain-wrap.jsx-1852595970{position:relative;}",".edit-domain.jsx-1852595970{padding:var(--space-8) var(--space-16);position:absolute;top:100%;right:0;width:90vw;background-color:var(--background-default);border:1px solid var(--background-highest);border-radius:var(--border-radius-4);z-index:10;}",".rotate.jsx-1852595970{-webkit-animation:rotate-jsx-1852595970 infinite 0.5s;animation:rotate-jsx-1852595970 infinite 0.5s;}",".rotate-wrapper.jsx-1852595970{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}","@media screen and (min-width:540px){.edit-domain.jsx-1852595970{width:520px;}}","@-webkit-keyframes rotate-jsx-1852595970{from{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}to{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes rotate-jsx-1852595970{from{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}to{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}"]})]})}},41632:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(30266),o=n(809),i=n.n(o),a=(n(54098),n(25108));function s(){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("gurl")){e.next=3;break}return a.log("Getting gurl from localstorage"),e.abrupt("return",localStorage.getItem("gurl"));case 3:e.next=5;break;case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},44180:function(e,t,n){n.d(t,{t:function(){return E},Z:function(){return j}});var r=n(92809),o=n(30266),i=n(809),a=n.n(i),s=n(71171),c=n.n(s),u=n(71371),l=n(95962),d=n(38934),f=n(11163),p=n(51218),h=n(86797),g=n(45187),v=n(51595),m=n(34155),b=n(25108);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=Boolean(m.env.CAPTCHA_EMBEDS);function E(e){if(e){var t=function(e){var t=new URL(e),n={secure:!1,port:""+t.port,host:t.hostname};return"wss:"===t.protocol?n.secure=!0:"ws:"!==t.protocol&&b.log(e,"Expected gurl protocol to be ws or wss, we'll give it a shot anyway"),n.port||(n.port=n.secure?"443":"80"),n}(e),n=t.secure,r=t.host,o=t.port;if("eval.repl.it"!==r&&"gp-v2.herokuapp.com"!==r&&"gp-v2.replit.com"!==r&&"eval.replit.com"!==r)return(0,d.track)(d.events.LORE_USED_OVERRIDE_CLUSTER_METADATA,{gurl:e}),{id:"development",gurl:"ws".concat(n?"s":"","://").concat(r,":").concat(o),conmanURL:"http".concat(n?"s":"","://").concat(r,":").concat(o)}}}function k(e){var t=Math.floor(500*Math.random()),n=1e3*Math.pow(1.7,e);return Math.min(n,15e3)+t}function O(){var e=window.performance.getEntriesByName("create-workspace");if(0===e.length)return u.Tb(new Error("Expected create-workspace mark")),!1;if(e.length>1)return u.Tb(new Error("Expected a single create-workspace mark")),!1;var t=e[0];return window.performance.now()-t.startTime}var S=0;function j(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,o.Z)(a().mark((function e(t){var n,r,i,s,u,m,b,y,E,j,Z,C,P,D,I,T,_,A,R,N,U,L,F,B,M,H;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,r=t.repl,i=t.shouldAbort,s=t.onRetry,u=t.overrideClusterMetadata,m=t.prefetchedConnectionMetadata,b=t.isLoggedIn,p.l){e.next=3;break}throw new Error("Expected apollo client");case 3:S++,y={connectionMetadata:m,timeout:1e4,pollingHost:void 0},f.default.query.fallback&&(y.pollingHost="gp-v2.replit.com"),E=0,j=0,Z=!1,C=r.id,P=r.language,D=r.slug,I=c()(),T=function(){var e=(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout((function(){e()}),k(j))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();case 12:if(!1!==n.isConnected()){e.next=92;break}if(!i()){e.next=15;break}return e.abrupt("return");case 15:return _=Boolean(f.default.query.lite||f.default.query.embed),A=window.performance.now(),R=c()(),N={host:window.location.host,retries:j,replId:C,language:P,slug:D,attemptUuid:R,govalConnectUuid:I,connectCount:S},U="",e.prev=20,e.next=23,p.l.query({query:g.Nfd});case 23:if(L=e.sent,F=L.data,B=Boolean(F.shouldBypassCaptcha),b||_&&!x||B){e.next=32;break}return e.next=30,(0,l.Z)();case 30:U=e.sent,v.kg.info(d.events.GOVAL_CONNECTION_STEP,w(w({},N),{},{time:window.performance.now()-A,timeSinceCreateWorkspace:O(),step:"captcha",failed:!1}));case 32:e.next=44;break;case 34:if(e.prev=34,e.t0=e.catch(20),v.kg.info(d.events.GOVAL_CONNECTION_STEP,w(w({},N),{},{time:window.performance.now()-A,timeSinceCreateWorkspace:O(),step:"captcha",failed:!0})),!i()){e.next=39;break}return e.abrupt("return");case 39:return j++,s(j),e.next=43,T();case 43:return e.abrupt("continue",12);case 44:if(!i()){e.next=46;break}return e.abrupt("return");case 46:if(M=window.performance.now(),m&&!Z){e.next=67;break}return e.prev=48,e.next=51,(0,h.Z)({url:"/data/repls/".concat(r.id,"/get_connection_metadata"),captcha:U,isEmbed:_,hCaptchaSiteKey:l.w,clientVersion:"5ed2baf",overrideClusterMetadata:u,retry:j});case 51:y.connectionMetadata=e.sent,v.kg.info(d.events.GOVAL_CONNECTION_STEP,w(w({},N),{},{time:window.performance.now()-M,timeSinceCreateWorkspace:O(),step:"fetchConnectionMetadata",failed:!1})),e.next=65;break;case 55:if(e.prev=55,e.t1=e.catch(48),v.kg.info(d.events.GOVAL_CONNECTION_STEP,w(w({},N),{},{time:window.performance.now()-M,timeSinceCreateWorkspace:O(),step:"fetchConnectionMetadata",failed:!0})),!i()){e.next=60;break}return e.abrupt("return");case 60:return j++,s(j),e.next=64,T();case 64:return e.abrupt("continue",12);case 65:if(!i()){e.next=67;break}return e.abrupt("return");case 67:return Z=!0,H=window.performance.now(),e.prev=69,e.next=72,n.connect(y);case 72:window.v1ws=n.ws,e.next=89;break;case 75:if(e.prev=75,e.t2=e.catch(69),!e.t2.message.includes("Client.close")){e.next=79;break}return e.abrupt("return");case 79:if(!i()){e.next=81;break}return e.abrupt("return");case 81:return 2!==E||y.pollingHost||(y.pollingHost="gp-v2.replit.com",v.kg.info(d.events.GOVAL2_FELLBACK,{error:e.t2.message||"",retries:j,host:window.location.hostname})),v.kg.info(d.events.GOVAL_CONNECTION_STEP,w(w({},N),{},{time:window.performance.now()-H,timeSinceCreateWorkspace:O(),step:"connect",failed:!0})),E++,j++,s(j),e.next=88,T();case 88:return e.abrupt("continue",12);case 89:v.kg.info(d.events.GOVAL_CONNECTION_STEP,w(w({},N),{},{time:window.performance.now()-H,timeSinceCreateWorkspace:O(),step:"connect",failed:!1})),e.next=12;break;case 92:case"end":return e.stop()}}),e,null,[[20,34],[48,55],[69,75]])})))).apply(this,arguments)}},36906:function(e,t,n){n.d(t,{Z:function(){return Ce}});var r=n(79056),o=n(92809),i=n(65988),a=n(67294),s=n(71371),c=n(44653),u=n(41664),l=n(68724),d=n(32324),f=n(55104),p=n(35944);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=e.repl,n=t.user?(0,p.tZ)(u.default,g(g({},(0,c.Ru)(t.user)),{},{children:(0,p.tZ)("a",{style:{color:"var(--accent-primary-default)",fontWeight:500,textDecoration:"none"},className:"username",children:t.user.username})})):(0,p.tZ)("span",{className:"username",children:"@anonymous"});return(0,p.BX)("div",{className:"jsx-3518488481 workspace-header-info",children:[(0,p.BX)("div",{className:"jsx-3518488481 workspace-header-title",children:[(0,p.tZ)("span",{className:"jsx-3518488481 breadcrumb interactive",children:(0,p.tZ)("span",{onClick:function(e){return e.stopPropagation()},className:"jsx-3518488481 breadcrumb-content",children:n})}),(0,p.tZ)("span",{className:"jsx-3518488481 slash",children:"/"}),(0,p.tZ)("span",{className:"jsx-3518488481 breadcrumb repl-title",children:(0,p.tZ)("span",{className:"jsx-3518488481 breadcrumb-content",children:t.title})})]}),(0,p.tZ)("div",{className:"jsx-3518488481 spacer"}),(0,p.tZ)("div",{title:t.templateInfo.label,className:"jsx-3518488481 language-icon-container",children:(0,p.tZ)(f.Z,{iconUrl:t.templateInfo.iconUrl,size:16,alt:t.templateInfo.label})}),(0,p.tZ)(i.default,{id:"3518488481",children:[".workspace-header-info.jsx-3518488481,.workspace-header-title.jsx-3518488481{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;overflow:hidden;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;font-size:var(--font-size-default);}",".workspace-header-info.jsx-3518488481{width:100%;}",".workspace-header-user-link.jsx-3518488481{color:var(--accent-primary-default);-webkit-text-decoration:none;text-decoration:none;}",".language-icon-container.jsx-3518488481{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-4);background-color:var(--background-higher);border-radius:var(--border-radius-8);position:relative;}",".breadcrumb.jsx-3518488481{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:var(--border-radius-4);padding:2px var(--space-4);width:auto;}",".breadcrumb.interactive.jsx-3518488481:hover{background-color:var(--background-higher);}",".breadcrumb-content.jsx-3518488481{display:inline-block;overflow:hidden;text-overflow:ellipsis;max-width:152px;}",".spacer.jsx-3518488481{width:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;}",".username.jsx-3518488481,.repl-title.jsx-3518488481{white-space:nowrap;color:var(--foreground-default);}",".slash.jsx-3518488481{color:var(--foreground-dimmest);padding:0 2px;}",".repl-title.jsx-3518488481{overflow:hidden;}"]})]})},m=n(38934),b=n(85822),y=n(11163),w=n(23495),x=n(45187),E=n(41649),k=function(e){var t=e.maxLength,n=void 0===t?140:t,r=e.value,o=void 0===r?"":r,a=e.hideLabel,s=void 0!==a&&a;return(0,p.BX)("div",{className:"jsx-112147882",children:[o.length," / ",n," ",s?"":"characters",(0,p.tZ)(i.default,{id:"112147882",children:["div.jsx-112147882{color:var(--foreground-dimmer);font-size:0.75em;text-align:right;margin-top:var(--space-8);}"]})]})},O=n(51444),S=n(53567),j=n(88834),Z=n(46348),C=n(94184),P=n.n(C),D=n(34940),I=n(25517),T=n(56887),_=n(42230);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e){var t,n=e.isBoosted||e.needsUpgrade,r=(0,x.E63)({skip:n,fetchPolicy:"cache-and-network"}),o=r.data,a=r.loading,s=(null===o||void 0===o||null===(t=o.currentUser)||void 0===t?void 0:t.canBoost)||!1,c=e.alwaysOn?1:3,u=e.isBoosted?1:3,l=e.isBoosted?"Your repl is currently boosted":"Your repl will be 2x faster",d=s?{}:{"aria-label":"Boost limit reached","data-microtip-position":"top",role:"tooltip"};return(0,p.BX)(p.HY,{children:[(0,p.BX)("div",{className:i.default.dynamic([["2311824613",[e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" always-on",children:[(0,p.BX)(S.gC,{children:[(0,p.BX)(S.Ug,{spacing:"4px",align:"center",children:[(0,p.tZ)(I.Z,{foreground:c,align:"center",children:(0,p.tZ)(_.Z,{})}),(0,p.tZ)(I.Z,{foreground:c,size:"small",fontWeight:"medium",children:"Always On"})]}),(0,p.tZ)(I.Z,{size:"xsmall",foreground:c,children:"Your repl will never fall asleep"})]}),(0,p.tZ)("div",{className:i.default.dynamic([["2311824613",[e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" toggle-box",children:(0,p.tZ)(D.Z,{isOn:e.alwaysOn,onChange:function(){e.onChange(!e.alwaysOn)}})})]}),(0,p.BX)("div",{className:i.default.dynamic([["2311824613",[e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" "+(P()("boost",{"is-boosted":e.isBoosted})||""),children:[(0,p.BX)(S.gC,{children:[(0,p.BX)(S.Ug,{spacing:"4px",align:"center",justify:"center",children:[(0,p.tZ)(I.Z,{className:"rocket-text",foreground:u,align:"center",children:(0,p.tZ)(T.Z,{})}),(0,p.tZ)(I.Z,{className:"boost-text",foreground:u,size:"small",fontWeight:e.isBoosted?"medium":"regular",children:"Boost"})]}),(0,p.tZ)(I.Z,{size:"xsmall",foreground:u,children:l})]}),(0,p.tZ)("div",{className:i.default.dynamic([["2311824613",[e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" toggle-box",children:e.isBoosted?(0,p.tZ)(j.Z,{onClick:function(){e.onUnboostClick()},filled:!1,border:!1,children:(0,p.tZ)(Z.Z,{color:"var(--foreground-default)"})}):(0,p.tZ)("div",R(R({},d),{},{className:i.default.dynamic([["2311824613",[e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" "+(d&&null!=d.className&&d.className||""),children:(0,p.BX)(j.Z,{textColor:"var(--accent-positive-default)",disabled:!s,loading:a,onClick:function(){e.onBoostChange(!0)},children:[(0,p.tZ)("span",{className:i.default.dynamic([["2311824613",[e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"]]])+" rocket-container",children:(0,p.tZ)(T.Z,{fontSize:"16px"})}),"Add Boost"]})}))})]}),(0,p.tZ)(i.default,{id:"2311824613",dynamic:[e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",e.needsUpgrade?"none":"auto",e.needsUpgrade?.5:1,e.needsUpgrade?"not-allowed":"pointer"],children:[".always-on.__jsx-style-dynamic-selector,.boost.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-8);-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".always-on.__jsx-style-dynamic-selector{margin-bottom:var(--space-8);}",".boost.__jsx-style-dynamic-selector .rocket-text{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:".concat(e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",";width:16px;}"),".boost.__jsx-style-dynamic-selector .boost-text{color:".concat(e.isBoosted?"var(--accent-positive-default)":"var(--foreground-dimmest)",";}"),".is-boosted.__jsx-style-dynamic-selector{background-color:var(--accent-positive-dimmest);border-radius:var(--border-radius-4);}",".rocket-container.__jsx-style-dynamic-selector{margin-right:var(--space-4);}",".boost-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:var(--accent-negative-default);}",".boost-icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4);}",".boost-menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4);}",".toggle-box.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;pointer-events:".concat(e.needsUpgrade?"none":"auto",";opacity:").concat(e.needsUpgrade?.5:1,";cursor:").concat(e.needsUpgrade?"not-allowed":"pointer",";}")]})]})}var U=n(45971),L=n(35566),F=n(73073),B=n(41371),M=n(6552),H=n(99911),z=n(30266),G=n(809),V=n.n(G),W=n(95610),X=n(51218),Y=n(41632),q=n(44180),J=n(7186);function K(e){return $.apply(this,arguments)}function $(){return($=(0,z.Z)(V().mark((function e(t){return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return ee.apply(this,arguments)}function ee(){return(ee=(0,z.Z)(V().mark((function e(t){var n,r=arguments;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:1,e.prev=1,e.next=4,te(t);case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),!(n>5)){e.next=10;break}throw e.t0;case 10:setTimeout((function(){Q(t,n+1)}),1e3*(Math.pow(2,n)-1));case 11:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=(0,z.Z)(V().mark((function e(t){var n,r,o,i,a,s,c;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,W.Z)({onUnrecoverableError:function(e){throw new Error("Failed to create temporary goval connection. Received error ".concat(e.message))}}),X.l){e.next=4;break}throw n.destroy(),new Error("Expected Apollo Client");case 4:return e.next=6,X.l.query({query:x.PkY,variables:{id:t}});case 6:if(r=e.sent,"Repl"===(o=r.data).repl.__typename){e.next=11;break}throw n.destroy(),new Error("Failed to query repl info when creating temporary connection");case 11:return i=o.currentUser,a=o.repl,e.next=14,(0,Y.Z)();case 14:return s=e.sent,c=(0,q.t)(s),e.abrupt("return",new Promise((function(e){n.onConnectionStateChanged((function(t){t===W.e.CONNECTED&&(n.destroy(),e())})),n.connect({context:(0,J.U)({repl:a,currentUser:i}),overrideClusterMetadata:c})})));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=n(34572),oe=n(75478),ie=n(41667),ae=n(74834),se=n(89615),ce=n(7785);function ue(e){var t=e.onUnboost,n=e.hideModal;return(0,p.BX)("div",{className:"jsx-4045367983 wrap",children:[(0,p.tZ)("div",{className:"jsx-4045367983 title",children:"Unboost Repl"}),(0,p.tZ)("div",{className:"jsx-4045367983 text",children:"Are you sure you want to unboost your repl? This will downgrade your repl to a less powerful machine."}),(0,p.BX)(S.Ug,{spacing:1,justify:"end",children:[(0,p.tZ)(j.Z,{onClick:n,autoFocus:!0,children:"Cancel"}),(0,p.tZ)(j.Z,{color:"negative",onClick:function(){t(),n()},children:"Confirm"})]}),(0,p.tZ)(i.default,{id:"4045367983",children:[".wrap.jsx-4045367983{background-color:var(--background-default);border-radius:var(--border-radius-4);color:var(--foreground-default);}",".title.jsx-4045367983{color:var(--accent-negative-default);}",".wrap.jsx-4045367983{display:grid;grid-row-gap:25px;}",".title.jsx-4045367983{font-size:var(--font-size-subhead-big);}",".text.jsx-4045367983{margin-bottom:5px;}","@media screen and (min-width:600px){.wrap.jsx-4045367983{padding:75px 50px 75px;}}"]})]})}var le,de,fe=n(61357),pe=n(87293),he=n(73561),ge=n(60461),ve=n(52058),me=n(90886),be=n(45378),ye=n(75601),we=n(96915),xe=n(16729),Ee=n(50573),ke=n(61850);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e){var t=e.user;return(0,p.BX)(p.HY,{children:[t?(0,p.tZ)(u.default,Se(Se({},(0,c.Ru)(t)),{},{children:(0,p.tZ)("a",{onClick:function(e){e.stopPropagation()},className:i.default.dynamic([["275873743",[d.j.tabletMax]]])+" icon",children:(0,p.tZ)(ge.Z,{src:t.image,alt:t.username,size:32})})})):(0,p.tZ)("div",{className:i.default.dynamic([["275873743",[d.j.tabletMax]]])+" icon",children:(0,p.tZ)(l.Z,{size:"inherit"})}),(0,p.tZ)(i.default,{id:"275873743",dynamic:[d.j.tabletMax],children:[".icon.__jsx-style-dynamic-selector{display:none;}","@media screen and (min-width:".concat(d.j.tabletMax,"px){.icon.__jsx-style-dynamic-selector{display:block;}}")]})]})}function Ze(e){var t=e.isPrivate,n=e.isSelected,r=t?ie.Z:oe.Z,o=t?"Private":"Public",i=n?1:2;return(0,p.BX)(S.Ug,{align:"center",justify:"center",spacing:1,children:[(0,p.tZ)(S.Ug,{align:"center",justify:"center",children:(0,p.tZ)(r,{})}),(0,p.tZ)(I.Z,{truncate:!0,foreground:i,align:"center",size:"small",children:o})]})}function Ce(e){var t=e.repl,n=e.refetch,o=e.onUpdateRepl,s=e.showInModal,c=a.useState(!1),u=(0,r.Z)(c,2),l=u[0],d=u[1],f=null;if(l){var h=(0,p.tZ)(De,{setIsEditing:d,repl:t,refetch:n,onUpdateRepl:o});f=s?(0,p.tZ)(U.Z,{isOpen:!0,onRequestClose:function(){return d(!1)},children:h}):(0,p.tZ)(Pe,{children:h})}return(0,p.BX)("div",{className:"jsx-3335883948 repl-info",children:[(0,p.BX)("div",{onClick:function(){d(!l)},className:"jsx-3335883948 repl-info-click-area",children:[(0,p.tZ)(je,{user:t.user}),(0,p.tZ)(v,{repl:t}),t.isAlwaysOn&&(0,p.tZ)("div",{"aria-label":"Always on","data-microtip-position":"bottom",role:"tooltip",className:"jsx-3335883948 always-on-indicator"})]}),f,(0,p.tZ)(i.default,{id:"3335883948",children:[".repl-info.jsx-3335883948{position:relative;}",".repl-info-click-area.jsx-3335883948{cursor:pointer;display:grid;grid-auto-flow:column;grid-column-gap:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--space-4);color:var(--foreground-dimmer);border-radius:var(--border-radius-4);border:1px solid transparent;}",".repl-info-click-area.jsx-3335883948:hover{border:1px solid var(--background-highest);}"]})]})}function Pe(e){var t=e.children;return(0,p.BX)(p.HY,{children:[(0,p.tZ)("div",{className:i.default.dynamic([["784036774",[d.j.mobileMax]]])+" click-blanket"}),(0,p.tZ)("div",{className:i.default.dynamic([["784036774",[d.j.mobileMax]]])+" edit-repl",children:t}),(0,p.tZ)(i.default,{id:"784036774",dynamic:[d.j.mobileMax],children:[".edit-repl.__jsx-style-dynamic-selector{background-color:var(--background-default);border:1px solid var(--background-higher);color:var(--foreground-default);border-radius:var(--border-radius-4);box-shadow:var(--shadow-1);z-index:10000;position:absolute;left:0;top:calc(100% + var(--space-8));max-width:460px;width:64vw;max-height:calc(100vh - calc(100% + var(--space-8)));overflow-y:auto;overflow-x:hidden;}",".edit-repl.__jsx-style-dynamic-selector .list-wrapper{z-index:1;top:var(--space-24);left:var(--space-8);}",".click-blanket.__jsx-style-dynamic-selector{cursor:pointer;position:absolute;top:0;left:0;width:100%;height:100%;}","@media screen and (max-width:".concat(d.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw;}}")]})]})}function De(e){var t,n=e.repl,o=e.onUpdateRepl,c=e.setIsEditing,l=(0,y.useRouter)(),f=a.useState(!1),h=(0,r.Z)(f,2),g=h[0],v=h[1],C=a.useState(null),P=(0,r.Z)(C,2),D=P[0],T=P[1],_=a.useState(n.isBoosted),A=(0,r.Z)(_,2),R=A[0],z=A[1],G=a.useState(n.isRenamed?n.title:""),V=(0,r.Z)(G,2),W=V[0],X=V[1],Y=a.useState(n.description||""),q=(0,r.Z)(Y,2),J=q[0],$=q[1],Q=a.useState(null),ee=(0,r.Z)(Q,2),te=ee[0],ne=ee[1],oe=(0,O.Z)().showError;a.useEffect((function(){$(n.description||"")}),[n.description]);var ie=(0,ce.Z)(),ge=a.useRef(n),Oe=(0,x.ap1)({variables:{id:n.id},onCompleted:function(){return l.push("/home","/~")},update:(0,b.t)({id:n.id}),onError:function(e){return oe((0,w.bc)(e.message))}}),je=(0,r.Z)(Oe,1)[0],Ce=(0,x.vib)({onError:function(e){return oe((0,w.bc)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,r=ge.current,i={};r.description!==t.description&&(i.description=t.description),r.title!==t.title&&(i.title=t.title),r.url!==t.url&&(i.url=t.url),r.isRenamed!==t.isRenamed&&(i.isRenamed=!!t.isRenamed),ge.current=n,Object.keys(i).length>0&&(o(i),c(!1))}}),Pe=(0,r.Z)(Ce,1)[0],De=(0,he.Z)(),Ie=(0,r.Z)(De,2),Te=Ie[0],_e=Ie[1].loading,Ae=(0,x.prL)({onCompleted:function(e){ie.current&&("UserError"===e.setAlwaysOn.__typename?ne(e.setAlwaysOn.message):ne(null))},onError:function(e){return oe((0,w.bc)(e.message))}}),Re=(0,r.Z)(Ae,2),Ne=Re[0],Ue=Re[1].loading,Le=(0,x.BjH)({variables:{replId:n.id},onCompleted:function(e){var t=e.boostRepl;"UserError"!==t.__typename?(K(n.id).catch((function(e){s.Tb(e),ie.current&&ne("Something went wrong when boosting your repl. Please refresh or try again.")})),ie.current&&(ne(null),z(!0))):ie.current&&ne(t.message)},onError:function(e){s.Tb(e),oe((0,w.bc)(e.message))}}),Fe=(0,r.Z)(Le,2),Be=Fe[0],Me=Fe[1].loading,He=n.currentUserPermissions.publish,ze=(0,x.m9A)({variables:{input:{replId:n.id}},onError:function(e){s.Tb(e),oe((0,w.bc)(e.message))}}),Ge=(0,r.Z)(ze,2),Ve=Ge[0],We=Ge[1],Xe=(0,x.gFT)({variables:{input:{replId:n.id}},onError:function(e){s.Tb(e),oe((0,w.bc)(e.message))}}),Ye=(0,r.Z)(Xe,2),qe=Ye[0],Je=Ye[1],Ke=(0,x.cry)({variables:{replId:n.id},onCompleted:function(e){var t=e.unboostRepl;"UserError"!==t.__typename?(K(n.id).catch((function(e){s.Tb(e),ie.current&&ne("Something went wrong when unboosting your repl. Please refresh or try again.")})),ie.current&&(ne(null),z(!1))):ne(t.message)},onError:function(e){s.Tb(e),oe((0,w.bc)(e.message))}}),$e=(0,r.Z)(Ke,2),Qe=$e[0],et=$e[1].loading,tt=a.useMemo((function(){return!(!W||W===n.title)||!(""===J&&!n.description)&&J!==n.description}),[n,W,J]),nt=a.useCallback((function(){if(tt){var e={id:n.id,title:W||n.title,description:J};Pe({variables:{input:e}})}}),[tt,Pe,n,W,J]),rt=g||null!==D||_e,ot=(0,B.Z)((function(){rt||(tt?nt():c(!1))}),[rt,tt,nt]),it=a.useContext(be.G).usesDigitalGoodsService,at=(0,ke.Z)("flag-posts-feed-v2"),st=function(){Me||et||(R?Qe():Be())},ct=n.isRenamed?"name your repl":"default name: ".concat(n.title),ut=[x.Sy.Submit,x.Sy.PublishTemplate,x.Sy.EditTemplate].includes(n.workspaceCta),lt=[];n.currentUserPermissions.fork&&lt.push({value:le.Fork,label:"Fork",icon:(0,p.tZ)(pe.Z,{})}),He&&lt.unshift({value:le.Spotlight,label:"Spotlight",link:(0,H.j3)(n),icon:(0,p.tZ)(M.Z,{})}),n.publishedAs===x.O2h.App&&He&&lt.push({value:le.Unpublish,label:"Unpublish",icon:(0,p.tZ)(ae.Z,{})}),n.publishedAs===x.O2h.Template&&He&&lt.push({value:le.UnpublishTemplate,label:"Unpublish template",icon:(0,p.tZ)(ae.Z,{})}),n.currentUserPermissions.delete&&lt.push({isDestructive:!0,value:le.Delete,label:"Delete",icon:(0,p.tZ)(Z.Z,{})});var dt=n.currentUserPermissions.changePrivacy===x.HA$.SubscriptionRequired,ft=n.currentUserPermissions.changeAlwaysOn===x.fnM.SubscriptionRequired,pt=dt?"Get access to Private repls, Always On, and Boosts.":"Get access to Always On and Boosts.";return(0,p.BX)("div",{ref:ot,className:i.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",dt?"var(--background-root)":"var(--background-default)",dt?"none":"auto",dt?.5:1,dt?"not-allowed":"pointer",ft?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]])+" repl-info-form",children:[(0,p.tZ)("form",{onSubmit:function(e){e.preventDefault(),nt()},className:i.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",dt?"var(--background-root)":"var(--background-default)",dt?"none":"auto",dt?.5:1,dt?"not-allowed":"pointer",ft?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]]),children:(0,p.BX)(S.gC,{wrap:"nowrap",spacing:2,align:"stretch",children:[(0,p.BX)(S.gC,{wrap:"nowrap",spacing:"4px",align:"stretch",children:[(0,p.BX)(S.Ug,{spacing:1,align:"center",justify:"space-between",children:[(0,p.BX)("div",{className:i.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",dt?"var(--background-root)":"var(--background-default)",dt?"none":"auto",dt?.5:1,dt?"not-allowed":"pointer",ft?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]]),children:[n.publishedAs===x.O2h.Template&&He?(0,p.tZ)(ye.kq,{onClick:function(){return T(de.PublishTemplateUpdate)},replId:n.id}):null,!at&&n.publishedAs===x.O2h.App&&He?(0,p.BX)(j.Z,{Icon:M.Z,color:"primary",onClick:function(){(0,m.track)(m.events.PUBLISH_SELECTED,{source:"replEnvironment",isPublish:!0}),T(de.Publish)},children:["Publish",n.lastPublishedAt?" update":""]}):null,!at&&!n.publishedAs&&n.isRenamed&&He?(0,p.tZ)(j.Z,{Icon:M.Z,color:"primary",onClick:function(){return T(de.Publish)},children:"Publish"}):null,!n.isRenamed&&He?(0,p.tZ)("div",{"data-microtip-position":"right","aria-label":"Name your repl to publish",role:"tooltip",className:i.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",dt?"var(--background-root)":"var(--background-default)",dt?"none":"auto",dt?.5:1,dt?"not-allowed":"pointer",ft?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]]),children:(0,p.tZ)(j.Z,{Icon:at?Ee.Z:M.Z,color:"primary",disabled:!0,children:"Publish"})}):null,at&&n.isRenamed&&He?(0,p.tZ)(j.Z,{Icon:Ee.Z,color:"primary",onClick:function(){return T(de.Community)},children:"Publish"}):null,He?null:(0,p.tZ)(u.default,Se(Se({},(0,H.j3)(n)),{},{children:(0,p.tZ)("a",{style:{textDecoration:"none"},className:i.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",dt?"var(--background-root)":"var(--background-default)",dt?"none":"auto",dt?.5:1,dt?"not-allowed":"pointer",ft?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]]),children:(0,p.tZ)(j.Z,{Icon:M.Z,color:"primary",className:"spotlight-button",children:"Spotlight page"})})}))]}),(0,p.tZ)(fe.Z,{items:lt,onItemClick:function(e){switch(e.value){case le.Unpublish:return void T(de.UnpublishApp);case le.UnpublishTemplate:return void T(de.UnpublishTemplate);case le.Fork:return void T(de.ForkRepl);case le.Delete:T(de.DeleteRepl)}},onOpenChange:v})]}),n.lastPublishedAt&&He?(0,p.BX)(I.Z,{size:"small",foreground:3,children:["Last published on"," ",new Date(n.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]}),n.currentUserPermissions.changeIconUrl&&n.publishedAs===x.O2h.Template?(0,p.tZ)(ve.Z,{value:n.iconUrl,onChange:function(e){return Pe({variables:{input:{id:n.id,iconUrl:e}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:Se(Se({},n),{},{iconUrl:e})}}})}}):null,(0,p.BX)(S.gC,{wrap:"nowrap",align:"end",children:[(0,p.tZ)(E.ZP,{style:{cursor:n.currentUserPermissions.changeTitle?"auto":"not-allowed"},disabled:!n.currentUserPermissions.changeTitle,maxLength:60,placeholder:ct,value:W,onChange:function(e){return X(e.target.value)},spellCheck:!1}),(0,p.tZ)(k,{maxLength:60,value:W,hideLabel:!0})]}),(0,p.BX)(S.gC,{wrap:"nowrap",align:"end",children:[(0,p.tZ)("textarea",{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!n.currentUserPermissions.changeDescription,maxLength:me.p,value:J,onChange:function(e){return $(e.target.value)},placeholder:"What does this repl do?",className:i.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",dt?"var(--background-root)":"var(--background-default)",dt?"none":"auto",dt?.5:1,dt?"not-allowed":"pointer",ft?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]])}),(0,p.tZ)(k,{maxLength:me.p,value:J,hideLabel:!0})]})]})}),ut?null:(0,p.BX)(p.HY,{children:[ft&&(0,p.tZ)("div",{className:i.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",dt?"var(--background-root)":"var(--background-default)",dt?"none":"auto",dt?.5:1,dt?"not-allowed":"pointer",ft?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]]),children:it?(0,p.BX)(S.gC,{justify:"center",align:"center",style:{paddingBottom:"var(--space-16)"},children:[(0,p.tZ)(I.Z,{foreground:3,children:pt}),(0,p.BX)(I.Z,{foreground:3,children:["Go to"," ",(0,p.tZ)("a",{href:"https://replit.com/site/pricing",target:"_blank",className:i.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",dt?"var(--background-root)":"var(--background-default)",dt?"none":"auto",dt?.5:1,dt?"not-allowed":"pointer",ft?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]]),children:"replit.com"})," ","to upgrade your account."]})]}):(0,p.BX)(p.HY,{children:[(0,p.tZ)("div",{className:i.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",dt?"var(--background-root)":"var(--background-default)",dt?"none":"auto",dt?.5:1,dt?"not-allowed":"pointer",ft?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]])+" upgrade-button-container",children:(0,p.tZ)(j.Z,{textColor:"white",backgroundColor:"var(--accent-primary-default)",fullWidth:!0,onClick:function(){(0,m.track)(m.events.UPGRADE_SELECTED,{source:"inline",planID:"hacker"}),T(de.SubscribeUser)},children:"Upgrade to Hacker"})}),(0,p.tZ)("div",{className:i.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",dt?"var(--background-root)":"var(--background-default)",dt?"none":"auto",dt?.5:1,dt?"not-allowed":"pointer",ft?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]])+" upgrade-text-container",children:(0,p.tZ)(I.Z,{foreground:3,children:pt})})]})}),(0,p.BX)(S.gC,{className:"hacker-features-container",children:[n.currentUserPermissions.changePrivacy!==x.HA$.Disallowed&&(0,p.tZ)("div",{className:i.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",dt?"var(--background-root)":"var(--background-default)",dt?"none":"auto",dt?.5:1,dt?"not-allowed":"pointer",ft?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]])+" edit-repl-privacy",children:(0,p.tZ)(re.Z,{options:[(0,p.tZ)(Ze,{isPrivate:!1,isSelected:!n.isPrivate}),(0,p.tZ)(Ze,{isPrivate:!0,isSelected:n.isPrivate})],selectedOption:n.isPrivate?1:0,onChange:function(){return Pe({variables:{input:{id:n.id,isPrivate:!n.isPrivate}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:Se(Se({},n),{},{isPrivate:!n.isPrivate})}}})},width:"100%"})}),n.currentUserPermissions.changeAlwaysOn!==x.fnM.Disallowed&&(0,p.BX)("div",{className:i.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",dt?"var(--background-root)":"var(--background-default)",dt?"none":"auto",dt?.5:1,dt?"not-allowed":"pointer",ft?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]])+" set-always-online",children:[(0,p.tZ)(N,{alwaysOn:n.isAlwaysOn,isBoosted:R,onChange:function(){if(!Ue){var e=!n.isAlwaysOn;Ne({variables:{replId:n.id,enabled:e},optimisticResponse:{setAlwaysOn:Se(Se({__typename:"Repl"},n),{},{isAlwaysOn:e})}})}},onBoostChange:st,needsUpgrade:ft,onUpgrade:function(){return T(de.SubscribeUser)},onUnboostClick:function(){return T(de.UnboostRepl)}}),te&&(0,p.tZ)("div",{className:i.default.dynamic([["2408243813",[n.currentUserPermissions.changeDescription?"auto":"not-allowed",dt?"var(--background-root)":"var(--background-default)",dt?"none":"auto",dt?.5:1,dt?"not-allowed":"pointer",ft?"var(--background-root)":"var(--background-default)",d.j.mobileMax]]])+" always-on-boost-error-container",children:(0,p.tZ)(I.Z,{size:"small",children:te})})]})]})]}),(0,p.tZ)(U.Z,{isOpen:D===de.DeleteRepl,onRequestClose:function(){return T(null)},children:(0,p.tZ)(L.Z,{delete:je,entityType:"Repl",hideModal:function(){return T(null)}})}),(0,p.tZ)(U.Z,{isOpen:D===de.UnboostRepl,onRequestClose:function(){return T(null)},children:(0,p.tZ)(ue,{onUnboost:st,hideModal:function(){return T(null)}})}),(0,p.tZ)(U.Z,{isOpen:D===de.ForkRepl,onRequestClose:function(){return T(null)},children:(0,p.tZ)(xe.Z,{onFork:function(e,t){Te({originId:n.id,teamId:e,title:t,forkToPersonal:!e,trackingData:{forkSource:"editReplPopoverMenuItem"}}),(0,m.track)(m.events.REPLS_REPL_SELF_FORKED,{replId:n.id})},initialValue:n.title,hideModal:function(){return T(null)},teamContext:null===(t=n.user)||void 0===t?void 0:t.username})}),(0,p.tZ)(F.Z,{isOpen:D===de.SubscribeUser,onClose:function(){return T(null)},trackingInfo:{context:"workspace-header"}}),(0,p.tZ)(U.Z,{isOpen:D===de.UnpublishApp,onRequestClose:function(){return T(null)},children:(0,p.tZ)(we.Z,{isDestructive:!0,title:"Unpublish Repl",onCancel:function(){return T(null)},onConfirm:function(){We.loading||(Ve(),T(null))},children:"Your repl will no longer be discoverable on Apps. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,p.tZ)(U.Z,{isOpen:D===de.UnpublishTemplate,onRequestClose:function(){return T(null)},children:(0,p.tZ)(we.Z,{isDestructive:!0,title:"Unpublish Template",onCancel:function(){return T(null)},onConfirm:function(){Je.loading||(qe(),T(null))},children:"Your repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,p.tZ)(U.Z,{isOpen:D===de.Publish,onRequestClose:function(){return T(null)},children:(0,p.tZ)(U.h,{children:(0,p.tZ)(se.XY,{source:"replEnvironment",replId:n.id,onDone:function(e){var t=e.didPublish,n=e.kind;T(t?n===se.eo.Template?de.PublishTemplateConfirmation:de.PublishAppConfirmation:null)}})})}),(0,p.tZ)(U.Z,{isOpen:D===de.Community,onRequestClose:function(){return T(null)},children:(0,p.tZ)(se.ll,{source:"replEnvironment",replId:n.id,onDone:function(e){e.didPublish||T(null)}})}),(0,p.tZ)(U.Z,{isOpen:D===de.PublishTemplateUpdate,onRequestClose:function(){return T(null)},children:(0,p.tZ)(U.h,{children:(0,p.tZ)(ye.As,{replId:n.id,onDone:function(e){var t=e.didPublish;T(t?de.PublishTemplateConfirmation:null)}})})}),(0,p.tZ)(U.Z,{isOpen:D===de.PublishTemplateConfirmation,onRequestClose:function(){return T(null)},children:(0,p.tZ)(U.h,{children:(0,p.tZ)(ye.eS,{replId:n.id,onDone:function(){T(null)}})})}),(0,p.tZ)(U.Z,{isOpen:D===de.PublishAppConfirmation,onRequestClose:function(){return T(null)},children:(0,p.tZ)(U.h,{children:(0,p.tZ)(se.in,{replId:n.id,onDone:function(){T(null)}})})}),(0,p.tZ)(i.default,{id:"2408243813",dynamic:[n.currentUserPermissions.changeDescription?"auto":"not-allowed",dt?"var(--background-root)":"var(--background-default)",dt?"none":"auto",dt?.5:1,dt?"not-allowed":"pointer",ft?"var(--background-root)":"var(--background-default)",d.j.mobileMax],children:[".repl-info-form.__jsx-style-dynamic-selector{position:relative;}","form.__jsx-style-dynamic-selector{padding:var(--space-16);}","textarea.__jsx-style-dynamic-selector{min-height:42px;height:200px;resize:none;cursor:".concat(n.currentUserPermissions.changeDescription?"auto":"not-allowed",";font-size:var(--font-size-default);font-family:var(--font-family-default);padding:var(--space-8);display:block;width:100%;border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);-webkit-transition:0.2s border-color;transition:0.2s border-color;background-color:transparent;color:var(--foreground-default);}"),"textarea.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer);}","textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default);}","textarea.__jsx-style-dynamic-selector:disabled{opacity:0.5;}","textarea.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:active{outline:none;border-color:var(--accent-primary-default);}",".edit-repl-privacy.__jsx-style-dynamic-selector{background-color:".concat(dt?"var(--background-root)":"var(--background-default)",";color:var(--foreground-dimmer);pointer-events:").concat(dt?"none":"auto",";opacity:").concat(dt?.5:1,";cursor:").concat(dt?"not-allowed":"pointer",";}"),".set-always-online.__jsx-style-dynamic-selector{background-color:".concat(ft?"var(--background-root)":"var(--background-default)",";}"),".edit-repl-privacy.__jsx-style-dynamic-selector,.set-always-online.__jsx-style-dynamic-selector{width:100%;padding:var(--space-8);}",".edit-repl.__jsx-style-dynamic-selector .hacker-features-container{margin:var(--space-8);}",".edit-repl-actions.__jsx-style-dynamic-selector{padding:0 var(--space-16);}",".menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:var(--foreground-default);}",".delete-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:var(--accent-negative-default);}",".icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4);}",".menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4);}",".upgrade-button-container.__jsx-style-dynamic-selector{padding:0 var(--space-8);}",".upgrade-button-container.__jsx-style-dynamic-selector .sentence-case{text-transform:none;}",".upgrade-text-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:var(--space-8);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".always-on-indicator.__jsx-style-dynamic-selector{margin-left:var(--space-4);margin-right:var(--space-8);width:8px;height:8px;border-radius:100%;background-color:var(--accent-green-default);box-shadow:0 0 12px var(--accent-green-default);}",".always-on-boost-error-container.__jsx-style-dynamic-selector{margin-top:var(--space-8);}",".always-on-boost-error-container.__jsx-style-dynamic-selector .text{color:var(--accent-negative-default);}","@media screen and (max-width:".concat(d.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw;}}")]})]})}!function(e){e.Fork="Fork",e.Delete="Delete",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.Spotlight="Spotlight"}(le||(le={})),function(e){e.DeleteRepl="DeleteRepl",e.ForkRepl="ForkRepl",e.UnboostRepl="UnboostRepl",e.SubscribeUser="SubscribeUser",e.Publish="Publish",e.PublishAppConfirmation="PublishAppConfirmation",e.UnpublishApp="UnpublishApp",e.PublishTemplateConfirmation="PublishTemplateConfirmation",e.PublishTemplateUpdate="PublishTemplateUpdate",e.UnpublishTemplate="UnpublishTemplate",e.Community="Community"}(de||(de={}))},79081:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(68216),o=n(25997),i=n(92809),a=n(48764).Buffer,s=8192,c="utf8",u=function(){function e(){(0,r.Z)(this,e),(0,i.Z)(this,"index",void 0),(0,i.Z)(this,"buffer",void 0),this.index=0,this.buffer=new a(s)}return(0,o.Z)(e,[{key:"append",value:function(e){var t=a.from(e,c);if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var n=(Math.ceil((this.index+t.length)/s)+1)*s;0===this.index?(this.buffer=new a(n),t.copy(this.buffer,0,0,t.length)):this.buffer=a.concat([this.buffer.slice(0,this.index),t],n)}this.index+=t.length}},{key:"tryReadHeaders",value:function(){for(var e,t=0;t+3<this.index&&(13!==this.buffer[t]||10!==this.buffer[t+1]||13!==this.buffer[t+2]||10!==this.buffer[t+3]);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split("\r\n").forEach((function(t){var n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");var r=t.substr(0,n),o=t.substr(n+1).trim();if(!e)throw new Error("Expected result");e[r]=o}));var n=t+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,e}},{key:"tryReadContent",value:function(e){if(this.index<e)return null;var t=this.buffer.toString(c,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}},{key:"numberOfBytes",value:function(){return this.index}}]),e}()},7444:function(e,t,n){n.d(t,{Q:function(){return r},Z:function(){return o}});var r="idle";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EVAL_STARTED":case"EVAL_SETUP":return"running";case"STOP_EVAL":return"stopping";case"EVAL_ENDED":return"idle";case"SET_RUN_STATE":return t.runstate;default:return e}}}}]);
//# sourceMappingURL=5877-5123bbd8710e641bde23.js.map