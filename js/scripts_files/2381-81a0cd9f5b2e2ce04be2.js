(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2381],{34837:function(e){e.exports=e=>{const t=n("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAAAQCAYAAAAoEfIQAAAAAXNSR0IArs4c6QAAActJREFUaIHtmttuwyAMQEm1//9l9kTEHGyMb4HVR6rSJYAdX8CDlpIkSZIkSbITFXxO5WTdT8fd9pe3AANqidWzGR3KxO7DNhpde4dj8mc6aPtYEO0zS0ZJJ3mXENvvbuQVI6zOdqPxOIE3a6MJXgv5fTvI7v5+m2ZbGHerPtXYHpM1vP+zoMCqEpr+UrT6WemwwwrU5EfqwrGrNpAlaMda9anG9iNZ6DhYAltAlYAcYHvvQOSOz3GmNIm58iksKgTpBGxVJXlMsJIEhPciJsMKrv39h+yPszLfDCzFItAmSNuwowKYI0Pz3hV8l2wkYv0i/DHSlfsO2D7LBZ7feK7AGqgAe7s0XSGynKYCdWRPdpnWEVGW9xPfqIqTVCCcDUgLqMlv1obrvz/9d03g/0RUEmOBP0pU2Ibq3xOVCB7VS9QmlKbP7L0fzz0TWOMA7EU8A4ebaFYbE9KxqTbcwKf6Nxkrcrms9Lf09UlVWynzFfoGS+BIR1FjvHWO6UHkSqx5zm0zYzaReJ1lnxo3V3etyPf++vzjcCzOgftxvP6PopLY8occeQ4sY1bCavpzx2CTDsWBjjjRVrutRKdtQibJ60QfZSVJkiQcfgHLRY8eT2qnRAAAAABJRU5ErkJggg=="),a=n("data:image/png;base64,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"),r={};a.onload=()=>{const e=a.width/8;" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".split("").forEach(((t,a)=>{r[t]=[~~(a%e),~~(a/e)]}))};const o={pen:{cursor:"crosshair",key:"q",icon:0},erasor:{cursor:"crosshair",key:"w",icon:1},bucket:{cursor:"crosshair",key:"e",icon:2},rect:{cursor:"crosshair",key:"a",icon:3},circle:{cursor:"crosshair",key:"s",icon:4},line:{cursor:"crosshair",key:"d",icon:5},select:{cursor:"cell",key:"z",icon:6},move:{cursor:"move",key:"x",icon:7},eyedropper:{cursor:"crosshair",key:"c",icon:8}};function n(e,t){const a=new window.Image;return a.src=e,t&&(a.onload=()=>{t(a)}),a}function s(e,t,a){return Math.max(Math.min(e,a),t)}function i(e){return function(e){const t=new Image;return t.src=e,new Promise(((e,a)=>{t.onload=()=>{e(t)},t.onerror=()=>{a()}}))}(e).then((e=>c(e)))}const c=(e,t)=>{const a=document.createElement("canvas");let r=(()=>{if(e instanceof window.ImageData)return new window.ImageData(new Uint8ClampedArray(e.data),e.width,e.height);if(e instanceof window.Image){a.width=e.width,a.height=e.height;const t=a.getContext("2d");return t.drawImage(e,0,0),t.getImageData(0,0,e.width,e.height)}return new window.ImageData(new Uint8ClampedArray(e*t*4).fill(0),e,t)})();function o(){a.width=r.width,a.height=r.height;a.getContext("2d").putImageData(r,0,0)}function n(e,t){return 4*(t*r.width+e)}return{blend:"alpha",scissorRect:null,width:()=>r.width,height:()=>r.height,toImageData:()=>new window.ImageData(new Uint8ClampedArray(r.data),r.width,r.height),clone(){return c(this.toImageData())},clear(){r=new window.ImageData(new Uint8ClampedArray(r.width*r.height*4).fill(0),r.width,r.height)},set(e,t,a){if(!this.checkPt(e,t))return!1;const o=n(e,t);switch(this.blend){case"alpha":{const e=a[3]/255;r.data[o+0]=r.data[o+0]*(1-e)+a[0]*e,r.data[o+1]=r.data[o+1]*(1-e)+a[1]*e,r.data[o+2]=r.data[o+2]*(1-e)+a[2]*e,r.data[o+3]=r.data[o+3]*(1-e)+a[3]*e;break}case"replace":r.data[o+0]=a[0],r.data[o+1]=a[1],r.data[o+2]=a[2],r.data[o+3]=a[3];break;case"add":{const e=r.data[o+3]/255,t=a[3]/255;r.data[o+0]=r.data[o+0]*e+a[0]*t,r.data[o+1]=r.data[o+1]*e+a[1]*t,r.data[o+2]=r.data[o+2]*e+a[2]*t,r.data[o+3]=r.data[o+3]*e+a[3]*t;break}}return!0},get(e,t){const a=n(e,t);return[r.data[a+0],r.data[a+1],r.data[a+2],r.data[a+3]]},line(e,t,a,r,o){const n=a-e,s=r-t,i=Math.abs(n),c=Math.abs(s);let l=0;const d=n>0?1:-1,f=s>0?1:-1;if(i>c)for(let h=e,m=t;d<0?h>=a:h<=a;h+=d)this.set(h,m,o),l+=c,l<<1>=i&&(m+=f,l-=i);else for(let h=e,m=t;f<0?m>=r:m<=r;m+=f)this.set(h,m,o),l+=i,l<<1>=c&&(h+=d,l-=c)},fillRect(e,t,a,r,o){a<0&&(e+=a,a=-a),r<0&&(t+=r,r=-r);for(let n=e;n<e+a;n++)for(let e=t;e<t+r;e++)this.set(n,e,o)},strokeRect(e,t,a,r,o){a<0&&(e+=a,a=-a),r<0&&(t+=r,r=-r),this.line(e,t,e+a,t,o),this.line(e+a,t,e+a,t+r,o),this.line(e+a,t+r,e,t+r,o),this.line(e,t+r,e,t,o)},fillCircle(e,t,a,r){for(let o=e-(a=Math.abs(a));o<=e+a;o++)for(let n=t-a;n<=t+a;n++){Math.sqrt((o-e)**2+(n-t)**2)<=a&&this.set(o,n,r)}},bucket(e,t,a){if(!this.checkPt(e,t))return!1;const r=this.get(e,t);if(l(r,a))return!1;const o=[];for(o.push([e,t]);o.length;){const[e,t]=o.pop();this.checkPt(e,t)&&(l(this.get(e,t),r)&&(this.set(e,t,a),o.push([e,t-1]),o.push([e-1,t]),o.push([e+1,t]),o.push([e,t+1])))}return!0},merge(e,t=0,a=0){for(let o=0;o<r.width;o++)for(let n=0;n<r.height;n++){const s=e.get(o,n);s&&o+t>=0&&o+t<r.width&&n+a>=0&&n+a<r.height&&this.set(o+t,n+a,s)}},checkPt(e,t){if(this.scissorRect){const a=this.scissorRect;return e>=a[0][0]&&e<a[1][0]&&t>=a[0][1]&&t<a[1][1]}return e>=0&&e<r.width&&t>=0&&t<r.height},clampPt:e=>[s(e[0],0,r.width),s(e[1],0,r.height)],bbox(){let e=[0,0],t=[r.width-1,r.height-1];e:for(let a=e[0];a<=t[0];a++)for(let o=e[1];o<=t[1];o++){const t=n(a,o);if(0!==r.data[t+3]){e[0]=a;break e}}e:for(let a=t[0];a>=e[0];a--)for(let o=e[1];o<=t[1];o++){const e=n(a,o);if(0!==r.data[e+3]){t[0]=a;break e}}e:for(let a=e[1];a<=t[1];a++)for(let o=e[0];o<=t[0];o++){const t=n(o,a);if(0!==r.data[t+3]){e[1]=a;break e}}e:for(let a=t[1];a>=e[1];a--)for(let o=e[0];o<=t[0];o++){const e=n(o,a);if(0!==r.data[e+3]){t[1]=a;break e}}return[e,t]},crop(e,t){const a=t[0]-e[0]+1,o=t[1]-e[1]+1,n=c(a,o);for(let r=e[0];r<=t[0];r++)for(let a=e[1];a<=t[1];a++)n.set(r-e[0],a-e[1],this.get(r,a));r=n.toImageData()},toDataURL:()=>(o(),a.toDataURL("image/png")),toPNG(){const e=this.toDataURL().replace(/^data:image\/png;base64,/,""),t=window.atob(e),a=new Uint8Array(t.length);for(let r=0;r<a.length;r++)a[r]=t.charCodeAt(r);return a.buffer},drawable:()=>(o(),a),game(){const e=this.toImageData();for(let t=0;t<r.height;t++)for(let a=0;a<r.width;a++){let o=0,n=0,s=0,i=0;for(let e=-1;e<=1;e++)for(let c=-1;c<=1;c++)if((0!==e||0!==c)&&a-e>=0&&a+e<r.width&&t-c>=0&&t+c<r.height){const l=4*((t+c)*r.width+a+e);r.data[l+3]>0&&(n+=r.data[l+0],s+=r.data[l+1],i+=r.data[l+2],o++)}const c=4*(t*r.width+a);o<2||o>3?(e.data[c+0]=0,e.data[c+1]=0,e.data[c+2]=0,e.data[c+3]=0):3===o&&(e.data[c+0]=n/o,e.data[c+1]=s/o,e.data[c+2]=i/o,e.data[c+3]=255)}return c(e)}}};function l(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function d(e){return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}const f=e.canvas,h=e.canvas.getContext("2d"),m={width:e.width,height:e.height,curFrame:0,frames:[c(e.width||64,e.height||64)],fCanvas:c(64|e.width,e.height||64),anims:{},tool:"pen",color:[0,0,0,255],palette:e.palette||[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],view:{offset:[0,0],scale:1},state:{stack:[],offset:0},modified:!1,readOnly:e.readOnly,events:{},curAnim:null,animTimer:0,animSpeed:200,gaming:!1,gameTimer:0,gameSpeed:100},u={mouseDown:!1,mousePressed:!1,mouseMoved:!1,mousePos:[0,0],mousePosPrev:[0,0],mouseStartPos:null,grabbin:!1,delCb:()=>{},hideUI:!1,loopID:null,time:0};y(),h.imageSmoothingEnabled=!1;const g={game:{icon:14,action:function(){m.gaming=!0,m.readOnly=!0,S()}},export:{icon:13,action:()=>R("export")},save:{icon:12,action:()=>R("save")},crop:{icon:9,action:function(){let e,t;m.frames.forEach((a=>{const[r,o]=a.bbox();e&&t?(e[0]=Math.min(e[0],r[0]),e[1]=Math.min(e[1],r[0]),t[0]=Math.max(t[0],o[0]),t[1]=Math.max(t[1],o[0])):(e=r,t=o)})),m.frames.forEach((a=>a.crop(e,t))),m.width=Y().width(),m.height=Y().height(),S()}},undo:{icon:10,key:"shift+z",action:D},redo:{icon:11,key:"meta+shift+z",action:I}},p=document.createElement("input");function w(e){return[~~((e[0]-m.view.offset[0])/m.view.scale),~~((e[1]-m.view.offset[1])/m.view.scale)]}function v(){m.view.scale<=2||(m.view.scale--,m.view.offset[0]+=m.width/2,m.view.offset[1]+=m.height/2)}function b(){m.view.scale>=64||(m.view.scale++,m.view.offset[0]-=m.width/2,m.view.offset[1]-=m.height/2)}function y(){const e=f.width,t=f.height,a=(e-120)/m.width,r=(t-120)/m.height;m.view.scale=~~Math.min(a,r),m.view.offset=[(e-m.width*m.view.scale)/2,(t-m.height*m.view.scale)/2]}function k(e=m.curFrame){m.frames.splice(m.curFrame,0,Y().clone()),e===m.curFrame&&A(m.curFrame+1),S()}function P(e=m.curFrame){m.frames.length>1&&(m.frames.splice(e,1),m.curFrame===m.frames.length&&A(m.frames.length-1)),S()}function A(e){m.curFrame=e,u.delCb=()=>{confirm(`removed frame ${e}?`)&&P(e)}}function C(e){m.color=e,u.delCb=()=>{confirm("remove selected color?")&&(m.palette=m.palette.filter((e=>!l(e,m.color))),R("change",m.palette))}}function E(){A(0===m.curFrame?m.frames.length-1:m.curFrame-1)}function O(){A((m.curFrame+1)%m.frames.length)}function x(){const e=Y(),[t,a]=e.scissorRect;e.blend="replace",e.fillRect(t[0],t[1],a[0]-t[0],a[1]-t[1],[0,0,0,0]),e.blend="alpha",S()}function R(e,...t){if(m.events[e])for(const a of m.events[e])a(...t)}function S(){m.state.stack.length>=64||(m.state.offset>0&&(m.state.stack.splice(m.state.stack.length-m.state.offset,m.state.offset),m.state.offset=0),m.state.stack.push({frames:U(),curFrame:m.curFrame}),R("change"))}function z(e){m.frames=e.frames.map(c),A(e.curFrame),R("change")}function D(){m.state.offset>=m.state.stack.length-1||(m.state.offset++,z(m.state.stack[m.state.stack.length-m.state.offset-1]))}function I(){0!==m.state.offset&&(m.state.offset--,z(m.state.stack[m.state.stack.length-m.state.offset-1]))}function U(){return m.frames.map((e=>e.toImageData()))}function F(){m.curAnim=null,m.animTimer=0,m.readOnly=e.readOnly}function j(e){m.curAnim?F():function(e){m.curAnim=e,m.animTimer=0,A(m.anims[e].from),m.readOnly=!0}(e)}p.type="color",p.addEventListener("change",(e=>{const t=function(e){const t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t,255]}(e.target.value.substring(1));m.palette.push(t),C(t),R("change",m.palette)})),u.loopID=window.requestAnimationFrame((function e(n){const s=n-u.time;if(u.time=n,m.gaming&&(m.gameTimer+=s,m.gameTimer>=m.gameSpeed&&(m.frames[m.curFrame]=Y().game(),m.gameTimer=0)),m.curAnim&&(m.animTimer+=s,m.animTimer>=m.animSpeed)){const e=m.anims[m.curAnim];e.to<e.from?m.curFrame>e.to?E():A(e.from):m.curFrame<e.to?O():A(e.from),m.animTimer=0}let i=!1,c=!1,v=null;const b=Y(),y=f.width,P=f.height,S=m.view.scale,z=m.view.offset[0],D=m.view.offset[1];function I(e,t,a={}){const r=a.lineWidth||2;let o;return{width:e,height:t,update(){o&&(a.click||a.hover)&&function(e,t,a,r){a<0&&(e+=a,a=-a),r<0&&(t+=r,r=-r);const[o,n]=u.mousePos;return o>=e&&o<=e+a&&n>=t&&n<=t+r}(o.x,o.y,e,t)&&(i=!0,a.hover&&a.hover(),u.mousePressed&&!c&&(a.click&&a.click(),c=!0))},draw(){o=h.getTransform().transformPoint(),this.update(),a.bg&&(h.fillStyle=d(a.bg),h.fillRect(0,0,e,t)),a.border&&(h.lineWidth=r,h.strokeStyle=d(a.border),h.strokeRect(0,0,e,t))}}}function U(e,t={}){const a=t.align||"left",r=t.margin||0,o=t.padding||0;let n=0,s=0;for(const d of e)d&&(n=Math.max(d.width,n),s+=d.height+r);const i=n+2*o,c=s+2*o,l=I(i,c,t);return{width:i,height:c,update(){e.reverse().forEach((e=>{e.update()}))},draw(){l.draw(),h.save(),h.translate(o,o),e.forEach((e=>{if(!e)return;const t=(()=>{switch(a){case"left":return 0;case"center":return(n-e.width)/2;case"left":return n-e.width}})();h.translate(t,0),e.draw(),h.translate(-t,e.height+r)})),h.restore()}}}function F(e,t={}){const a=t.align||"top",r=t.margin||0,o=t.padding||0;let n=0,s=0;for(const d of e)d&&(n+=d.width,s=Math.max(d.height,s));const i=n+2*o,c=s+2*o,l=I(i,c,t);return{width:i,height:c,update(){e.reverse().forEach((e=>{e.update()}))},draw(){l.draw(),h.save(),h.translate(o,o),e.forEach((e=>{if(!e)return;const t=(()=>{switch(a){case"top":return 0;case"center":return(s-2*o-e.height)/2;case"bottom":return s-2*o-e.height}})();h.translate(0,t),e.draw(),h.translate(e.width+r,-t)})),h.restore()}}}function K(e,t={}){const a=t.padding||0,r=t.sw||e.width,o=t.sh||e.height,n=(t.width||r)+2*a,s=(t.height||o)+2*a,i=n+2*a,c=s+2*a,l=t.sx||0,d=t.sy||0,f=(t.lineWidth,I(i,c,t));return{width:i,height:c,update(){f.update()},draw(){f.draw(),h.drawImage(e,l,d,r,o,a,a,n,s)}}}function M(e,t={}){e+="";const o=t.size||12,n=t.padding||0,s=e.length*o+2*n,i=o+2*n,c=t.color||[0,0,0,255],l=(t.lineWidth,I(s,i,t));return{width:s,height:i,update(){l.update()},draw(){l.draw(),h.fillStyle=d(c);const t=e.split("");let s=0;for(const e of t)if(r[e]){const[t,i]=r[e];h.drawImage(a,8*t,8*i,8,8,n+s,n,o,o),s+=o}}}}function T(e,t,a){t||a?function(e,t,a,r={}){return{width:a.width,height:a.height,update(){a.update()},draw(){h.save(),h.translate(e,t),a.draw(),h.restore()}}}(t,a,e).draw():e.draw()}function L(e,t,a,r={}){const o=I(e,t,r);return{width:e,height:t,update(){a.reverse().forEach((([e])=>{e.update()}))},draw(){o.draw(),a.forEach((([e,[t,a]])=>{h.save(),h.translate(t,a),e.draw(),h.restore()}))}}}const q=I(y,P,{bg:[170,170,170,255]}),N=F([...m.frames.map(((e,t)=>{const a=t===m.curFrame;return M(t,{padding:a?6:3,bg:a?[255,255,255,255]:[230,230,230,255],border:[0,0,0,255],size:16,click(){A(t)}})})),!m.readOnly&&M("+",{padding:3,bg:[230,230,230,255],border:[0,0,0,255],size:16,click(){k()}})],{align:"bottom"}),J=I(b.width()*S,b.height()*S,{bg:[255,255,255,255]}),V=I(b.width()*S,b.height()*S,{border:[0,0,0,255]});function G(e,t={}){const a=t.dx||0,r=t.dy||0;return{width:e.width()*S,height:e.height()*S,draw(){h.save(),h.scale(S,S),h.translate(a,r),h.drawImage(e.drawable(),0,0),h.restore()}}}if(L(y,P,[[q,[0,0]],[J,[z,D]],[G(b),[z,D]],[(()=>{if("move"===m.tool&&u.mouseStartPos){const[e,t]=w(u.mousePos),[a,r]=w(u.mouseStartPos),[o,n]=[e-a,t-r];return G(m.fCanvas,{dx:o,dy:n})}return G(m.fCanvas)})(),[z,D]],[N,[z,D-N.height]],[V,[z,D]]]).draw(),b.scissorRect){const e=b.scissorRect[0],t=b.scissorRect[1];h.lineDashOffset=n/100,h.strokeStyle=d([0,0,0,255]),h.setLineDash([5,5]),h.strokeRect(e[0]*S+z,e[1]*S+D,(t[0]-e[0])*S,(t[1]-e[1])*S),h.strokeStyle=d([255,255,255,255]),h.setLineDash([0,5,5,0]),h.strokeRect(e[0]*S+z,e[1]*S+D,(t[0]-e[0])*S,(t[1]-e[1])*S),h.setLineDash([])}if(!m.readOnly){const[e,t]=w(u.mousePos),a=e*S+z,r=t*S+D;if(b.checkPt(e,t))switch(m.tool){case"pen":case"rect":case"line":case"circle":case"bucket":T(I(S,S,{bg:m.color}),a,r);break;case"erasor":T(I(S,S,{bg:[255,255,255,255],border:[0,0,0,255]}),a,r)}}const W={padding:3,size:16,bg:[255,255,255,255],border:[0,0,0,255]},H=U([...m.palette.map((e=>I(24,24,{bg:e,border:[0,0,0,255],lineWidth:l(e,m.color)?4:2,click(){C(e)}}))),M("+",{size:24,bg:[255,255,255,255],border:[0,0,0,255],click(){p.click()}})]),X=U([...Object.keys(o).map((e=>{const a=o[e];return K(t,{sx:16*a.icon,sw:16,sh:16,width:32,height:32,bg:[255,255,255,255],border:[0,0,0,255],lineWidth:m.tool===e?4:2,click(){m.tool=e},hover(){v={msg:`${e} (${a.key})`,pos:[-1,1]}}})}))]),B=F([...Object.keys(g).map((e=>{const a=g[e];return K(t,{sx:16*a.icon,sw:16,sh:16,width:32,height:32,bg:[255,255,255,255],border:[0,0,0,255],click(){a.action()},hover(){v={msg:`${e}`,pos:[-1,-1]}}})}))]),Q=U([!m.readOnly&&M("+",{...W,click(){const e=prompt("add anim:");e&&(m.anims[e]={from:0,to:0,loop:!0},R("change"))}}),...Object.keys(m.anims).map((e=>{const t=m.anims[e],a=e===m.curAnim;return F([M((a?">":"")+e,{...W,lineWidth:a?4:2,click(){j(e)}}),M(t.from,{...W,lineWidth:a?4:2,click(){t.from=(t.from+1)%m.frames.length,R("change")}}),M(t.to,{...W,lineWidth:a?4:2,click(){t.to=(t.to+1)%m.frames.length,R("change")}})])}))]);if(u.hideUI||function(e,t,a,r={}){return L(e,t,a.filter((e=>e)).map((([a,r])=>[a,[r[0]*(e-a.width),r[1]*(t-a.height)]])),r)}(y,P,[!m.readOnly&&[H,[0,0]],!m.readOnly&&[X,[1,0]],!m.readOnly&&[B,[1,1]],[Q,[0,1]]]).draw(),v){const e=6,[t,a]=u.mousePos,r=M(v.msg,{padding:3,bg:[255,255,255,255],border:[0,0,0,255]});T(r,t+(r.width*(v.pos[0]-1)/2+v.pos[0]*e),a+(r.height*(v.pos[1]-1)/2+v.pos[1]*e))}if(i?f.style.cursor="pointer":u.grabbin?f.style.cursor="grab":f.style.cursor=o[m.tool].cursor,u.mousePressed&&!c){const[e,t]=w(u.mousePos);if(u.mouseDown=!0,!m.readOnly)switch(m.tool){case"pen":b.set(e,t,m.color);break;case"erasor":b.blend="replace",b.set(e,t,[0,0,0,0]),b.blend="alpha";break;case"bucket":b.bucket(e,t,m.color);break;case"move":b.scissorRect&&(m.fCanvas.scissorRect=b.scissorRect,m.fCanvas.merge(b),m.fCanvas.scissorRect=null,x());break;case"eyedropper":m.color=b.get(e,t)}}u.mousePressed=!1,u.loopID=window.requestAnimationFrame(e)}));const K={wheel(e){e.preventDefault(),e.altKey?e.deltaY<0?b():e.deltaY>0&&v():(m.view.offset[0]-=e.deltaX,m.view.offset[1]-=e.deltaY)},mousedown(e){u.mousePressed=!0,u.mousePosPrev=[...u.mousePos],u.mousePos=[e.offsetX,e.offsetY],u.mouseStartPos=[...u.mousePos]},mousemove(e){if(m.readOnly)return;if(u.mousePosPrev=[...u.mousePos],u.mousePos=[e.offsetX,e.offsetY],u.mouseMoved=!0,u.grabbin&&(m.view.offset[0]+=e.movementX,m.view.offset[1]+=e.movementY),!u.mouseDown)return;const t=Y(),[a,r]=w(u.mousePos),[o,n]=w(u.mousePosPrev),[s,i]=w(u.mouseStartPos);switch(m.tool){case"pen":t.line(o,n,a,r,m.color);break;case"erasor":t.blend="replace",t.line(o,n,a,r,[0,0,0,0]),t.blend="alpha";break;case"rect":m.fCanvas.clear(),m.fCanvas.fillRect(s,i,a-s,r-i,m.color);break;case"line":m.fCanvas.clear(),m.fCanvas.line(s,i,a,r,m.color);break;case"circle":m.fCanvas.clear(),m.fCanvas.fillCircle(s,i,Math.max(a-s,r-i),m.color);break;case"select":{const[e,o]=t.clampPt([s,i]),[n,c]=t.clampPt([a,r]);t.scissorRect=[[e,o],[n,c]];break}case"move":{const[e,s]=[a-o,r-n];t.scissorRect[0][0]+=e,t.scissorRect[1][0]+=e,t.scissorRect[0][1]+=s,t.scissorRect[1][1]+=s;break}}},mouseup(e){if(m.readOnly)return;u.mouseDown=!1,u.mousePosPrev=[u.mousePos,u.mousePos],u.mousePos=[e.offsetX,e.offsetY];const t=Y(),[a,r]=w(u.mousePos),[o,n]=w(u.mouseStartPos);switch(u.mouseStartPos=null,m.tool){case"pen":case"erasor":case"bucket":S();break;case"rect":case"circle":case"line":t.merge(m.fCanvas),m.fCanvas.clear(),S();break;case"move":if(t.scissorRect){const[e,s]=[a-o,r-n];t.merge(m.fCanvas,e,s),m.fCanvas.clear(),S()}}},keydown(t){if(!t.metaKey)for(const e in o){if(o[e].key===t.key)return void(m.tool=e)}const a=Y();switch(t.key){case"-":v();break;case"=":b();break;case"0":y();break;case"ArrowLeft":E();break;case"ArrowRight":O();break;case" ":u.grabbin=!0,t.preventDefault();break;case"Escape":F(),m.gaming=!1,m.gameTimer=0,m.readOnly=e.readOnly,D()}if(!m.readOnly)switch(t.key){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":C(m.palette[parseInt(t.key,10)-1]||m.color);break;case"+":k();break;case"_":P();break;case"z":t.metaKey&&(t.preventDefault(),t.shiftKey?I():D());break;case"s":t.metaKey&&(t.preventDefault(),R("save"));break;case"l":t.metaKey&&(t.preventDefault(),R("load"));break;case"Backspace":a.scissorRect?(x(),a.scissorRect=null):u.delCb();break;case"Escape":a.scissorRect=null;break;case"Tab":t.preventDefault(),u.hideUI=!u.hideUI}},keyup(e){switch(e.key){case" ":u.grabbin=!1}}};f.onselectstart=()=>!1;for(const N in K)f.addEventListener(N,K[N]);function Y(){return m.frames[m.curFrame]}function M(){return{version:"1",width:m.width,height:m.height,palette:m.palette,anims:m.anims,frames:m.frames.map((e=>e.toDataURL()))}}function T(e){return m.width=e.width,m.height=e.height,m.palette=e.palette,m.anims=e.anims,Promise.all(e.frames.map(((e,t)=>i(e).then((e=>{m.frames[t]=e}))))).then((()=>{m.frames.length=e.frames.length,A(0),q(),y()}))}function L(e,...t){const a=URL.createObjectURL(new Blob(...t)),r=document.createElement("a");r.href=a,r.download=e,r.click()}function q(){m.state.stack=[{frames:U(),curFrame:m.curFrame}]}return q(),e.data&&T(e.data),{frames:function(){return m.frames},curFrame:Y,on:function(e,t){m.events[e]||(m.events[e]=[]),m.events[e].push(t)},setTool:function(e){if(!o[e])throw new Error(`no tool called ${e} bro`);m.tool=e},setColor:C,setPalette:function(e){m.palette=e},save:M,load:T,undo:D,redo:I,pushState:S,scaleUp:b,scaleDown:v,scaleFit:y,newFrame:k,delFrame:P,prevFrame:E,nextFrame:O,download:function(e){L(e,[JSON.stringify(M())])},downloadPNG:function(e){L(e,[Y().toPNG()])},cleanUp:function(){for(const e in K)f.removeEventListener(e,K[e]);window.cancelAnimationFrame(u.loopID)}}}},24561:function(e,t,a){"use strict";var r=a(67294),o=function(){return(o=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var n=function(){return Math.random().toString(36).substring(2)},s=function(e){var t=e.rtl,a=e.speed,s=e.interval,i=e.style,c=e.width,l=e.height,d=e.baseUrl,f=e.gradientRatio,h=e.animate,m=e.ariaLabel,u=e.children,g=e.className,p=e.uniquekey,w=e.primaryColor,v=e.primaryOpacity,b=e.secondaryColor,y=e.secondaryOpacity,k=e.preserveAspectRatio,P=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(a[r[o]]=e[r[o]])}return a}(e,["rtl","speed","interval","style","width","height","baseUrl","gradientRatio","animate","ariaLabel","children","className","uniquekey","primaryColor","primaryOpacity","secondaryColor","secondaryOpacity","preserveAspectRatio"]),A=p?p+"-idClip":n(),C=p?p+"-idGradient":n(),E=t?{transform:"scaleX(-1)"}:{},O="0; "+s+"; 1",x=a+"s";return(0,r.createElement)("svg",o({role:"img",style:o({},i,E),className:g,"aria-label":m||null,viewBox:"0 0 "+c+" "+l,preserveAspectRatio:k},P),m?(0,r.createElement)("title",null,m):null,(0,r.createElement)("rect",{x:"0",y:"0",width:c,height:l,clipPath:"url("+d+"#"+A+")",style:{fill:"url("+d+"#"+C+")"}}),(0,r.createElement)("defs",null,(0,r.createElement)("clipPath",{id:A},u),(0,r.createElement)("linearGradient",{id:C},(0,r.createElement)("stop",{offset:"0%",stopColor:w,stopOpacity:v},h&&(0,r.createElement)("animate",{attributeName:"offset",values:-f+"; "+-f+"; 1",keyTimes:O,dur:x,repeatCount:"indefinite"})),(0,r.createElement)("stop",{offset:"50%",stopColor:b,stopOpacity:y},h&&(0,r.createElement)("animate",{attributeName:"offset",values:-f/2+"; "+-f/2+"; "+(1+f/2),keyTimes:O,dur:x,repeatCount:"indefinite"})),(0,r.createElement)("stop",{offset:"100%",stopColor:w,stopOpacity:v},h&&(0,r.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+f),keyTimes:O,dur:x,repeatCount:"indefinite"})))))},i={animate:!0,ariaLabel:"Loading interface...",baseUrl:"",gradientRatio:2,height:130,interval:.25,preserveAspectRatio:"none",primaryColor:"#f0f0f0",primaryOpacity:1,rtl:!1,secondaryColor:"#e0e0e0",secondaryOpacity:1,speed:2,style:{},width:400},c=function(e){return(0,r.createElement)("rect",{x:"0",y:"0",rx:"5",ry:"5",width:e.width,height:e.height})},l=function(e){var t=o({},i,e);return(0,r.createElement)(s,o({},t),e.children||(0,r.createElement)(c,o({},t)))};t.ZP=l},16496:function(e){!function(){var t=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],a="undefined"!==typeof window,r=a&&null!=window.mozInnerScreenX;function o(e,o,n){if(!a)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var s=n&&n.debug||!1;if(s){var i=document.querySelector("#input-textarea-caret-position-mirror-div");i&&i.parentNode.removeChild(i)}var c=document.createElement("div");c.id="input-textarea-caret-position-mirror-div",document.body.appendChild(c);var l=c.style,d=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,f="INPUT"===e.nodeName;l.whiteSpace="pre-wrap",f||(l.wordWrap="break-word"),l.position="absolute",s||(l.visibility="hidden"),t.forEach((function(e){f&&"lineHeight"===e?l.lineHeight=d.height:l[e]=d[e]})),r?e.scrollHeight>parseInt(d.height)&&(l.overflowY="scroll"):l.overflow="hidden",c.textContent=e.value.substring(0,o),f&&(c.textContent=c.textContent.replace(/\s/g,"\xa0"));var h=document.createElement("span");h.textContent=e.value.substring(o)||".",c.appendChild(h);var m={top:h.offsetTop+parseInt(d.borderTopWidth),left:h.offsetLeft+parseInt(d.borderLeftWidth),height:parseInt(d.lineHeight)};return s?h.style.backgroundColor="#aaa":document.body.removeChild(c),m}"undefined"!=typeof e.exports?e.exports=o:a&&(window.getCaretCoordinates=o)}()},90420:function(e){"use strict";e.exports={i8:"2.20.0"}}}]);
//# sourceMappingURL=2381-81a0cd9f5b2e2ce04be2.js.map