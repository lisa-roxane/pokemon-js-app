"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4807],{32046:function(e,r,t){t.d(r,{Z:function(){return o}});var n=t(79056),u=t(67294);function o(e,r){var t=u.useState(e),o=(0,n.Z)(t,2),a=o[0],c=o[1];return u.useEffect((function(){var t=setTimeout((function(){c(e)}),r);return function(){clearTimeout(t)}}),[e]),a}},37813:function(e,r,t){t.d(r,{Z:function(){return u}});var n=t(67294);function u(e){var r=(0,n.useState)(!1),t=r[0],u=r[1],o=(0,n.useRef)(0);return[t,(0,n.useMemo)((function(){return{onDragEnter:function(e){e.preventDefault(),o.current++,u(!0)},onDragLeave:function(e){e.preventDefault(),o.current--,0===o.current&&u(!1)},onDrop:function(r){var t,n;r.preventDefault(),o.current=0,u(!1),r.persist();var a=Array.from(null!==(t=null===r||void 0===r||null===(n=r.dataTransfer)||void 0===n?void 0:n.files)&&void 0!==t?t:[]);0!==a.length?e(a):e(null)},onDragOver:function(e){e.preventDefault()}}}),[e])]}},54298:function(e,r,t){t.d(r,{Z:function(){return h}});var n=t(79056),u=t(67294),o=t(16496),a=t.n(o),c=t(61941),i=t(80723);var l=t(37813),s=t(97131),f=t(30266),p=t(809),d=t.n(p),v=t(54907),g=t(96887),b=t(91682);function h(e){var r=e.initialValue,t=e.textTriggers,o=(0,u.useState)(r||""),p=o[0],h=o[1],m=(0,u.useRef)(null),y=function(e){var r=e.textTriggers,t=e.applySuggestion,o=(0,u.useRef)(null),l=(0,c.Z)(r),s=(0,n.Z)(l,2),f=s[0].suggestions,p=s[1],d=(0,i.Kb)({items:(null===f||void 0===f?void 0:f.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(f),onSelectedItemChange:function(e){var r=e.selectedItem;if(f&&r){var n=o.current;if(n){var u=f.applySuggestion({targetValue:n.value,suggestionValue:r.value}),a=u.fullValue,c=u.cursorIndex;t({fullValue:a,cursorIndex:c})}}}}),v=(0,u.useMemo)((function(){if(f&&o.current)return a()(o.current,f.textTrigger.index)}),[f]);return{ref:(0,u.useCallback)((function(e){o.current=e,p(e)}),[p]),suggestions:null===f||void 0===f?void 0:f.results,caretCoordinates:v,combobox:d}}({textTriggers:t,applySuggestion:function(e){var r=e.cursorIndex,t=e.fullValue;h(t),setTimeout((function(){m.current&&m.current.setSelectionRange(r,r)}))}}),Z=y.combobox,O=y.caretCoordinates,w=y.suggestions,C=y.ref,x=function(e){var r=(0,u.useRef)(null),t=(0,g.Z)(e.onChange),n=(0,g.Z)(e.onError),o=(0,u.useCallback)((function(e){r.current=e}),[]),a=(0,u.useCallback)(function(){var e=(0,f.Z)(d().mark((function e(u){var o,a,c,i,l,f,p,g,h,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.current){e.next=3;break}return e.abrupt("return");case 3:return a=o.value,c=o.selectionStart?o.selectionStart:a.length,i=u.map((function(e){return"![Uploading ".concat(e.name,"...]()")})),l=a.substr(0,c),f=a.substr(c),p=(0,s.Z)(i),l&&p.unshift(l),f&&p.push(f),t.current(p.join("\n")),g=[],e.prev=13,e.next=16,(0,v.Z)(u);case 16:g=e.sent,e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(13),n.current(e.t0),e.abrupt("return");case 23:return h=[],e.prev=24,e.next=27,Promise.all(g.map((function(e){return null==e?new Error("Could not read file"):(0,b.uz)("/data/images/upload",{image:e.result})})));case 27:h=e.sent,e.next=34;break;case 30:return e.prev=30,e.t1=e.catch(24),n.current(e.t1),e.abrupt("return");case 34:if(r.current){e.next=36;break}return e.abrupt("return");case 36:m=i.reduce((function(e,r,t){var n=u[t].name.replace(/\.[^/.]+$/,""),o=h[t],a=o instanceof Error?"Error uploading":o.url;return e.replace(r,"![".concat(n,"](").concat(a,")"))}),r.current.value),t.current(m);case 38:case"end":return e.stop()}}),e,null,[[13,19],[24,30]])})));return function(r){return e.apply(this,arguments)}}(),[t,n]),c=(0,u.useCallback)((function(e){var r=Array.from(e.clipboardData.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})).filter((function(e){return null!==e}));r.length&&a(r)}),[a]);return{ref:o,handleFiles:a,handlePaste:c}}({onChange:h,onError:function(){}}),j=x.handleFiles,k=x.handlePaste,P=x.ref,E=(0,l.Z)((function(e){null!==e&&j(e)})),S=(0,n.Z)(E,2)[1],D=(0,u.useCallback)((function(e){m.current=e,C(e),P(e)}),[C,P]),L=(0,u.useCallback)((function(e,r){var t;null===(t=m.current)||void 0===t||t.setSelectionRange(e,r)}),[]);return{ref:D,value:p,setValue:h,dropZoneHanlders:S,handlePaste:k,combobox:Z,caretCoordinates:O,suggestions:w,setSelectionRange:L}}},30825:function(e,r,t){t.d(r,{Z:function(){return s}});var n=t(30266),u=t(79056),o=t(809),a=t.n(o),c=t(67294),i=t(91682),l=t(54907);function s(e){var r=e.onUploadPreview,t=e.onUpload,o=e.onError,s=c.useState(!1),f=(0,u.Z)(s,2),p=f[0],d=f[1];return{isLoading:p,uploadImage:c.useCallback(function(){var e=(0,n.Z)(a().mark((function e(n){var u,c,s,f,p,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,(0,l.p)(n);case 3:if(null!==(u=e.sent)&&void 0!==u&&u.result){e.next=7;break}return o(new Error("Could not read file")),e.abrupt("return",!1);case 7:if(!(n.size>1e7)){e.next=10;break}return o(new Error("This image is over the ".concat("10MB"," maximum"))),e.abrupt("return",!1);case 10:return r({dataUrl:u.result}),c=null,e.prev=12,e.next=15,(0,i.uz)("/data/images/upload",{image:u.result});case 15:c=e.sent,e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(12),s=e.t0.message.toLowerCase().includes("entity too large")?"This image is over the 1mb maximum":"Something went wrong",o(new Error(s)),e.abrupt("return",!1);case 23:if(p=(f=c).id,v=f.url,"number"===typeof p){e.next=26;break}throw new Error("Expected id");case 26:if("string"===typeof v){e.next=28;break}throw new Error("Expected url");case 28:return d(!1),e.prev=29,e.next=32,t({id:p,url:v});case 32:e.next=38;break;case 34:return e.prev=34,e.t1=e.catch(29),o(e.t1),e.abrupt("return",!1);case 38:return e.abrupt("return",!0);case 39:case"end":return e.stop()}}),e,null,[[12,18],[29,34]])})));return function(r){return e.apply(this,arguments)}}(),[o,t,r])}}},61941:function(e,r,t){t.d(r,{Z:function(){return p}});var n=t(97131),u=t(79056),o=t(67294),a=t(32046),c=t(92809);function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){(0,c.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var s=function(e){return/\s/.test(e)};function f(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n=o.useState(null),a=(0,u.Z)(n,2),c=a[0],i=a[1],f=o.useCallback(i,[i]),p=o.useRef(r);o.useEffect((function(){p.current=r}),[r]);var d=o.useState(null),v=(0,u.Z)(d,2),g=v[0],b=v[1];return o.useEffect((function(){if(c){var e=function(){var e=c.value,r=c.selectionStart;if(r){var t=1===r||s(e[r-2]||""),n=e.length?e[r-1]:null;b((function(u){if(u&&(r<u.index||0===r))return null;if(!n)return u;if(!u&&!t)return u;var o=p.current.includes(n);return u||o?u?s(n)?null:l(l({},u),{},{text:e.slice(u.index,r)}):{index:r,text:"",match:n}:u}))}else b(null)},r=function(){b(null)};return c.addEventListener("focus",e),c.addEventListener("keyup",e),c.addEventListener("blur",r),function(){b(null),c.removeEventListener("focus",e),c.removeEventListener("keyup",e),c.removeEventListener("blur",r)}}}),[c,b]),[g,f]}function p(e){var r=o.useRef(e);o.useEffect((function(){r.current=e}),[e]);var t=o.useState(!1),c=(0,u.Z)(t,2),i=c[0],l=c[1],s=o.useState(null),p=(0,u.Z)(s,2),d=p[0],v=p[1],g=f.apply(void 0,(0,n.Z)(Object.keys(e))),b=(0,u.Z)(g,2),h=b[0],m=b[1],y=o.useRef(h);o.useEffect((function(){y.current=h}),[h]);var Z=(0,a.Z)(h,100);return o.useEffect((function(){if(Z){var e=Z.match,t=Z.text,n=r.current[e]?r.current[e]:null;if(n){var u=!1;return l(!0),n(t).then((function(e){u||y.current===Z&&(l(!1),v({textTrigger:Z,results:e,applySuggestion:function(e){var r=e.targetValue,t=e.suggestionValue,n=r.slice(0,Z.index),u=t,o=r.slice(Z.index+Z.text.length);o&&o.startsWith(" ")||(u+=" ");var a=n+u+o;return{cursorIndex:(n+u).length+(o&&o.startsWith(" ")?1:0),fullValue:a}}}))})),function(){u=!0}}v(null)}else v(null)}),[Z,v]),[{isLoading:i,suggestions:d},m]}},54907:function(e,r,t){t.d(r,{p:function(){return n}});var n=function(e){return new Promise((function(r,t){var n=new window.FileReader;n.onload=function(t){t.target?r({name:e.name,result:t.target.result}):r(null)},n.onerror=t,n.readAsDataURL(e)}))};r.Z=function(e){return Promise.all(Array.from(e).filter((function(e){return!!e})).map(n))}},23495:function(e,r,t){t.d(r,{gF:function(){return a},E8:function(){return c},Y8:function(){return i},Qs:function(){return l},bc:function(){return s}});var n=t(92809),u=t(2466),o=t.n(u),a=(t(34155).env.PROXY_SUFFIX,function(e){return{className:e.props.className,styles:e.props.children}});function c(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),u=1;u<r;u++)t[u-1]=arguments[u];t.forEach((function(r){e["on".concat(r[0].toUpperCase()).concat(r.slice(1),"Change")]=function(t){var u;u=t&&t.target&&void 0!==t.currentTarget.value?t.currentTarget.value:t,e.setState((0,n.Z)({},r,u))}}))}function i(e){if(Array.isArray(e))return e.map(i);if(e&&"object"===typeof e){var r={};for(var t in e)r[o()(t)]=e[t];return r}return"string"===typeof e?o()(e):e}function l(e){return e?e[0].toUpperCase()+e.slice(1):e}function s(e){return e.replace("GraphQL error: ","")}},26341:function(e,r,t){t.d(r,{W:function(){return d},Z:function(){return v}});var n=t(67294),u=t(10921),o=t(5537),a=t(11069),c=t(30825),i=t(49512),l=t(14900),s=t(50573),f=t(82457),p=t(35944);function d(e){var r=(0,n.useState)(null),t=r[0],u=r[1],o=(0,n.useState)(null),a=o[0],i=o[1],l=(0,c.Z)({onUpload:function(e){function r(r){return e.apply(this,arguments)}return r.toString=function(){return e.toString()},r}((function(r){var t=r.url;u(null),e(t)})),onUploadPreview:function(e){var r=e.dataUrl;i(null),u(r)},onError:function(e){u(null),i(e.message)}}),s=(0,n.useCallback)((function(){return i(null)}),[]);return{uploadImage:l.uploadImage,error:a,clearError:s,previewUrl:t}}function v(e){var r=(0,n.useRef)(null),t=e.size||48;return(0,p.BX)(i.Z,{css:[f.l0.position.relative(),"cursor:pointer;&:hover .surface{opacity:0.8;}&:hover .icon{opacity:1;}",""],onClick:function(){var e;null===(e=r.current)||void 0===e||e.click()},"aria-label":e.value?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[e.value?(0,p.BX)(p.HY,{children:[(0,p.tZ)(u.Z,{iconUrl:e.value,size:e.size,alt:"icon"}),(0,p.tZ)(l.Z,{className:"surface",elevated:!0,css:[f.l0.borderRadius(8),f.l0.coverContainer,{opacity:e.isUploading?.8:0},"",""]}),(0,p.tZ)(i.Z,{className:"icon",css:[f.l0.coverContainer,f.l0.center,f.l0.color.accentPrimaryDefault,{overflow:"hidden",opacity:e.isUploading?1:0},"",""],children:e.isUploading?(0,p.tZ)(a.Z,{}):(0,p.tZ)(o.Z,{})})]}):(0,p.tZ)(i.Z,{css:[f.l0.center,f.l0.width(t),f.l0.height(t),f.l0.borderRadius(8),f.l0.color.foregroundDimmer,{border:"1px dashed "+f.TV.outlineDefault,"&:hover":{color:f.TV.accentPrimaryDefault,borderColor:f.TV.accentPrimaryDefault}},"",""],children:(0,p.tZ)(s.Z,{})}),(0,p.tZ)("input",{css:[[f.l0.coverContainer,{opacity:0,zIndex:-1}],"",""],ref:r,accept:"image/png, image/jpeg",type:"file",onChange:function(r){var t=r.target,n=t.validity,u=t.files;if(n.valid){var o=u?u[0]:null;o&&e.onUpload(o)}}})]})}},67871:function(e,r,t){t.d(r,{Z:function(){return p}});var n=t(67294),u=t(94573),o=t(223),a=t(82457),c=t(49512),i=t(14900),l=t(95211),s=t(70565),f=t(35944);function p(e){var r=e.colorway,t=e.closable,p=e.icon,d=e.text,v=e.closeAction,g=[a.l0.rowWithGap(4),a.l0.align.center,a.l0.p(4),a.l0.pl(8),a.l0.borderRadius(8),a.l0.flex.growAndShrink(1),{borderWidth:1,borderStyle:"solid"},r?{background:u.Br[r].dimmest,borderColor:u.Br[r].dimmer,color:u.Br[r].strongest}:{background:"var(--interactive-background)",borderColor:"var(--interactive-border)",color:a.TV.foregroundDefault}];return(0,f.BX)(c.Z,{css:g,children:[(0,f.BX)(c.Z,{css:[a.l0.rowWithGap(8),a.l0.center,a.l0.flex.growAndShrink(1),"",""],children:[p&&n.cloneElement(p,{size:16}),(0,f.tZ)(o.x,{css:a.l0.flex.growAndShrink(1),variant:"small",multiline:!0,children:d})]}),t&&(0,f.tZ)(i.Z,{elevated:!0,css:[a.l0.flex.grow(0),"background:transparent;",""],children:(0,f.tZ)(s.Z,{alt:"Close",tooltipHidden:!0,colorway:r,onClick:v,children:(0,f.tZ)(l.Z,{})})})]})}},32087:function(e,r,t){t.d(r,{Z:function(){return i}});var n=t(92809),u=(t(67294),t(96622)),o=t(35944);function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function i(e){return(0,o.tZ)(u.Z,c(c({},e),{},{children:(0,o.tZ)("path",{d:"M5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21ZM5 21L16 10L21 15M10 8.5C10 9.32843 9.32843 10 8.5 10C7.67157 10 7 9.32843 7 8.5C7 7.67157 7.67157 7 8.5 7C9.32843 7 10 7.67157 10 8.5Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}},5537:function(e,r,t){t.d(r,{Z:function(){return i}});var n=t(92809),u=(t(67294),t(96622)),o=t(35944);function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function i(e){return(0,o.tZ)(u.Z,c(c({},e),{},{children:(0,o.tZ)("path",{d:"M17 3.0003C17.2626 2.73766 17.5744 2.52932 17.9176 2.38718C18.2608 2.24503 18.6286 2.17188 19 2.17188C19.3714 2.17187 19.7392 2.24503 20.0824 2.38718C20.4256 2.52932 20.7374 2.73766 21 3.0003C21.2626 3.26295 21.471 3.57475 21.6131 3.91791C21.7553 4.26107 21.8284 4.62887 21.8284 5.0003C21.8284 5.37174 21.7553 5.73953 21.6131 6.08269C21.471 6.42585 21.2626 6.73766 21 7.0003L7.5 20.5003L2 22.0003L3.5 16.5003L17 3.0003Z",strokeLinecap:"round",strokeLinejoin:"round"})}))}},50573:function(e,r,t){t.d(r,{Z:function(){return i}});var n=t(92809),u=(t(67294),t(96622)),o=t(35944);function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function i(e){return(0,o.tZ)(u.Z,c(c({},e),{},{children:(0,o.tZ)("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15M17 8L12 3M12 3L7 8M12 3V15",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}))}}}]);
//# sourceMappingURL=4807-1e5ef5147cd4deede89e.js.map