"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7171],{80062:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.EIOCompat=n.splitHref=void 0;var o=t(45983),r=t(10861);function a(e){var n=r.parse(e),t=n.protocol,o=n.slashes,a=n.auth,i=n.host,s=n.pathname;return{uri:r.format({protocol:t,slashes:o,auth:a,host:i,query:{ordered:"1"}}),path:null!=s?s:"/"}}n.splitHref=a;var i=new Map([["opening",0],["open",1],["closing",2],["closed",3]]),s=function(){function e(e,n){var t=this;if(this.CLOSED=3,this.CLOSING=2,this.OPEN=1,this.CONNECTING=0,n)throw new Error("Passing protocols is not implemented");var r=a(e),i=r.uri,s=r.path;this.onopen=null,this.onclose=null,this.onmessage=null,this.onerror=null,this.eioSocket=o(i,{path:s,transports:["polling"]}),this.url=e,this.extensions="",this.protocol="",this.bufferedAmount=0,this.binaryType="blob",this.readyState=0,this.incomingSequence=0,this.outOfOrderQueue={},this.outgoingSequence=0,this.setReadyState(),this.eioSocket.on("open",(function(){if(t.setReadyState(),null!=t.onopen){var e=new Event("open");t.onopen.call(t,e)}})),this.eioSocket.on("close",(function(e){if(t.setReadyState(),null!=t.onclose){var n=new CloseEvent("close",{reason:e,code:1001,wasClean:!1});t.onclose.call(t,n)}})),this.eioSocket.on("message",(function(e){if(t.setReadyState(),null!=t.onmessage){if("string"===typeof e)throw new Error("expected data to be ArrayBuffer not string");var n=new DataView(e).getUint32(0);if(t.incomingSequence===n){t.incomingSequence=n+1;var o=new MessageEvent("message",{data:e.slice(4)}),r=t.onmessage.bind(t);r(o);var a=Object.keys(t.outOfOrderQueue);a.length>0&&(a.sort().forEach((function(e){r(new MessageEvent("message",{data:t.outOfOrderQueue[+e]})),t.incomingSequence=+e+1})),t.outOfOrderQueue={})}else t.outOfOrderQueue[n]=e.slice(4)}})),this.eioSocket.on("error",(function(){if(t.setReadyState(),null!=t.onerror){var e=new Event("error");t.onerror.call(t,e)}}))}return e.prototype.setReadyState=function(){this.readyState=i.get(this.eioSocket.readyState)},e.prototype.send=function(e){var n=new ArrayBuffer(4+e.byteLength);new Uint8Array(n).set(new Uint8Array(e),4),new DataView(n).setUint32(0,this.outgoingSequence),this.outgoingSequence+=1,this.eioSocket.send(n),this.setReadyState()},e.prototype.close=function(){this.onmessage=null,this.eioSocket.close(),this.setReadyState()},e.prototype.addEventListener=function(){throw new Error("Not Implemented, please use onmessage, onopen, onerror, or onclose")},e.prototype.removeEventListener=function(){throw new Error("Not Implemented")},e.prototype.dispatchEvent=function(){throw new Error("Not Implemented")},e}();n.EIOCompat=s},73198:function(e,n,t){var o=this&&this.__extends||function(){var e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(n,t)};return function(n,t){function o(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(n){a(n)}}function s(e){try{c(o.throw(e))}catch(n){a(n)}}function c(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}c((o=o.apply(e,n||[])).next())}))},a=this&&this.__generator||function(e,n){var t,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(s){a=[6,s],o=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Channel=void 0;var i=t(17187),s=t(50055),c=function(e){function n(n){var t=e.call(this)||this;return t.send=function(e){e.channel=t.id,t.sendToClient(s.api.Command.create(e))},t.request=function(e){return r(t,void 0,void 0,(function(){var n,t=this;return a(this,(function(o){return n=Number(Math.random().toString().split(".")[1]).toString(36),e.ref=n,[2,new Promise((function(o){t.requestMap[n]=o,t.send(e)}))]}))}))},t.close=function(e){return void 0===e&&(e=s.api.CloseChannel.Action.TRY_CLOSE),r(t,void 0,void 0,(function(){var n,t=this;return a(this,(function(o){if(!0===this.closed)throw new Error("Channel already closed");return n=s.api.Command.create({channel:0,closeChan:{action:e,id:this.id}}),this.sendToClient(n),this.onCommand=function(){},this.send=function(){},this.closed=!0,[2,new Promise((function(e){t.once("close",(function(n){e(n)}))}))]}))}))},t.onOpen=function(e,n,o){t.id=e,t.sendToClient=o,t.state=n,t.isOpen=!0;for(var r=t.sendQueue.shift();r;)t.send(r),r=t.sendQueue.shift();t.emit("open")},t.onOpenError=function(e){var n=e.error;t.emit("error",{message:n||""})},t.onCommand=function(e){t.emit("command",e),e.ref&&t.requestMap[e.ref]&&(t.requestMap[e.ref](e),delete t.requestMap[e.ref])},t.onClose=function(e){Object.keys(t.requestMap).forEach((function(n){var o=s.api.Command.fromObject({});o.channelClosed=e,t.requestMap[n](o),delete t.requestMap[n]})),t.isOpen=!1,t.closed=!0,t.emit("close",e),t.removeAllListeners()},t.enqueueSend=function(e){return t.sendQueue.push(e)},t.state=null,t.id=null,t.isOpen=!1,t.closed=!1,t.sendQueue=[],t.sendToClient=t.enqueueSend,t.requestMap={},t.name=n,t}return o(n,e),n}(i.EventEmitter);n.Channel=c},74406:function(e,n,t){var o=this&&this.__extends||function(){var e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(n,t)};return function(n,t){function o(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(n){a(n)}}function s(e){try{c(o.throw(e))}catch(n){a(n)}}function c(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}c((o=o.apply(e,n||[])).next())}))},a=this&&this.__generator||function(e,n){var t,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(s){a=[6,s],o=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Client=void 0;var i,s=t(17187),c=t(10861),l=t(50055),u=t(73198),d=t(80062),h=t(56953);!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECTED=2]="DISCONNECTED"}(i||(i={}));var f={secure:!0,host:"eval.repl.it",port:"443"},p=function(e){return("object"===typeof e||"function"===typeof e)&&(!!e&&("OPEN"in e&&1===e.OPEN))},m=function(e){if(e.WebSocketClass){if(!p(e.WebSocketClass))throw new Error("Passed in WebSocket does not look like a standard WebSocket");return e.WebSocketClass}if("undefined"!==typeof WebSocket){if(!p(WebSocket))throw new Error("Global WebSocket does not look like a standard WebSocket");return WebSocket}throw new Error("Please pass in a WebSocket class, add it to global, or use the polling option")},C=function(e){function n(t){void 0===t&&(t=function(){});var o=e.call(this)||this;return o.isConnected=function(){return o.connectionState===i.CONNECTED},o.connect=function(e){return r(o,void 0,void 0,(function(){var n,t,o,r,s,c,l,u,h,p;return a(this,(function(a){switch(a.label){case 0:if(this.debug({type:"breadcrumb",message:"connect",data:{polling:!!e.pollingHost||!!e.polling}}),this.didConnect)throw c=new Error("Reconnecting using the same client after it connected once is not allowed"),this.debug({type:"breadcrumb",message:"error",data:c.message}),c;if(this.connectionState!==i.DISCONNECTED)throw c=new Error("Client must be disconnected to connect"),this.debug({type:"breadcrumb",message:"error",data:c.message}),c;if(!(n=e.connectionMetadata)){if(!e.token)throw c=new Error("You must provide a connectionMetadata / token"),this.debug({type:"breadcrumb",message:"error",data:c.message}),c;t=e.urlOptions||f,o=t.secure,r=t.host,s=t.port,n={token:e.token,gurl:"ws"+(o?"s":"")+"://"+r+":"+s,conmanURL:"http"+(o?"s":"")+"://"+r+":"+s}}if(this.ws&&(0===this.ws.readyState||1===this.ws.readyState))throw c=new Error("Client already connected to an active websocket connection"),this.debug({type:"breadcrumb",message:"error",data:c.message}),c;l=null!==(p=e.pollingHost)&&void 0!==p?p:e.polling?"gp-v2.herokuapp.com":void 0,u={connectionMetadata:n,timeout:e.timeout||null,WebSocketClass:l?d.EIOCompat:m(e),pollingHost:l},this.connectionState=i.CONNECTING,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.tryConnect(u)];case 2:return a.sent(),[3,4];case 3:throw h=a.sent(),this.connectionState=i.DISCONNECTED,this.debug({type:"breadcrumb",message:"error",data:h.message}),h;case 4:return this.connectionState=i.CONNECTED,this.didConnect=!0,[2]}}))}))},o.openChannel=function(e){var n=e.name,t=e.service,r=e.action;if(n){if(Object.values(o.channels).some((function(e){return e.name===n})))throw new Error("Named channel already opened "+n);o.inflightChannels.forEach((function(e){if(e.name===n)throw new Error("Named channel already inflight "+n)}))}var a=r;a||(a=null==n?l.api.OpenChannel.Action.CREATE:l.api.OpenChannel.Action.ATTACH_OR_CREATE),o.debug({type:"breadcrumb",message:"openChannel",data:{name:n,service:t,action:a}});var i=new u.Channel(n||null),s=Number(Math.random().toString().split(".")[1]).toString(36),c=o.getChannel(0);c.setMaxListeners(c.getMaxListeners()+1),c.send({ref:s,openChan:{name:n,service:t,action:a}}),o.inflightChannels.add(i);var d=function(e){if(s===e.ref){if(null==e.openChanRes)throw new Error("Expected openChanRes on command");o.inflightChannels.delete(i),o.handleOpenChanRes(i,e.openChanRes),c.setMaxListeners(c.getMaxListeners()-1),c.off("command",d)}};return c.on("command",d),i},o.close=function(){o.debug({type:"breadcrumb",message:"user close"}),o.onClose({closeReason:h.ClientCloseReason.Intentional})},o.startPing=function(){var e=o.getChannel(0),n=Date.now(),t=function(){e.closed||(n=Date.now(),e.send({ping:{}}))};e.on("command",(function(e){if("pong"===e.body){var r=Date.now()-n;o.debug({type:"ping",latency:r}),setTimeout(t,1e4)}})),t()},o.send=function(e){o.debug({type:"log",log:{direction:"out",cmd:e}});var n=l.api.Command.encode(e).finish(),t=n.buffer.slice(n.byteOffset,n.byteOffset+n.length);if(null==o.ws)throw new Error("Calling send on a closed client");o.ws.send(t)},o.onSocketMessage=function(e){var n=e.data,t=new Uint8Array(n),r=l.api.Command.decode(t);switch(o.debug({type:"log",log:{direction:"in",cmd:r}}),o.getChannel(r.channel).onCommand(r),r.body){case"closeChanRes":if(null==r.closeChanRes)throw new Error("Expected closeChanRes");if(null==r.closeChanRes.id||null==r.closeChanRes.status)throw new Error("Expected id and status in closeChanRes, got "+r.closeChanRes.id+" and "+r.closeChanRes.status);o.handleCloseChannel(r.closeChanRes.id,{initiator:"channel",closeStatus:r.closeChanRes.status})}},o.handleOpenChanRes=function(e,n){var t=n.id,r=n.state,a=n.error;if(o.debug({type:"breadcrumb",message:"openChanres"}),r===l.api.OpenChannelRes.State.ERROR)return o.debug({type:"breadcrumb",message:"error",data:a}),void e.onOpenError({error:a});if(null==t||null==r)throw new Error("Expected state and channel id");o.channels[t]=e,e.onOpen(t,r,o.send)},o.handleCloseChannel=function(e,n){o.debug({type:"breadcrumb",message:"handleCloseChannel",data:{id:e,reason:n}}),o.channels[e].onClose(n),delete o.channels[e]},o.onClose=function(e){o.cleanupSocket(),Object.keys(o.channels).forEach((function(n){o.handleCloseChannel(Number(n),{initiator:"client",clientCloseReason:e.closeReason})})),o.inflightChannels.forEach((function(n){n.onClose({initiator:"client",clientCloseReason:e.closeReason}),o.inflightChannels.delete(n)})),o.connectionState!==i.DISCONNECTED&&o.emit("close",e),o.connectionState=i.DISCONNECTED},o.cleanupSocket=function(){var e=o.ws;e&&(o.ws=null,e.onmessage=null,e.onclose=null,0!==e.readyState&&1!==e.readyState||(o.debug({type:"breadcrumb",message:"wsclose"}),e.close()))},o.tryConnect=function(e){var t=e.connectionMetadata,s=e.pollingHost,c=e.timeout,u=e.WebSocketClass;return r(o,void 0,void 0,(function(){var e,o,r,d,f,p,m,C,b,g,y,w=this;return a(this,(function(a){if(this.debug({type:"breadcrumb",message:"connect internal",data:{polling:!!s}}),this.connectionState===i.DISCONNECTED)throw new Error("closed while connecting");return this.connectionMetadata=t,e=n.getConnectionStr(t,s),(o=new u(e)).binaryType="arraybuffer",o.onmessage=this.onSocketMessage,this.ws=o,o.onclose=function(){d(new Error("WebSocket closed before we got READY"))},f=function(){},p=function(){},c&&(p=function(){return clearTimeout(m)},f=function(){p(),m=setTimeout((function(){w.debug({type:"breadcrumb",message:"connect timeout"}),d(new Error("timeout"))}),c)}),C=function(e){if(f(),null!=e.containerState)if(null!=e.containerState.state){var n=e.containerState.state;w.debug({type:"breadcrumb",message:"containerState",data:n});var t=l.api.ContainerState.State;switch(n){case t.READY:r(),!1===w.getChannel(0).isOpen&&w.getChannel(0).onOpen(0,l.api.OpenChannelRes.State.CREATED,w.send);break;case t.SLEEP:d(new Error("Got SLEEP as container state"))}}else d(new Error("Got containterState but state was not defined"))},(b=this.getChannel(0)).on("command",C),g=this.close,this.close=function(){w.debug({type:"breadcrumb",message:"user close"}),d(new Error("You called `Client.close` before you connected"))},y=function(){p(),w.close=g,b.off("command",C)},[2,new Promise((function(e,n){r=function(){y(),o.onclose=function(e){w.debug({type:"breadcrumb",message:"wsclose",data:{closeReason:e?e.reason:void 0}}),w.onClose({closeReason:h.ClientCloseReason.Disconnected,wsCloseEvent:e})},e(),w.debug({type:"breadcrumb",message:"connected!"})},d=function(e){y(),n(e),w.cleanupSocket(),w.debug({type:"breadcrumb",message:"connect failed"})}}))]}))}))},o.ws=null,o.channels={0:new u.Channel(null)},o.inflightChannels=new Set,o.connectionMetadata=null,o.connectionState=i.DISCONNECTED,o.debug=t,o.didConnect=!1,o.debug({type:"breadcrumb",message:"constructor"}),o}return o(n,e),n.getConnectionStr=function(e,n){var t=c.parse(e.gurl);return n?(t.hostname=n,t.host=n,t.pathname="/wsv2/"+e.token+"/"+encodeURIComponent(e.gurl)):t.pathname="/wsv2/"+e.token,c.format(t)},n.prototype.getChannel=function(e){var n=this.channels[e];if(this.debug({type:"breadcrumb",message:"getChannel",data:{id:e}}),!n){var t=new Error("No channel with number "+e);throw this.debug({type:"breadcrumb",message:"error",data:t.message}),t}return n},n.prototype.getConnectionMetadata=function(){return this.connectionMetadata?this.connectionMetadata:null},n.prototype.getToken=function(){return this.connectionMetadata?this.connectionMetadata.token:null},n.prototype.setDebugFunc=function(e){this.debug=e},n.ClientCloseReason=h.ClientCloseReason,n}(s.EventEmitter);n.Client=C},56953:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ClientCloseReason=void 0,function(e){e[e.Intentional=0]="Intentional",e[e.Disconnected=1]="Disconnected"}(n.ClientCloseReason||(n.ClientCloseReason={}))},57171:function(e,n,t){t(39062);var o=t(74406);Object.defineProperty(n,"KU",{enumerable:!0,get:function(){return o.Client}});var r=t(73198)},39062:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),t(94997).read=function(e,n,t){if(t-n<1)return"";for(var o="",r=n;r<t;){var a=e[r++];if(a<=127)o+=String.fromCharCode(a);else if(a>=192&&a<224)o+=String.fromCharCode((31&a)<<6|63&e[r++]);else if(a>=224&&a<240)o+=String.fromCharCode((15&a)<<12|(63&e[r++])<<6|63&e[r++]);else if(a>=240){var i=((7&a)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;o+=String.fromCharCode(55296+(i>>10)),o+=String.fromCharCode(56320+(1023&i))}}return o}}}]);
//# sourceMappingURL=7171-8768c01e0b8cf4ec52e1.js.map